welcom everyon to thi first lectur of the cours on audio signal process for music applic .
in thi first lectur , i want to introduc a few practic thing relat with the cours .
the first on is to introduc ourselv .
professor juliu smith , he's a professor at stanford univers at the center for comput research in music and acoust , under whom i did my phd quit a few year ago .
and from whom i learn most of the thing i know on audio signal process .
and myself my name is xavier serra , and i teach at the pompeu fabra univers in barcelona , and i lead a research group in music technolog .
and we have two teach assist in the cours .
ajai srinivasamurthi and sankalp gulati .
thei ar both do their phd under my supervis in barcelona , and of cours thei work on music and audio technolog topic .
despit these pictur we ar definit not profession perform , but we ar definit music lover .
we love to plai and we love to listen to music .
and the main reason we ar in thi topic is becaus we want , and we like to develop engin tool that can be of relev to music .
so what is thi cours about ?
well , it's basic about signal process , about audio and music , about program techniqu that ar relev to audio and music , and about understand and make sound .
who is thi cours for ?
well , it's for anyon interest in understand how to analyz and process music sound .
but , you have to be abl to follow mathemat formul , us a program languag , and us sound process softwar .
you definit don't have to be an engin student , but you have to have some technic background .
the cours is ten week long , and everi week cover a particular topic , and everi particular topic is present through differ perspect .
through the theori lectur , we present the more mathemat and signal process point of view .
through the program lectur , we present the appli point of view in which you learn how to implement thing .
and final through the demo lectur you understand the more appli point of view , the , the us of these techniqu and how these techniqu can be of relev for sound and music .
then we have some more advanc topic and refer that will allow you to view and understand other relat topic and everi week we'll have some assign , specif some program assign and some quizz .
in fact the evalu is done everi week and there is a weekli quiz that count five point , and there is a weekli assign that count for <num> point .
and these weekli assign ar the program assign .
and then there's two survei , on at the begin of the cours , on at the end of the cours , that we would like veri much you to fill .
so we also give it two point for fill out the survei .
on fundament concept in the cours is that we decid to have everyth open .
all the video , slide , all the materi that we have creat for the cours ar avail under creativ common licens .
especi the attribut noncommerci share alik licens .
all the softwar , that we have develop , and that we us in the cours , is also avail freeli , under the affero gpl licens .
most of the refer that we us , if thei ar not our , thei come from open repositori , like wikipedia or some other relat site .
and we'll be us sound .
so all the sound we us come from freesound . org , which is a , a websit that host creativ common sound .
in thi short lectur we have present some practic thing relat with the cours , there is much more inform in the websit .
so pleas make sure that you understand the context of the cours , and how the cours is run .
especi befor you actual go deep into the cours .
so that's all for todai and i hope to see you in the next lectur .
thank you .
welcom again to the cours on audio signal process for music applic .
in the last two program class we introduc python and some basic tool of how to read and process sound .
in thi class , i want to introduc the sm tool , which ar the python tool that we have develop for thi class .
and the on that we will realli go through and try to understand quit deepli .
sm come from spectral model synthesi .
and that's a name that i gave to these type of tool , a long time ago .
and so it got stuck , and that's what i us .
so , these tool ar avail from github , which is an onlin repositori of softwar , which is a great tool and a great commun of peopl .
so a lot of the softwar initi , free softwar initi ar , ar us these these repositori .
so in thi the sm tool you can you can go through that and you will see sever directori in the lectur you will see the , the slide , and the theori lectur , and the code that i us for all the plot from the slide , so that might be good for you .
in the softwar that's we're go to focu now , then there is sound , so where all the sound that i us in class ar store , and then a work space for you to work from etc .
so if we open the , the softwar directori .
here you will see , the main , softwar , for the cours .
so these ar the model , the softwar model that we will be us .
and here you have the dft , the harmon model , the stft , etc . , all the model that we will be talk quit a bit in class .
and code to appli transform to these model .
and then the interfac ar the , the function , and the file that ar us to call these model .
so , thi is go to be the function that we ar go to be execut .
okai .
and then if we go back here , there is readm file that , describ , basic , how to instal it .
the first thing , it tell , is that , of cours , we need item <num> .
that we need to instal all these packag we alreadi did in lectur <num> .
and then that we need to compil the c function .
there is some c function that we need to compil .
okai , so , in order to do all that the first thing we have to do is to download the , the zip file with all thi .
so , if we click download .
it will just .
creat a zip file and it will save it local .
so , you alreadi have done that .
so , we have now , if we open the termin in the home directori i have sm tool master which is the directori i have creat with all thi content .
so if i go to the sm tool master i have the same content that i have here in , in github , okai ?
and if we continu follow the read me file , what it tell me is that i need to compil these , execut thi command .
so let me copi the command .
and i have to go to the directori softwar model , util function underscor c .
okai , so i need to go to the softwar model util function , and i have to , execut , thi command .
okai , and i alreadi did it so it's , alreadi compil .
we should not have ani problem with that .
okai , so , basic we ar readi .
now , i mean if we don't want to go too much into code , we can just execut the interfac as it sai here .
that we present in the , in anoth class , in a demo class .
so we can execut the model ui or the transform ui .
but now what i want to do is to go into the model , directori , and here is where the core model .
that we will be start ar includ .
so , let's open on of them from text editor .
so , we , we have the gedit .
and then let's go into , for exampl , into the softwar into the model .
and let's , for exampl , go into the sine model .
okai ?
so , sine model is on of the model that basic analyz sound , as if it wa a sum of sinusoid .
and in thi code we have at the begin of cours import the packag that we need , and then it ha a set of function , so like differ function that implement differ aspect of the sinusoid model .
okai , let's focu into on of them .
for exampl , let's focu on to thi , sinemodelan .
thi is the , the function that thi from an input , which ar , all these ar the input paramet , the main on be the input sound as an arrai .
and the control paramet that we need to have to , to decid what analysi to perform .
okai , it perform a whole bunch of thing .
it iter over the whole sound , and it return <num> variabl , which ar basic the frequenc , the magnitud and the phase of all the sinusoid includ in thi sound . tude and okai ?
so these ar big matrix that store all thi inform .
and all thi is explain in thi introductori text .
thi comment in which it tell us what it doe , the input paramet , and the return valu .
okai , but to call thi function we us anoth file .
so , we go to the model interfac directori , and here we will find the sine model function .
and thi is the function that we actual call in order to perform thi sinusoid analysi , okai ?
so thi is a file that again , it import the set of packag .
and then it ha on singl function .
which is call main , and then in order for be abl to execut these file , and not have to call the function that is thi command here , that basic sai that when we execut the file , it should execut the function main .
so by default , when we just execut thi file , it will run thi function .
and all the input paramet have default valu , so it ha input file as a default valu .
and it ha all the other paramet as default valu .
of cours we can go in here , and modifi all these valu , and then within that , it perform all the step for the sinusoid analysi .
it read the sound file okai , and then it get analysi window , it perform a short time fourier transform .
then it perform a sinemodelan .
thi is the function that we just saw .
so , it , it ha gotten all the , valu and variabl from all these execut beforehand .
and , so we can just call the function .
and it return .
thi three variabl that store the frequenc , magnitud , and phase of the sinusoid .
and then we can synthes the , the sound back , okai ?
and then we can write the sound again .
as an output file .
by the wai , thi wai of read and write the sound file , is a function of wrapper to the scipi that i talk about and in fact if we go to these util function that ar within the model .
we can go to thi function the read and write sound file , the wavread and the wavwrit and basic it just read .
the input sound as we had done in the previou class , but what it doe now is it normal , it convert to a float point number and it normal to a valu from <num> to minu <num> , which kind of the convent to deal with sound as float point number go from minu <num> .
to on and , in write the file , we have to undo the process so we have to creat the integ , the <num> bit number , back .
okai , so that's an overview of basic what thi file doe , and we can execut it .
so we can go to the , the interfac , model's interfac page and we can just type python and we can type thi , sinemodel_funcion . py and what these will do , is , will execut thi main file .
and it will write , a sound file .
where it will write it .
well , the first thing you will , do , is to plot , the analysi result , okai ?
and thi is the , the , wa the displai of the input file and thi is the analysi result and thi is the output file .
and basic , it ha written a sound file into a directori call output_sound .
within thi directori .
so if we look here , if we type ls , there's a directori call output sound that ha , if we type ls output sound , it ha thi bendir_sinemodel , which is the result file .
okai , so to plai that we just type plai , and we just put output sound , and we just enter .
okai .
so thi is the synthes sound that we have gener from these analysi .
synthesi , okai ?
of cours , thi can be done within ipython .
so with ipython and we ar within the interact mode .
we also can execut thi file by type run .
and we just type run , sine model and the function .
and it will do the same thing .
it will execut that function and then it will displai the result and it will save the sound file , okai ?
the advantag of run it within ipython is that , if there is an error .
or we can realli want to explor the intermedi step of the function we can do it .
we can run a debugg etcetera , etcetera .
so that's go to be quit us for us .
okai .
and that's basic all i want to mention .
so in thi class .
what we have gone through is explan of the sm tool , which is host within github .
so feel free to go there and download it and instal it .
in order to instal it , the onli thing we have to do apart from the previou instal with it .
wa to compil the , the c function with cython .
and briefli todai we just describ on of the model that we go to be analyz , which is the sine model .
we have execut and we have seen how .
we can analyz and synthesi a sound from it .
okai , so that wa it .
that wa a , a brief overview of what ar the sm tool .
and togeth with the other class , the demo class in which i went through the , interfac , and we actual analyz and transform some sound .
i hope you got an idea of what ar these tool and the kind of thing that we will learn in class .
so , thank you veri much and i see you next class .
welcom everyon , to the cours on audio signal process for music applic .
thi is an introductori class to audio signal process .
in thi lectur , we will introduc the concept of audio signal process and then go over some common music applic of signal process .
in particular , we will mention storag , data compress , effect and transform , synthesi , and descript .
thi should give you a flavor of the potenti of the field .
we first have to defin the term .
so , how do we defin audio signal process ?
and we could sai in in simpl term , that it's an engin field , that focus on the comput method for intention , alter a sound .
in thi block diagram we see a waveform , a sound .
go through an audio signal process system .
that is control with some devic , or with , by a person .
and then it gener anoth signal , a modifi version of the origin signal that can be a waveform or it can be , ani other type of signal .
sinc audio signal , sound , mayb be electron repres either in digit or analogu format .
signal process mai occur in either the main .
analogu processor oper directli on the electr signal .
while digit processor oper mathemat on the binari represent of that signal .
an analogu sound , is usual electr .
a voltag level repres air pressur of the wave form .
it's a continu function , like the on shown on the top plot .
on the other hand , a digit represent , express the pressur wave form as binari number .
thu , as a discret function , like the on shown , in thi bottom plot .
the digit represent permit the us of microprocessor and comput .
and although the convers from analogu to digit can be prone to loss , most modern audio system , us thi approach .
becaus the techniqu of digit signal process , ar much more power and effici that the on base on analog techniqu .
now let's start go through some common applic , of the audio signal process techniqu .
on such applic , is the storag of sound .
and as the record and reproduct .
the digit represent of sound wave , such as spoken voic , environment sound or music , can be record as electr or mechan inscript in the media and can then be recreat from these inscript .
so the well known cd shown in thi pictur is a media , that store digit represent of of sound , as a mechan inscript on the media .
and therefor from it , we can reproduc the , the sound that wa record .
anoth signal process applic is data compress .
or also call , audio code .
the goal here is to reduc the bandwidth requir of the digit audio stream , and the storag size of audio file .
there ar two type of compress techniqu .
the on call lossless , with which you do not lose ani inform , and the on that we call lossi .
some inform is lost , but hopefulli , the inform lost is not perceptu relev .
so , in thi in thi diagram , we see a digit represent of a , of a sound which is a wav file format that then can be code , us for exampl a perceptu coder .
and convert it into a much smaller , more compact represent like the mp3 file which ar us thi lossi represent , thi lossi , code that we just mention .
a number of the basic techniqu that we will cover , ar veri much behind audio compress system .
a larg group of applic relat to perform sound transform .
these type of applic ar us in post product and in music creat usag .
for exampl in these two plot , what we ar see , is two typic transform .
thei come for a softwar audac that we'll be us in class .
the on , the , the first on is a compressor .
so what it doe it that it reduc the rang , the dynam rang by compress some some frequenc or some compon of the signal .
and that's veri much us to optim the , dynam rang of the digit domain .
and the other is reverber .
which is veri common to effect that is appli to sound that might be record in a studio or in a dry environ , and then , we want to recreat the big space , or a space in which the sound wa produc .
but there ar mani , other type of transform that we could talk about .
for exampl , we can talk about echo , equal , flanger , phaser , choru pitch shift , time stretch , voic effect , 3d audio effect , morph , and mani more .
and again , we will be do some of thi in thi cours .
and we will explain some specif techniqu .
on of the tradit us of signal process , is relat to sound synthesi .
that's with the aim to gener sound .
either , by imit exist sound or for creat new timber .
so here we show three block diagram of three commonli us synthesi approach .
on is subtract synthesi , in which we start from a rich complex sound , and us filter we extract or take out compon to obtain some interest sound .
anoth type of algorithm , is the fm synthesi which is base on , modul on oscil by anoth .
and final we have the diagram of addit synthesi , which is a techniqu that is base on ad , basic oscil , basic signal , typic sine wave .
and therefor , we could us or recreat , a complex sound from basic compon .
and there ar mani other common other common techniqu could be granular synthesi , physic model , wave shape .
sampl , spectral synthesi , these ar , techniqu that ar us either commerci or in in academ experiment situat quit a bit .
we will develop and us some of these techniqu , in our cours .
especi addit and subtract synthesi .
the last group of applic , that i want to mention , ar relat to sound descript .
techniqu for analyz audio signal , with the goal to describ and model meaning characterist of the sound .
thi is a topic , that ha expand enorm in the last few year .
and it is veri relev in the field of inform retriev .
here we see a block diagram , of an algorithm that is abl to extract the kei , what we also call like the chord of a music signal , from an audio signal , go through differ step .
we ar abl to identifi if it's a c major fragment , or a minor , or some other kei that the piec of music might have .
and these type of descript can be group into , differ level , of abstract .
so we can talk about the low level type of descriptor , that relat veri much to the signal and we can mention loud , timber , or pitch .
or you can talk about more music level type of descript and talk about the rhythm , the harmoni , or the melodi of a given audio fragment .
and final , we can talk about high level type of descript .
and and refer to like the genr of a piec of music , or the emot that a piec of music might carri .
or the idea of how similar a piec of music is to anoth on .
the automat descript of sound , will be an import applic of the topic cover in thi cours .
we'll not be abl to go over the extract of mid and high level featur of a signal .
but the discuss that we will have on the analysi of low level featur , at the , ar at the basi of the gener topic of sound and music descript .
and thi is all for , applic .
so a good overview for what i just mention , is the wikipedia entri on , audio signal process .
all the softwar that'll we be us in class is open sourc .
like the program audac , that i refer to .
and that i have the link here .
and all the slide and code that i am go to be us ar releas and their cc attribut noncommerci share alik .
so it's open licens type type model .
and the code that i will be us is also releas under gpl , the affero gpl licens .
you can get all the slide and all the code we'll be us from thi websit .
and these ar for the lectur .
i tri to give you a brief overview of what audio signal process is .
give exampl of some applic area .
hopefulli , thi ha motiv you to continu in the cours and that is worth the effort that you will have to dedic to it .
so , i'll see you next class .
thank you .
welcom again to the cours in audio signal process for music applic .
in the previou theori lectur i gave an overview of the feel of audio signal process as an introduct and motiv to the cours .
now i want to outlin the specif topic that we will present in the cours .
which even though cover a tini part of the audio signal process field .
thei're veri relev to understand mani concept and method us in audio signal process system .
especi the on for music applic .
as introduct to the cours thi week we have given a context of the audio signal process field .
given an outlin of the cours .
and we will go over in the next class , over the basic mathemat that ar requir to follow the cours .
then next week we will start by introduc the discret fourier transform .
thi transform is the basi for everyth we will do .
and , we will try to understand everi compon of it .
so we'll go through the dft equat , then we will go through complex exponenti , the scalar product in the dft , the dft of complex sinusoid , the dft of real sinusoid .
and we'll finish with the invers dft .
so to reconstruct the origin signal .
then in in week three , in order to better understand the dft , we will go over the basic theorem and properti of the fourier transform .
and these ar the concept of linear .
shift , symmetri and convolut .
then we'll talk about energi conserv and decibel .
the concept of phase unwrap and zero pad .
the us of the fast fourier transform .
which is the algorithm that we will be us to implement the dft .
and then the fft togeth with the concept of zero phase window .
and final we'll put it togeth into an analysi synthesi system .
so then on week four , we will go to the short time fourier transform , which is the first version of the fourier transform that can be us in real sound .
those ar some signal that chang in time .
we will present the first complet analysi synthesi system of the cours that is of some practic us .
so we'll start with the stft equat , then talk about the analysi window , then about the fft size and hop size .
and the veri common concept which is the time frequenc compromis , which is fundament to understand , the short time fourier transform .
and final , we will discuss the concept of the invers short time fourier transform .
so with that we can , put togeth an analysi synthesi system .
then , on week five we will go a step further and we will be build on top of the short time fourier transform .
what we will call , the sinusoid model .
we'll present the , the equat of the sinusoid model .
then we will introduc the concept of what ar sinusoid seen from the frequenc domain , seen from the spectrum .
and then we will talk about how we will actual find those sinusoid , and the concept is go to be the , the idea of spectral peak .
and then we'll talk about how to , to analyz , identifi thi sinusoid in , as as time vari sinewav in the spectrogram , in a time vari spectrum .
and final again , we'll talk about synthesi .
so again , build up an analysi synthesi system , base on thi concept of sinusoid model .
then the next week on week six .
we will be assum that sound is harmon .
and then if we do that assumpt , we can develop much more power model , what we will call the harmon model .
which is a sinusoid model , in which we add the constrain that all the sinusoid ar multipl of a fundament frequenc .
so we'll introduc the harmon model equat , then we'll talk about three concept that mani time we confus , which is the concept of sinusoid , the concept of partial and the concept of harmon .
then we will introduc the concept on monophon and polyphon signal .
becaus the analysi techniqu we will be us ar quit distinct if we appli them to monophon or polyphon signal .
and final we'll talk about how to detect the harmon .
to do that , we will complement thi discuss with idea of fundament frequenc detect .
a harmon sound is on that ha a fundament frequenc .
so we need to understand these and be abl to implement techniqu to analyz the fundament frequenc .
then on week seven we will add some more complex .
becaus mani sound cannot be well model with sinusoid or with harmon .
so we need to worri about the part of sound , attack , non linerar , nois .
that ar not well model with sinusoid .
and for thi , we introduc the idea of model sound , with sinusoid plu residu .
and in that concept , we need to introduc the concept of stochast model .
so how signal can be model us thi , thi concept of stochast signal .
then we will actual talk about how to approxim sound with these stochast model .
and then we will introduc the , thi model of sinusoid or harmon plu residu .
so , the signal that is left that is not model well with sinusoid and harmon .
so therefor we'll , we'll need to talk about subtract these residu , obtain these residu .
and then these residu , hopefulli in mani situat , can be a stochast signal .
and therefor then we can present these sinusoid or harmon plu a stochast model .
therefor for that will need to introduc the , the concept of how to model the residu with thi concept of stochast signal .
so in thi thi will be quit dens lectur , becaus we will be talk quit a bit about veri differ .
model and that complement each other , and that can be a littl bit complex from thi end of the first approxim .
okai , and then basic that's go to be all the model we will be talk about .
i mean the , rest of the , class , the , the next three class , we will basic talk about applic and more kind of advanc topic .
so , as i mention in thi cours we focu on two type of applic , on is sound transform .
so in thi week eight , we will go over the model that we have present .
and show the type of transform that ar possibl to do with them .
so for exampl , we will talk about the short time fourier transform , and what can we do in term of transform .
so , specif filter or morph .
then we will go over the sinusoid model , and what type of transform .
basic focus on time and frequenc scale .
then , on the harmon plu residu model .
we will focu on the idea of pitch transposit .
and final on the most elabor model that we will have introduc , which is the harmon plu stochast model , we will talk about time stretch and morph .
then on week nine we will talk about the second major applic we would like to focu on in thi class .
which is the idea of sound descript .
so , with with what we have present we can extract featur of a sound in a wai that ar relev to describ it .
so we'll first focu on the idea of audio featur that can be obtain from thi spectral analysi that we have talk about .
and then we will talk about how to us these type of techniqu to describ more complex music or signal and concept of like a whole collect of sound .
how do we handl the analysi of not just on sound , but a collect of sound ?
of class on the tenth week .
we will review all the model and outlin relat topic that we have not been abl to cover in class .
we will present other fourier base sound model and we'll also present other model that ar not fourier base , again so we'll review the class .
and then go beyond thi signal process for music applic .
thing that we have been talk .
that's all in term of refer .
as in everi class all the content is avail onlin and with open licens so .
feel free to review all the content and have access to everyth i have been mention .
so thi is all for thi lectur we have done a quick outlin of the cours , go over the theori topic that we will cover .
so from now on we ar realli start go into signal process .
so , thank you for attent and i'll see you next class .
welcom again to the cours on audio signal process for music applic .
in thi class , i want to highlight the basic mathemat concept that ar requir to understand what we will cover in the cours .
i will not explain them in depth .
so , if you have not seen them befor or , you have alreadi forgotten .
i strongli encourag you to go over them by yourself as soon as possibl .
in the context of thi cours , sound ar discret signal , and the process that we will develop ar discret system .
thu we will requir some background on discret mathemat .
the good new , is that , no cow clue is requir to follow these cours .
you just have to know a littl bit about sinusoid function , complex number , euler's formula , complex sinusoid , scalar product of sequenc , even and odd function and convolut .
that's not that much .
you realli don't need much more than these .
the rest we'll cover and explain in the cours .
so let me now present these concept , so you can identifi what you should review befor realli start into our core topic .
our first basic concept , is the sinewav .
a sinusoid function or sinewav is a mathemat curv , that describ a smooth repetit oscil .
it occur often , in physic , engin and mani other field .
here we see the equat of a sinewav .
x of n , which is our function .
is equal to capit a time the cosin of omega n capit t plu phi .
so , where a is the amplitud of the sinewav .
omega is the angular frequenc , so it's express in radian .
and then nt is basic our time , n is our time index and capit t is our sampl period .
so we , we multipli n by capit t , we obtain the t in second .
and then the phi is the initi phase , also express in radian .
and the frequenc can be express also in hertz .
so to convert the omega into hertz , we basic have to divid by <num> pi  .
so omega divid by <num> pi  is equal to the frequenc in hertz .
okai , the most common visual represent of a sine wave is thi on .
so you see here a plot , in which we can see the time in the horizont axi .
and the amplitud in the vertic axi .
so , we can plai it .
so thi is the sound of thi sinusoid , thi is the code that gener the sinewav .
all our exampl and and plot will be gener us python , and all the assign and exercis too .
so thi is a veri simplifi code for the sinewav in which we see the amplitud which wa <num> .
the frequenc , which is <num> , <num> hertz .
so the frequenc we heard is <num> , <num> hertz .
then , there is an initi phi , which is the initi phase at time <num> .
at which time <num> is right in the middl .
and then in order to gener the function , we need to gener a time arrai , which is all the time that we will be displai .
so , a small t is an arrai that goe from minu <num> . <num> second to <num> . <num> second but of cours sampl at the sampl rate at fs and thi is the equat that we actual type into python to gener the sinewav .
okai , so anoth need basic concept is the on of complex number , which ar number that ar built of two part .
on part is what we call real part , and the other is the imaginari part .
so a would be the real part , and b would be the imaginari part .
in order to , to repres imaginari part , we multipli by j , which is the imaginari unit .
is the squar root of minu <num> .
so jb compos the imaginari part .
and then these number , these complex number ar normal repres in what we call the complex plane .
shown here .
in which the real part is the horizont axi , so it's plot on the horizont axi .
and the imaginari part , the b valu , is plot in the vertic axi .
and then we normal have thi circl , which is magnitud on .
so thi is what we call the unit circl .
and here ar all the complex number that have magnitud <num> .
a complex number can be express in two wai , in what we call rectangular form or in polar form .
the rectangular form is the most direct form , in which we explicitli express the a valu , the real part , and b , the imaginari valu .
and therefor the intersect of these two valu in the complex plane with thi cross , is the actual complex number .
in polar form , what we do is we consid thi complex number , thi cross , as the tip of the vector with origin at <num> , <num> .
therefor as a vector it ha a magnitud which is capit a .
that can be comput from a and b , as the squar root of the sum of the squar .
and then it also ha an angl , and also can be comput from a and b by comput the invers tangent of b over a .
the polar form represent make the sum and multipl oper of complex number more intuit .
for us , that will be a great advantag .
and we will us the polar form represent of complex number and function whenev possibl .
now let's combin sine and complex number .
euler's equat establish a veri us relationship between rectangular and polar co ordin of a complex number .
so the number e to the j phi , which is a complex exponenti , can be express as the sum of a cosin plu a sine .
a real part , cosin phi , plu an imaginari part , j sine phi .
and we can go back and forth in the two direct .
so we can start from , from the complex exponenti and obtain the , the real part , cosin phi .
or the imaginari part , sin phi , and the other wai around .
it's a nice look formula , and in fact the physicist richard feynman .
call thi equat the , the most remark formula in , in mathemat .
if we show thi in the , in the complex plane , in thi diagram that we show here , we can see these compon that we mention .
so we see the complex valu as the e to the j phi .
which seem , ha magnitud <num> , is in the unit circl .
and we can see the , the real part and the imaginari part .
on be the real part , cosin phi .
and the imaginari part be sine phi .
so thi formula will be fundament to understand the , discret fourier transform , we will come back to it later .
now by us sinusoid , complex number , and what we just have seen , the euler's formula , we can introduc complex sinusoid .
so in , in thi case the function x of n , with a bar is a complex sinusoid .
so it can be express with thi complex exponenti that we just introduc .
and there ar sever wai to repres the same function us thi eular's ident .
so pleas go through thi equat and make sure that you understand it .
we'll normal be work with real signal .
that's real sinusoid .
and we'll have to go from complex sinusoid , the on that fourier transform work with , to real sinusoid .
so in here , we see the equat of a real sinusoid .
that we saw befor .
so , capit a amplitud time the cosin of omega nt plu phi .
aco nt as can be express with the sum of complex sinewav , okai ?
so , complex sinewav , if we sum two of them .
can gener a real sinewav .
in fact that seem too complic and not so intuit but it's a , it's a veri us mathemat trick that fourier us , that in the fourier transform we need to be abl to understand .
so that basic sai that sum two complex sinewav , we can cancel the imaginari compon of the sinusoid and keep the real part , which is what we ar normal go to be interest in .
to plot the complex sinewav is not easi .
we would need to , to show it in 3d space .
and a common altern is to plot the real and imaginari compon as two separ function .
so in here , we see the real and imaginari sinusoid .
so the , in blue is the real part , so it's a cosin .
and in green , is the imaginari part , so is a sine function .
and that's how we're go to be plot these complex sinewav .
anoth concept to be familiar with is , the scalar or dot product , a common algebra oper between sequenc .
thi is an oper that take two equal length sequenc of number .
and return a singl valu .
thi oper can be defin either geometr or algebra .
and , algebra , it's the sum of the product of the correspond entri of the two sequenc of number , as is shown here .
so we have the sequenc x , sequenc y .
and we just sum over the sampl to sampl product of each of these sequenc .
and we can show it in an exampl .
so we have an exampl x of n simpl sequenc , and y of n , anoth simpl sequenc , complex sequenc .
their dot product will be the point to point multipl of these two sequenc .
howev , the second sequenc is conjug .
so we see here the minu j of the second sequenc becaus we we conjug the j of the second sequenc .
and then if we do the whole oper , we obtain a number .
so the scalar product mean that we return a singl number after do the oper with two sequenc .
an import properti of the scalar product is that when two sequenc ar orthogon .
their scalar product is equal to <num> .
so here we see thi concept .
x is orthogon to y , if and onli if the scalar product of x time y is equal to <num> .
so geometr the dot product can be understood as the project of on sequenc into anoth , and mayb thi diagram we can see thi concept .
so we have two sequenc , veri short sequenc .
on is compos of the valu <num> and <num> , and the other is compos of the valu <num> and minu <num> , which in the two dimension space ar orthogon .
i mean , we see them on be perpendicular to the other .
so , and we can prove that .
by do the dot product of x time y and so if we do thi oper as shown here , we can prove that is equal to <num> .
so the dot product of these two sequenc is <num> .
and thi is a basic oper that is perform by the discret fourier transform .
anoth mathemat concept , that will appear in our signal analysi oper , is the on of even and odd function .
so function is even if the neg part of the function , so you would sai f of minu n .
is equal to f of n .
so , that is what we call a symmetr function .
an odd function is when f of minu n is equal to the minu f of n .
and thi is what we call , an antisymmetr signal .
so the case of the two function that we have been talk about , cosin and sine , veri much exemplifi these two type of of properti .
a cosin is an even function becaus it's symmetr around the origin , about the point <num> .
and the sine is an odd function , becaus is antisymmetr .
around <num> , we have thi antisymmetri , okai ?
so thi is go to be also relev in some of the thing we will be talk about .
the last concept we want to mention is on of convolut of sequenc .
thi is a mathemat oper of two sequenc , produc a third sequenc that can be view as a modifi version of on of the origin sequenc .
here we see , the equat of convolut .
i don't have time to go into detail , but pleas try to understand it .
and also we can see it graphic if we have these two sequenc x sub <num> x sub <num> that have differ shape , the result sequenc the , the convolv result , is a much smoother function .
and it's a quit kind of a combin of these two sequenc .
so convolut is , is similar to cross correl .
it's a common oper us to implement filter of sound .
and it's also us to understand sever of the properti of the fourier transform .
so the concept i highlight in thi lectur ar extens cover in mani text book .
most of the refer i us come from wikipedia and from the websit of juliu smith .
on the mathemat of discret fourier transform refer that i veri much recommend that you go through .
so if you want to have more inform in wikipedia , i have highlight some of the relev entri and the , the websit of juliu for the book .
and again the standard attribut of all the content that i am us in thi cours .
and thi all for thi lectur .
we have identifi the basic mathemat concept that will be veri much need throughout the cours .
pleas make sure that you get a grasp of them befor we start fourier topic .
thank for your attent .
welcom to the cours .
on audio signal process for music applic .
in thi demonstr class , the first class of demonstr , we will introduc audac .
which is an audio softwar , that is avail under all the common platform .
it's free .
it's avail under an open licens , a gnu open licens .
and it had been maintain and is support by a group of volunt that ar do a great job .
so , it's a great tool , that we will us in class and and i recommend you to get a grasp of it .
it it's us for quit a few thing relat to audio edit .
we will focu on on the few of the thing that that we need , veri simpl visual and edit .
let's first go to browser and find it .
okai if you type audac in googl , the first link will be thi sourceforg page in which you can get quit a bit of inform about it .
document , how to get involv , and the download page .
you can go directli to download it , the last version of audac for differ platform .
in thi cours we ar us ubuntu so i recommend you to , to instal it for that platform , so it's a distribut of of linux .
i alreadi did that .
there is good inform in thi websit on how to download it and how to instal it .
so , let's go directli to the , the audac program .
thi is the , main interfac of audac .
that ha the common menu of sound editor .
typic what we want to do is open a sound file .
so we'll go to file , open and thi is the directori where i keep the sound that we'll be us in the in the the cours .
so , let's open thi piano dot wave file .
it ask me if i want to make a copi or us directli the the disk file .
i think it's good to , make a copi .
okai , and thi is the , the visual of the content of the file , the waveform .
thi file ha particular format .
and here we have the inform about that format .
it's a mono file , on channel .
the sampl rate is <num> , <num> and the bit depth is <num> bit float .
which is the format that audac us , intern .
so , even if the origin file wa , <num> bit , which is , the case for thi sound , it convert to , <num> bit flow to make the oper easier .
okai .
so , we can , navig a littl bit through thi file , and that it ha a common , sort of zoom featur and move around of the sound , so you can select a portion of these sound and you can plai thi fragment , okai .
we can also , of cours , sai if we don't have anyth select , and , we go back to the , begin , it will plai the whole sound file .
okai , and on import aspect of visual is the time .
we will be , select , choos , time , so , it's import to , get a veri accur read of time , here we have the horizont axi in second , and when we select a region , it we , we see clearli what time we ar select , but from below here .
we see a more accur read of the time .
we have sever option of how we displai time .
i recommend to us thi millisecond , displai .
so from here now we can see that , the origin of thi section is <num> millisecond .
and , the durat of thi section , becaus i specifi here to visual the length , is <num> millisecond .
okai , that's go to be quit us .
then anoth us visual is what we call the spectrogram .
okai so , in , in here we can , click the spectrogram .
and we can make it a littl bigger .
and , thi is the spectrogram of the piano sound .
that ha been comput , from the sound .
and now we can see the same the whole piano sound .
and again we can do select , plai .
becaus thi is just a visual of the sound .
and we can see the harmon and where the begin of the note ar , so it's a quit a , i believ , much easier wai to visual some aspect of the sound .
there is some , paramet that can be , chosen to to control the , these analys and visual , so if we go to edit prefer , and we go to the spectrogram section .
we have , differ paramet that we will talk about in class how to us , and how to understand .
so for exampl , the window size , let's just , for exampl , just chang it now .
and i just chang the maximum frequenc to visual so for exampl <num> .
and now we see anoth visual of the spectrogram , have a chang of paramet , okai .
so let's go back to the , standard waveform .
and then let's also talk about what transform thi softwar can do .
so under effect there is a whole bunch of transform that we can appli and we can includ mani more becaus thi support an open plugin platform .
that other develop , have been develop , for and therefor , on the websit , you can , you can us other other plugin , to extend to thi collect of effect .
for exampl , just us , a simpl transform , the equal which is a common transform that might be of us to the kind of thing we'll be do .
so for exampl , if we appli thi ha differ curv which refer to differ wai to equal the sound .
for exampl , let's us , like , telephon , which basic mean that it filter the sound as it wa go through a telephon , so it will attenu the low frequenc and the high frequenc , frequenc that do not go through telephon line .
okai , so when we appli that , then , the sound is modifi in the time domain we don't see much , but if we go to the frequenc domain to the spectrogram .
we see that the high frequenc have been clearli attenu .
for the low frequenc , we don't see becaus there is not enough room , but if we had chosen in the prefer to visual instead of the first <num> , <num> hertz , let's sai , to visual the first <num> , <num> hertz .
then , we will see that in the lower frequenc also the , the frequenc have been attenu , .
okai and that's basic what i want to mention of cours you can save the sound file , you can cut and past and do quit a lot of thing that i believ .
it's quit easi to to do and from the document it's quit easi to understand how to realli take advantag of all these function .
okai then let's go back to the slide and what we talk about todai wa audac , and you can go to their websit and and have all that inform from there there is a lot of veri interest document for it .
and for the piano sound , us you can get it from free sound and togeth with all these other sound that you will be us in class .
so that wa help todai , we introduc audac , a sound editor that is quit easi to us , quit practic and it's open .
so i recommend veri much that you download it , us it and , and try to do simpl edit that will be us for later on in the cours .
so , thank you veri much .
welcom back , to the cours on audio signal process for music applic .
in the previou demo class , we introduc audac , which wa a sound editor quit us to do a small edit and visual sound .
in thi class will introduc anoth sound tool , sonicvisu , which is quit complementari to audac .
it's more orient toward research and it ha a lot of capabl for analyz and visual advanc aspect of sound .
thi is a tool that wa develop at queen mari in london .
and it's avail under all the common platform and distribut with veri open licens , the gnu public licens .
so it's a veri good tool .
i recommend you veri much to instal it and us it .
and that will be quit us for for the class .
so let's first go to where to get it .
you type googl sonic visual it's , it will show the the page of sonicvisu . org .
and in it you'll find a lot of inform about it and project that have been us thi tool .
and also someth that we will talk a littl bit about it .
is the plugin system that it wa develop togeth .
the sonic visual , which is these vamp plugin .
mani peopl have develop analysi tool for sonic visual us thi plugin system , so we will be abl to have access to quit a bit , of algorithm and analysi tool for sound .
if you go to download page you can get it for all these common platform .
in thi class we us ubuntu so we download the ubuntu version .
i alreadi did that .
so let's go directli to the program .
thi is the main interfac of sonic visual .
and the first thing we , we do is open a sound file .
thi directori where i keep all the file , i will be us in class .
so for exampl let's , us thi speech femal sound .
okai ?
thi is the , the waveform you can of cours zoom in yeah , with these two wheel .
that's quit nice , and we can plai it .
thi is the v of vendetta .
okai the navig is quit good and quit power .
the , navig through the whole sound , so it allow us to , zoom in into particular part that we want to analyz .
a basic concept of sonic visual is the idea of pane and layer .
pane ar basic these window so thi is a , a pane in which we're displai the , the , the wave form .
let's , for exampl open anoth pane .
which is for exampl the spectrogram that we mention also with audac .
so in here , we're visual the pane of the spectrogram .
and here , the control of the analysi paramet is a littl bit easier .
so we have it right here on , on the right side .
so , for exampl we can increas the window size and then we can zoom quit more easili and , see the harmon of thi speech sound .
and also we see the silenc , and we see the area in which there is some conson like these more darker area in the waveform which correspond to these area here .
okai , so that's that's quit good for exampl we can close thi pane and now open anoth pane which is a veri us on , which is the spectrum , which is basic on slice of the spectrogram .
then so we move the , the waveform , the cursor in the waveform , the spectrum chang .
here by default the scale , the horizont scale , which is what is call the bin , is in lock scale you realli like better to us it in the linear scale .
so thi is the a linear scale of the , of the spectrum and normal you would like to zoom in or at least show the spectrum in a wai that it optim the whole rang , displai of rang so that would be a good wai to displai .
okai ?
thi is quit intuit and we can try to understand thing about the sound .
so for exampl here , be in a voic part of the sound , we see the peak of the the harmon .
we us the shade that we see here ar kind of the formant of the voic .
so that's quit nice .
and of cours we can chang the paramet quit easili .
let's go back to the pane of the spectrogram .
okai , and now we want to talk about the , the , the plugin system that it offer .
so in here , okai , we displai the spectrogram in a wai that might be quit appropri .
and now i i instal sever plugin but first let's go to that page of sonic visual and we can go to the , the plugin page .
thi here a descript of the plugin system of sonic visual .
and it explain how it work .
and in fact , how to develop for it .
and there is a link to a list of the plugin that have been develop with with the system .
and there is quit a lot .
there is quit a lot .
so i download a few .
so we would go back to the the sonic visual program .
and now here for exampl , in transform there is a list of all the plugin that i have instal .
and for exampl , let's us thi audio pitch detector .
and let's click at that and thi is the interfac for the analysi .
so , these ar plugin develop by paul and the plugin actual wa code by chri cannam and it us on algorithm , which is the yin algorithm .
it's a , it's a algorithm that we will talk about in class , for detect the fundament pitch of a sound , which is an implement us the fast fourier transform .
and thei just sai okai , okai so what thi doe is analyz the whole sound and displai the fundament frequenc .
and it's displai on top of the spectrogram , as a layer .
so thi is the other concept that i , i wa mention it .
so the layer ar wai to displai sever thing on top of the same pane .
so here we ar see , the , the spectrogram and on top of it a layer with the pitch curv that i have analyz .
so if we zoom we see clearli these green pitch curv and we will discuss thi in class but we can see that is identifi the first harmon of the sound and in some area that there is no harmon .
it realli , it's it get confus .
but in the , the voic part , in the part that ar harmon , it find it quit easili .
if we chang the , the window size of the spectrogram , bigger so we see the line more clearer .
then mayb thi becom more obviou .
and and we can see that the pitch analysi did a decent job in identifi the fundament frequenc of of thi speech sound .
okai , and that's all i want to mention for sonic visual .
let's go back to the slide .
so you can go to the sonic visual page to get inform about the program .
there is the plugin vamp plugin it ha a special page that you can access to it from the sonic visual page .
we mention about the yin pitch detect algorithm that we will cover later on and the , quit a few refer about it .
and the speech sound came up came from freesound .
and that's all for todai so we introduc anoth sound visual tool , that's go to be quit us for the more advanc and scientif visual that we'll talk about in class .
so , thank you veri much and i , i will see you in the next class .
welcom everyon back to the cours on audio signal process for music applic .
in the previou two demo lectur , we introduc two audio tool .
audac and sonic visual , which were quit us for visual , edit , analyz sound .
and in thi lectur i want you to us the , the tool that have been develop specif , for thi cours .
that have been develop us python .
that we will veri much go into detail , into all of the program class .
and a lot of the demo also will be us those tool .
let me first go to the page where these tool ar avail .
it's in a github repositori , we will talk about that , in the program lectur .
and it ha the same under directori mtg and sm tool in here i will be constantli updat the tool as as thing ar , ar be develop .
and as bug ar be fix , et cetera .
so , i recommend you to download and the latest version that you can find .
okai ?
and here you can download a zip file , and you can follow the instruct here to compil .
i don't think it's that difficult , and thei're open tool .
but anywai , in the program class , i will talk about thi in more detail .
thi is a tool that well set of tool , that do not have sort of an icon that i can click to .
so the wai to access the tool is through the termin .
thi is the termin , in ubuntu .
and when you open the termin , it goe to your home directori .
so thi is my home directori .
and i need i have a few directori that i have been us for thi class .
when i download the , the sm tool packag it creat thi directori , sm tool master .
so , to execut the , the exampl .
i have to go into that directori , so , i just type sm .
by the wai a veri good kei to us , is the tab kei , which is the auto complet .
it allow us to go quit quickli through subdirectori or to complet the name of file .
okai ?
so thi is the directori of of the sm tool .
again , it ha some subdirectori .
it ha lectur it ha softwar .
it ha the sound that i have been us , and it ha a workspac directori which i recommend you to us as a place to work from .
but now i want to go to the interfac , for demonstr some of these tool .
and these ar within the softwar directori .
okai ?
in the softwar directori again there is subdirectori and that , the interfac i want to us ar the model's interfac .
okai ?
so i go to the , the model's interfac and in it there is quit a few file .
but there is a main interfac for all the file , and that's what is call model_gui . py , okai ?
so , we can execut thi file , and through that interfac , i will have access to all of them .
to execut python file , i can just type python .
and the name of the python file .
so , if i type model_gui . py , it will execut thi python file .
okai ?
so thi is an interfac , so it ha open up thi these small interfac .
and in it i have access to all the differ analysi and synthesi tool , that we will be talk about in class .
like for exampl , the dft , the stft , a sine model , harmon model , stochast model , sinusoid plu residu .
sinusoid plu stochast , harmon plu residu , and harmon plu stochast .
that's quit a lot .
but we will go through all of them in both demo and in the program lectur .
to give you an exampl of how these thing work , let's just go for exampl to the short time fourier transform .
thi is on of the first model that we will talk about .
and here we can input a file , by default that is alwai someth that make sens , but let's go to anoth file .
so , thi is the directori of my sound for exampl , i us thi orchestra sound .
and then , we can plai it from here .
okai , thi is a record of a chines orchestra plai a fragment .
and in here , we have a whole bunch of paramet that we'll be us to analyz the sound .
let just us the default paramet and click comput .
okai .
and thi is what it ha comput .
thi wa the origin file input sound x signal .
and then it ha analyz the spectrogram , like the on we ar see in audac and sonic visual .
but now , we have actual comput with our own program .
and , it ha a littl bit more control than in audac and sound visual .
we can see the magnitud of the spectrogram .
and also we can see the phase of the spectrogram , which , we'll talk about that .
and then , we can invers thi process , and we synthes the origin sound , output sound the y signal .
and in from the interfac , we can plai these output sound .
okai , so , that's basic the same .
so that mean that thi analysi synthesi ha work quit well in term of an ident system .
so that's good .
let's go to anoth of these model .
mayb the , the most , sophist on that we will do , which is call the harmon , plu stochast represent .
and again , let's mayb take anoth sound instead of thi sax phrase , let's take the short version , so it's go to be quicker .
okai ?
and let's plai it .
okai ?
thi is a sax phrase .
and again , we can analyz a whole rang of thing and defin mani paramet .
then we just comput it .
so thi is a model that is is more sophist in that for these , it take a littl bit more time .
and thi is the result , of thi analysi .
thi is the input sound , we just heard .
thi is the analysi represent we have comput , that show the harmon and what we call the stochast represent .
and thi is , the synthesi .
by look at it , it's quit similar to the origin .
let's just listen to that .
okai , so ye it is quit similar .
but in these analysi , what we have done is analyz two aspect of the sound .
on that we call sinusoid and let's hear that which basic captur most of the , of the compon of what is interest in the sound , but also ha .
a residu , which is model as a stochast signal , that we can also listen to .
okai ?
it's , it's quit soft , but if you pai attent , is there and is basic the , the breath part air part of the sound .
that is quit relev in , in mani sound .
okai , let's close thi interfac .
and let's go to anoth interfac that we also will be us .
and so we go back , by do thi , okai .
and now , we ar again in the main directori of the tool .
and if we go to the softwar , and instead of go to the model interfac , we go to the transform .
okai ?
so we go to the transform_interfac .
and these ar program algorithm , that what thei do is , transform the sound us the model that we just saw .
and again , it ha a whole bunch of of transform .
and that is on which is the main the main interfac , which is these transform gui .
okai .
so we can execut these file by type python and the name of thi file .
okai .
so in here , we have a number of specif to transform differ sound us the model we talk about .
so for exampl , we can do a morph with a short time fourier transform , we can do transform with the sine model , transform with the harmon model .
with the stochast model , the harmon plu the stochast .
and i do a morph with the harmon plu the stochast .
let's go to the , harmon plu the stochast that we had mention befor .
and let's instead of the sax phrase , let's just mayb take a shorter phrase , a sax phrase , but short .
okai , we can plai it .
and with the four paramet , let's analyz it .
okai thi is the origin sound .
thi is the analysi that we did so we see the harmon and the stochast compon and the , we synthes .
it look like what we did befor , so it look quit good .
and now let's go back to the interfac , and we can appli some transform , there is some valu here , but let's just eras these and let's put some sort of ident paramet .
so ident mean that there is no chang .
so frequenc is scale , there is time valu here , so at time zero we can put frequenc scale of on so that mean there is no scale .
and then , at time on , at the end we just put the same thing , so that mean no frequenc scale .
frequenc stretch we will do the same thing , so we'll do zero , on , on on .
and , time scale we're not go to do ani time scale , so time zero we will have time zero , and at time on , we have time on .
so , the time is normal .
so we can put ani valu , that mean that we can just work also from zero to on .
and in here in term of timbr preserv , let's put zero so it doesn't go anywher .
okai , so let's appli the transform .
and now we can listen to it .
okai , we haven't done anyth .
but now let's do some chang .
for exampl , what can we do ?
so let's transpos to an octav higher .
what that would mean ?
so it mean that would just put zero two , and on two .
okai ?
and now , if we plai that okai ?
and if we do timbr preserv so that mean it tri to maintain kind of the timbr .
it will sound a littl bit better .
okai ?
but we can do other thing .
for exampl , let's do a time frequenc stretch .
frequenc stretch can be , let's put thi back to what it wa .
it's kind of stretch the partial and then make them and not equal space .
so if we , start for exampl start from time zero , we stretch it a littl bit .
and at time on then , we stretch it quit a bit more .
okai ?
we start <num> . <num> and here <num> .
let's appli thi transform .
and here , you see that the , the harmon kind of go up and thei , thei , thei sort of get more separ as as the frequenc go higher and let's hear that .
okai ?
so we hear these kind of inharmon , in the higher frequenc .
of cours if we make a , a larger transform , a larger stretch you can have that much stronger effect .
and thi will be veri pronounc .
okai .
and we can put , go back to the no transform , in term of frequenc stretch .
and .
<num> and then let's do some time stretch so at zero , zero for exampl , let's do that <num> , we compress the sound .
so we we do much shorter so let's sai , <num> . <num> so it's go to be .
half of the durat and then at time on , we leav it the same .
so it's go to go faster at the begin and then , it will , in fact go slower toward then .
let's hear that .
okai , and we will plai it .
okai ?
so it ha gone faster at the veri begin , first half of the sound .
and then the second half of the sound , ha slow down .
okai , that's just veri brief exampl .
again we will talk quit a bit more about these program , these tool .
and hopefulli , we'll have fun try all these thing out .
and that wa it .
if you want to know more about these sm tool , of cours , follow the class .
we will go quit deep into that .
and you can go to thi directori for , for the actual code .
and again , all these sound , come from freesound .
so thi wa all .
so , in thi three demo lectur of thi first week , we have present the three tool , three applic .
audac , sonic visual , and our own tool .
hopefulli thi give you an overview of the type of tool that can be of us to manipul audio .
and hopefulli thi ha given you an interest in follow the cours and realli try to understand what is behind thi so in the demo lectur we will just make sort of a introduct to the tool .
and from a , from a veri practic applic that then , in the program class , and of cours in the theori lectur , we will go deepli in try to understand all of thi .
so that's all for todai , and i hope to see you in next class .
thank you .
welcom to the cours on audio signal process for music applic and to thi first program class .
in thi lectur we introduc python , which is a high level program languag that we'll us throughout the cours veri much , in a lot of the thing we will be program with and all the assign but thi is not a program cours .
we will be just do simpl program and there's no need to have an extens background in program but pleas try to make sure that you have some profici in python and on ubuntu so that you can do the assign and understand what we will be do .
first let's go to python page , thi python . org .
thi is the main page for python in which you will find a lot of tutori and inform about it .
in the case of ubuntu , python come instal with it .
so if you open a termin and type python , you will see that it show the version of python that is instal , in thi particular case <num> . <num> so thi is good .
and in fact you can alreadi start type and interact with python here .
there ar mani differ version of python , especi there is a newer version <num> point someth .
and in our particular case , we would like to us <num> .
a lot of the packag we need to us ar onli avail under <num> , so pleas make sure that you have version <num> point , someth instal on your ubuntu and that you're abl to execut it from the termin .
okai now , apart from the basic instal of python , we need to us sever packag , sever collect of function that ar go to be import for our cours .
in particular , in order to instal them we need to us the standard instal applic that ubuntu ha , which is call apt get .
but in order to instal we need to have super user permiss .
so we'll do sudo apt get and then .
we need to instal a whole bunch of packag .
in particular , we need to instal the basic develop tool then we will need to instal a ipython then we need to instal matploblib , we will need also to instal numpi , scipi , and pygam and final cython .
okai sinc we ar in super user we need to give the password .
okai and in my particular case i have alreadi instal all these packag so it doesn't need to instal anyth els .
okai , all these packag ar quit well known packag and you can find quit a bit of inform about them .
so for exampl ipython , which is a interact shell that we'll be us or numpi , which is the packag for do arrai process .
all our sound ar go to be arrai , so we will be us numpi to process these arrai often number .
we will be plot a lot of thing so matplotlib is go to be our packag for plot sound and all these analysi that we will be gener .
scipi is the packag for signal process and a lot of the function we will be us come from thi packag .
and then cython is a packag for be abl to interfac with c code there will be a number of function in our code that is written in c .
in order compil it , we will need to us cython .
and final we will be have some interfac in the program and we will be us pygam which is a packag for develop game that we will be us the interfac facil for that for us .
so anywai so all of these ar extens of python that will be necessari to have .
for our cours , so pleas make sure that you instal them and in the class we will talk about them a littl bit .
okai , so let's start .
so in order to start we will just us ipython , okai .
so we type ipython and it alreadi tell me the version of python again , that ipython us which is the same on .
the system instal which is <num> . <num> , that's good .
and in here it give me some shell , interact shell that i can start type command and i'll do oper , so for exampl we can do standard arithmet oper .
we can just declar variabl and oper with them and in order to deal with sound as i said , we need to deal with arrai .
in order to do that , we need to import the packag for our arrai oper , which wa numpi .
so we do import numpi and we normal will give it a name to refer to it , so we don't have to type everyth .
so we just , for exampl , import numpi as np and now we have all the function of numpi in there .
so we can now declar a variabl a , that is go to be an arrai .
so we can call the function of np call arrai .
and we just can creat an arrai of differ number .
for exampl like thi , okai .
and thi is the arrai a .
and if we type a , it displai thi arrai .
we can access element of thi arrai .
for exampl the third element or we can access all the element from the locat on to the third .
which is go to be the first and the on and two element .
and if we want to plot thi arrai , we need the matplotlib .
so we need to import , matplotlib but in particular we need to import the modul that doe two dimension plot which is pyplot .
okai .
and again we will us a name , a short name to refer to thi , for exampl plt .
okai and now we can plot , us the function plot of pyplot to displai the arrai a , thi gener a displai object .
and in order to show it we will need to type the show command .
okai and thi is the figur with the arrai valu that we had .
okai now let's continu on issu of program , if we want to write some more sophist program , what we will be do is us a text editor .
thi is the gedit text editor , which is the default editor of ubuntu .
and now in here we can type the command that python call that we need in the interact shell .
so for exampl we can start by import the numpi and call it np .
then we can have a variabl a that will an arrai of numpi arrai of let's sai , zero , on , two , three , four , five .
okai .
and now let's do some oper to these arrai .
for exampl let's have a new arrai , which will be the revers version of a .
and how will we do that ?
well , we have access to all the index of the arrai but we us the increment of minu on .
in thi wai , we will go read backward of arrai .
and then we can just print thi variabl b .
and now we can save it in our home directori .
let's call revers dot py and that will be file , a python script that we have save .
so now we ar here in the ipython .
we ar in the directori , the home directori and in thi home directori we see the file that we save revers . py and we can execut thi file , we do it by type run and type in revers .
okai and it return the print command .
so it return the arrai a but revers .
so it return b , which is the revers version .
okai so we can thi wai we can develop some more sophist program .
and we can execut them interact from ipython and we can go back and forth , that's go to be a veri power wai to develop interact , develop thing .
and that's all i want to sai so basic we have talk about python and i refer to the python . org websit for more inform about that , we have us ipython as our interact shell in which we can program and execut file from and final we had been us and talk about some packag that extend the potenti of the basic python .
particularli the numpi for process arrai .
scipi , which will be a packag veri much us for signal process oper , for tool , matplotlib which is us for plot thing and final anoth import on is pygam that will be us for our interact , our interfac and it ha a lot of potenti for sound process .
and that's all for todai , we have seen a veri basic introduct to python .
sorri .
so i hope that you have time by yourself to go more into these and look at some tutori and some further inform .
and that's all next class we will extend thi present and we'll start talk about specif how to deal with sound .
so , thank you veri much for your attent .
welcom to the cours on audio signal process for music applic .
in the last program class , we introduc python , which is a high level languag quit power and that's go to be veri us for us for all the , applic and for all the program , we will have to do .
in thi lectur i want to talk about how to us python to process sound .
how to , read sound file , process sound and then write sound file again .
so let's start , by go to termin and now start the , interact shell , that we'll be us , to program in python , which is ipython .
and now we have to , read a sound file , okai ?
to read a sound file , we need to us on packag , scipi , that ha thi function .
so , what we go to do is from scipi , and within scipi there is a modul call io , and within that there is on specif to handl wav file .
so from that part of thi packag , we go to import , the read function .
okai ?
so now , the read function is part of our system python .
and in fact , if we type help and the read function , it know about it and tell me what is the input and the output .
so as input , we go to input the name , of the file i want to have and then as return , what it return is the sampl rate and an arrai with the actual sampl of the sound .
okai , so what we're go to do is have fs as a variabl where to put the sampl rate , x as a variabl where to put , the sampl of the sound and then we're go to sai read , and we're go to put filenam here .
okai , in thi directori i am in , i have a file name call flutea4 . wav .
okai ?
so , i will read thi sound file into into memori .
okai ?
so now , fs ha the sampl rate <num> , <num> and x , is an arrai of integ .
thei ar <num> bit integ .
includ all the sampl .
here , of cours , it's not show everyth , just show the first three and the last three .
now we can start ask thing about thi sound .
for exampl , if we want to know the length of the , the arrai , we can just type x . size , and thi tell me that thi sound ha <num> , <num> sampl if we want to know , how mani second that is , we can divid the , the number of sampl into the sampl rate .
howev , these two number ar integ .
so , the result is an integ .
if we want to know , the durat in an exact wai .
what we go to do , is just convert on of the number , to a float point number , like the fs .
so that , now , it return a float point number .
so thi is , the durat of the sound , in second .
so , it's <num> . <num> second .
now we can plot the sound for exampl .
in order to plot it , we need to import the packag for plot , matplotlib .
so we will import matplotlib , and specif within that the pyplot modul .
and we go to give it as a name plt .
so now we can call the plot function within that modul and give it the arrai of sampl .
in order to show it , we go to have to call the show command .
okai , and thi is the sound the visual of the wave form , in the horizont axi it basic ha the sampl i read and then on the vertic axi it ha the valu of these sampl .
be in integ valu it it goe from <num> , <num> to <num> , <num> .
okai ?
but thi is not a nice wai to visual sound .
what we want to do , is to visual them in second , so the time actual should be in second .
how do we do that ?
okai ?
so , what we go to do , is we need to get some arrai .
and for do that , we need to import .
anoth packag , which is the numpi so import numpi as np and now we can give some us function for numpi , specif , we can creat a time axi , so we defin a time axi t .
that us a function of numpi call rang and rang , what it doe , is basic creat an arrai of the length that i put in as input .
go from zero to that valu .
and then if i divid by the sampl rate , thi will creat basic an arrai of second of the the size of the sound .
but , in second , okai ?
so that i have t .
and now if i plot the arrai t , with respect to x , now i have , and then of cours i have to show it .
i have a much nicer displai becaus , on the horizont axi i have time in second .
so i can go from zero to <num> .
and thi is the durat in second .
within that thi thi figur we can zoom into , into it and do quit a few thing .
for exampl , it ha thi option which is zoom to rectangl .
so we can , select a region of these .
and we can see the oscil of the sound .
in fact if we do it a littl more , we're go to see it and even more , we will see the individu period , the oscil of of the sound .
okai ?
so that's , quit good .
we didn't have to , actual call the function with these specif number .
so , within the figur we can alreadi navig through thi sound , okai ?
but also , we can select sampl with python command , by choos just the sampl from a given arrai .
so for exampl , if we want to have anoth arrai that is just on fragment of our input arrai , so we can sai okai , take just sampl for exampl , from <num> , <num> come from second on to , let's sai , <num> , <num> , so thi is go to be <num> sampl , that ar go to be store in y .
and now , of cours , we can , just if we plot thi y it will just show that thi <num> sampl .
okai , now we can start do oper for exampl , on thi new arrai .
and for exampl , we can just ask what is the , the maximum of these arrai , or there is thi function call max from numpi , that if we give it arrai y , it give us what is the maximum valu .
howev of cours we know that sound sort of oscil around zero .
so it ha posit and neg valu .
so in fact , instead of do that , what it make more sens is to just take the absolut valu of y .
so that it consid also the neg valu as valu to be consid .
so if we now type the maximum of the absolut valu of y , and it give us a differ number which basic that mean that thi wa a neg valu that of cours wa higher , in term of absolut valu than the posit valu .
and we can do thing like sum all the sampl of an arrai .
okai , so , thi is the sum of all of them .
of cours now it's neg becaus , again , it ha sum posit and neg .
if we do absolut valu it will be a complet differ valu .
okai , now that we know how to process sound , now what typic thing we will want to do , is to write the result or , or write thi new sound into a file .
so we need to get the , a function to write sound file .
so for , again from scipi so from scipi . io . wavfil , we ar go to import the write function , okai ?
and the write function , basic accept as input valu , a name of a file to write .
then we need to give it a sampl rate with , with the same as the input .
so fs , and now we can just put an arrai of number .
so for exampl thi new y arrai .
okai , and that's it we have creat a sound file .
then we type ls , it's go to be an test . wav file .
and from within ipython , we can plai these sound file .
by call unix or termin level program or function .
so specif , if we put the , the exclam mark , and we there is thi function in unix , thi program call plai .
and so we , thi call the , the unix program plai , and we can give it ani file that is in the directori .
so , we put the flute a4 . wav , it's plai thi flute sound , and it's , at the same time it's give me some inform about thi sound file .
okai , so that's all i want to sai so basic we have been talk about read and write sound file .
and there is thi packag wavfil within scipi , that allow it to do that .
and there is packag that allow us to process and to manipul these sound .
so with matplotlib , we can plot sound fragment of sound and with numbi , there is a whole bunch of function that allow us to , process thi sound , and that's all for thi class .
so we have alreadi introduc python , and now we have introduc some basic function to , to read write sound file .
and hopefulli with that , we can start do some interest thing but of cours we have to learn my more , much more .
so , i will see you next class .
thank you .
welcom again to the cours on audio signal process for music applic .
in thi lectur , i start with our most fundament topic , the discret fourier transform .
if you can follow and understand thi topic you should have no problem in follow the whole cours .
i divid the topic into two lectur , so thi is the , the first on .
we'll start with the discret fourier transform equat , and then explain the two basic compon of the equat .
what ar the complex exponenti and the scalar product ?
so thi is it .
thi is the most import equat to be shown in the whole cours , so pai attent .
in the equat you can see x of n , which is our input signal , our seri of sampl of a sound .
that is multipli by a complex exponenti .
that's a complex sinusoid .
and we multipli sampl by sampl .
so we have on sampl of our sound , and we multipli it by on sampl of the complex sinusoid .
and then we sum over , capit n , which is the number of sampl we comput .
and then as a result , we obtain capit x of k which is our spectrum .
okai and the , the index k refer to the frequenc index .
so we have capit n frequenc , their output which is the result of comput capit n sampl of the input .
okai , so n is our discret time index , k is our discret frequenc index , and then if we want to understand the , these frequenc as radian frequenc , we have to multipli k by <num> pi  and divid it by n , which is our expon in the complex exponenti .
and then if we want to convert these to frequenc in hertz , if we have the k index divid by capit n and we multipli by the sampl rate , we obtain the frequenc in hertz .
okai , so let's see an exampl , our x of n is thi top plot which is in thi case a seri of sampl of an obo sound and then when we comput the dft we obtain thi complex function capit x that can be express in polar coordin , can be express with a magnitud and a phase .
but let's first hear the sound .
okai .
so thi is the obo sound .
and the spectrum we can see the magnitud and the phase , and in the magnitud we can identifi the harmon of thi sound .
so these peak that we see basic reflect the harmon of thi obo sound , which is clearli a veri harmon sound .
and in the phase spectrum , we can see basic the phase , how these sinusoid ar place within the sort of the cycl length and with respect , in radian , with respect to the durat of these seri of sampl .
as we said , in the dft equat , the input signal x is multipli by a seri of complex exponenti , complex sine wave .
the sine wave ar the basi function on the dft , the compon that we will identifi and measur in the input signal .
on of these complex sine wave is s of k , in which we're us euler's ident , we can express it as a complex exponenti , e to the minor j2 pi  kn divid by capit n , and thi is equal to the cosin of the same valu minu j sine of thi same frequenc .
so the real and imaginari part of these complex exponenti .
if we have a dft of size n equal <num> , we will have n sampl in the input signal , and therefor in the sine wave , and will have four frequenc that's go to be also the output of the dft .
therefor , we'll have four sine wave of length four .
on will be at frequenc zero , if s sub zero , which will be basic the frequenc equal to zero and it will be all equal on .
then s sub on will be the frequenc on , and that will be on cycl of a complex sine wave .
s2 will be frequenc k equal two , and s sub three will be k equal three .
so , our signal of size n equal <num> will be project into these four sine wave , which each on be of size <num> .
if the signal ha size n equal <num> , we will need eight sine wave like these on .
so here we have the eight complex sine wave start with s sub <num> with these dc compon of be a constant .
s sub <num> , which will have thi on period of a sine and of a cosin , and we will keep increas the number of of period .
but , as you can see there is kind of some symmetri and the , the frequenc doesn't go up to eight period , but it realli goe back to the on period .
we'll talk about that .
these ar basic the eight complex sine wave that ar us when we take a dft of size <num> .
okai so , the dft equat can also be express by thi equat , which emphas the idea of a scalar product in which we ar do the scalar product of x of n , our input signal , by the n complex exponenti .
and we will put an exampl of we take again , size n equal <num> , and we take a signal of be these four sampl , <num> , minu <num> , <num> , minu <num> .
and we do the scalar product of the signal by everi on of the four sine wave that we had comput in the previou slide .
we will comput the dft result .
so when we do the scalar product of x by s sub zero , the result will be zero .
that will mean that thi particular signal ha no frequenc zero , is not present .
and then if we chang to s sub on , and we do the scalar product , we get the same result , zero .
which again mean that thi frequenc is not present in the , thi x signal .
but , when we chang to s sub <num> , and we do the scalar product , the result is <num> .
which mean that basic thi x signal is thi sinusoid , is complet present in thi sinusoid and we get the result of four which is the sum of all the sampl .
and then by s sub three again is equal to zero .
so that mean that we have comput the dft of x of n and we have obtain that is equal to <num> for k equal to <num> , and is equal to <num> for the rest .
mean that we have the presenc of the frequenc k equal to <num> .
let's do that with a bigger signal .
so , thi is an exampl of the scalar oper of a simpl signal that ha all on , it ha eight sampl .
the first four ar 1s and the last four ar minu 1s .
so thi would be like a rectangular kind of signal .
if we comput the dft or the scalar product between thi x signal and the eight complex sine wave that we had seen in the previou slide , the result will be thi on .
we will get the magnitud and the phase .
it's go to be a complex spectrum and we can displai it as polar coordin .
and here we can see that in thi signal there is , some frequenc present .
the frequenc k equal zero is not present .
the frequenc k equal on is veri much present , but it also present k equal three , and is also present k equal five and again , it's also present k equal seven .
and the phase mean how these , sine wave ar locat in sort of in the time locat .
so thi is the dft oper and basic thi is go to be the core of all the thing we're go to be do .
you can find , more inform on the dft on wikipedia and , of cours in the websit of , juliu smith .
and from now on , on all our lectur we will us some sound , so all will come from , freesound , and thei can be obtain from thi link .
and again the standard creativ common and gpl licens of the code that we'll be us .
so we have shown and explain the dft equat .
i hope you realiz that it is not such a complex thing .
but even if you feel it is complex it's us in audio signal process is huge .
so it is worth spend some time with it .
we will continu with the dft in the second part of thi lectur .
so thank you for your attent , and i see you next class .
welcom back to the cours on audio signal process for music applic .
we ar in the second week of the cours and thi is the second part of the lectur on the discret fourier transform .
in the first part , we focu on the basic equat of the dft .
so now let's continu .
we will briefli review the dft equat , and then we will talk about how the dft work when our input signal is a complex sinusoid , or when it's a real sinusoid .
and then we will talk about the invers dft .
so the dft can be understood as the project of a signal into a finit set of complex sine wave .
thu , it is abl to identifi how much of each of these sinusoid is present in the signal .
so from the equat , the concept of the inner project express thi idea .
that , the signal x of n when we project it on the complex sinusoid e to the minu j <num> pi  kn over capit n .
we ar basic measur the amount of the sinusoid signal .
if we show an exampl thi , thi violin sound so we ar take a fragment of thi sound .
okai , so we ar take capit n sampl of thi violin sound and we're project it .
into these complex sinusoid that we ar gener and the result is thi spectrum express in polar coordin , so we see the magnitud and the phase spectrum .
in the magnitud we see the amount of each of the sinusoid present .
in the , the signal , and in the phase we ar identifi the locat of these sinusoid with respect to time <num> .
so if we plan how to comput the dft of on singl complex sinusoid , we'll understand thi concept a littl bit better .
so , let's start from a , an input signal , x sub <num> , as which is defin as a complex sinusoid .
of length capit n .
and ha a given frequenc express by thi index , k sub <num> .
and what we go to do is , we go to substitut our input signal x , in our dft equat .
by thi complex sinusioid .
so therefor we have a product of two complex sinusoid .
we can sum the expon and we obtain a singl complex sinusoid .
with a more complex expon .
and thi in fact is the sum of a geometr seri , and therefor it ha a close form that can be express by thi equat .
and by basic inspect thi equat we can see that when k is not equal to k sub <num> .
that the denomin is not <num> .
and that the numer is <num> .
therefor all the , the output signal , x of k .
is equal to capit n when k is equal to k sub zero .
and is equal to <num> for the rest .
so what we're sai is that it ha a singl valu at k equal k sub zero and thi valu is n .
so let's see the plot of thi oper .
so thi is the dft of a complex sinusoid .
so on top we see thi complex sinusoid , that k is equal to <num> .
so basic mean that it ha seven period in the length of captic n in thi case we have defin capit n as <num> .
so there's seven period in the <num> sampl .
and of cours we see the cosin and the sine .
and when we comput the dft , again we see the magnitud and the phase .
the phase ar messi so let's not talk about that right now , let's just focu on the magnitud .
and here we see clearli .
the valu of <num> at on locat , which is at locat k equal <num> .
the rest of the valu ar <num> .
howev , thi is a veri special case in which the complex sinusoid is on of the basi function of the dft .
thi never happen when deal with real signal .
let's see a more realist exampl .
the dft of a complex sinusoid of ani frequenc .
let's start with a signal x of <num> .
in which is a complex exponenti but , the frequenc is not , on of the frequenc of the dft sinusoid , so the frequenc is express by f sub zero and it ha an initi phase .
and it ha the same durat , sai it ha the durat of capit n , but it doesn't have let's sai , a fix number of period in that durat .
so anywai , so let's put these sinusoid into the dft equat , and we again get the product of two complex exponenti , we can sum the expon except that the phase term of the sinusoid can be .
pull outsid , becaus it doe not depend on n .
and also be a geometr seri , we can have a close form .
but it's not so easi .
it's not as nice as the previou on .
it doesn't have fix valu that ar clearli identifi .
so let's see a plot of thi oper and how thi function look like .
thi show the displai of what is the dft of a complex sinusoid that doesn't have a discret frequenc .
it's not as nice as the previou case .
so in here we have taken k equal <num> .
so a frequenc that is not an integ valu .
and , capit n is <num> .
so here mean that we do not have an integ number of period within the <num> sampl .
in fact we have <num> period .
and when we comput the dft , the first thing that we notic is that the magnitud spectrum ha posit valu for all k .
of cours , there is on area that ha , a promin , and it's the area around <num> .
in fact , for k equal <num> and k equal <num> ha the same valu .
and for the rest of k , ha a much smaller valu .
the phase , let's not talk much about it here .
it's not that relev for thi , thi situat .
okai but even thi is not that real .
we do not encount complex sinusoid like these in our physic life .
so let's go a step further and comput the dft of a real sinusoid , not a complex on .
that's someth that is closer to the realiti of sound .
but it's a bit more messi .
so let's take a signal that is a real sinusoid with a frequenc that is an integ valu frequenc .
so by us the euler's ident that we talk about .
we can express thi cosin as the sum of two complex sinusoid .
and if we plug thi real sinusoid in the dft .
and then we express it as the sum as the two complex sinusoid , we basic can do the same oper that we did in the previou case , be the dft a linear function and we will talk about that , we basic can express the dft of thi sum of two complex sinusoid .
ask the sum of two dft of each sinusoid separ .
therefor , the result is basic two dft that would basic have seen on is of a frequenc of neg frequenc .
and the other is the dft of a frequenc of posit frequenc .
and with a given amplitud , each on .
so what the result basic we go through the logic that we did befor is that it's go to have an amplitud a sub zero over two for two frequenc locat .
for the frequenc locat of k sub <num> .
and for a frequenc locat of minu k sub <num> , and it will have <num> for the rest of k , and let's see plot for it .
okai .
so , thi show the output of calcul the dft of a real sinusoid , but .
we have complic it a littl bit more , and we have not express it for k equal to an integ valu but again , for a k be a float point valu , in thi case <num> .
so it would take the real signal , and take the dft of that , we will see that it ha two bound .
on around minu <num> and the other around <num> .
and again it ha possibl valu for all k .
okai howev still we do not find sinusoid like these in our daili life .
but we're get quit close .
some sound ar not that differ from real sinusoid like thi on .
so , on of the great properti of the dft is that it is invert .
which mean that we can get back the origin signal from it , spectrum .
so thi is the equat of the invers dft , in which our input signal now is a spectrum , is capit x of k .
and then , we do a similar oper like the dft .
we multipli by complex exponenti , but in thi case .
is not a , a neg , exponenti , is a posit exponenti .
becaus we're not take the conjug , so we're basic multipli thi spectrum by a complex exponenti and then we're sum over , all these result of , over all capit n exampl .
and then there is a normal factor that we includ , which is <num> over n .
so the main differ with the dft is that the complex exponenti ar not conjug .
so we have a posit expon and there is thi normal factor .
apart from that is basic the same .
but conceptu is veri differ .
basic what we're do here it's kind of a synthesi .
we ar regener the sinusoid .
we ar recomput the sinusoid that we identifi .
so let's put an exampl .
if we start from spectrum , like on we saw befor in which there wa on posit valu at k equal <num> .
so we start from a sequenc of four sampl .
and we obtain a posit valu at k equal <num> .
okai , so thi is a spectrum of a sequenc .
and now if we appli thi invers dft function , therefor we multipli each of these spectral sampl .
by the sampl of four sinusoid , four complex sinusoid of differ frequenc , we will see that the result is basic the signal we start with .
so thi is a complex signal .
the result that ha <num> , <num>j , minu <num> and minu <num>j .
so , thi is the invers fourier transform of thi spectrum .
and let's show an exampl .
so , for real signal , we do not need the complet spectrum .
in order to recov the origin signal .
we saw that it wa symmetr so it's enough to have half of the spectrum .
and typic , we us the posit side of the spectrum .
so , if we have , for exampl , in thi figur we have a given magnitud spectrum .
and , of cours we have a phase spectrum .
then we can do the invers of that , and we can comput it us these equat .
so we first have to gener the neg part of the spectrum , so the posit part will be the magnitud .
multipli by the complex exponenti to , the phase .
and the neg part is go to be the magnitud at the end multipli by the neg part of the phase .
okai , and then if we do the , invers dft , we appli that equat into thi whole sequenc , thi whole spectrum , x of k , we will get back a real sinusoid .
okai , so thi is , a sinusoid .
that ha the length of the spectrum we start from .
in thi case it's <num> sampl , the spectrum had <num> posit sampl and <num> neg sampl , and the invers fourier transform ha these <num> sampl of a real sinusoid .
okai .
so we'll come back to these concept in the next lectur , so , do not worri if you still ar not understand complet thi concept .
so again you find a lot of inform about the discret fourier transform in wikipedia .
and of cours on the websit of , juliu , and here you have all the standard , credit that we have in everi class .
in the first part of thi lectur , we introduc the dft equat , and in the second part , we have seen how the dft work when the input is a sinusoid .
we'll have also explain the invers dft .
if you have been abl to understand thi , you're do veri good .
you should have not problem with the rest .
so see you next lesson , thank you .
welcom back to the cours on audio signal process for music applic .
in thi second week of class we ar talk about the discret fourier transform and in thi demo , in thi lectur demo , i want to put that in practic by analyz a sound , in particular i want to analyz the sound of a tune fork .
a tune fork produc a veri clear tone , thi is why it's us to tune other instrument and it produc a veri clear frequenc .
so let's try that .
let's analyz it .
so we will open audac .
and , we will hit the record button and with the microphon we will record the tune fork okai , that should suffic .
here now let's delet the part of the record that ar not the tune fork .
let's hear it again ye , that's the tune fork .
mayb let's select the loudest part .
okai , and let's zoom in .
to check if if it's realli like a sinusoid we can zoom in to the end .
and ye , it look like a quit nice sinusoid look function .
when we present audac , we mention that we can visual the spectrogram .
which the spectrogram is basic a time vari dft .
so thi is the time vari dft of that sound i record , the tune fork , and clearli it show a veri strong line around in around <num> hertz which is basic the frequenc we ar hear , in fact thi tune fork , if if we look at the devic it sai that it produc <num> hertz .
so thi must be the <num> hertz frequenc .
howev we also see other horizont line , which mean that there's also other compon that ar present in thi sound .
so in order to analyz it a littl bit more deepli let's save the file , mayb befor that , let's clean it a littl bit more and let's make a fade in at the veri begin , and a fade out at the veri end .
that alwai help .
to be heard and to be analyz by other program and now let's export it .
thi is a sound that wa record at <num> , <num> and it's a mono file .
so thi will creat . wav file and we will save it under tune fork name , ok , there wa on there .
okai , and now we can go to the sm tool through the termin .
and it's in the softwar directori , model interfac , and if we type python model_gui we will start the interfac that includ all the model we will be us , and the first on is the dft .
so let's go get the sound that we record in the home directori and it wa the tune fork , okai , and now let's hear it okai , now let's , with the default paramet , let's analyz it .
yeah .
that's clearli a fragment of the input sound .
thi is the dft of that sound .
the magnitud and phase spectra and then we do the invers dft and we get thi shape .
that is also veri much , apart from thi move window that we have appli , it's veri much like the origin sound .
and here clearli we see a peak in the magnitud spectrum , and if we put the the cursor it show it is around <num> hertz .
but also we see other compon , shorter but that thei're also present .
mayb to check how a real sinusoid is analyz and how it look like in the dft , in the spectrum , let's open up a sinewav that ha been synthes .
so in here , in thi directori , i have a sinewav at <num> hertz .
okai okai , that's a sinewav at <num> hertz .
it clearli sound veri similar to the tune fork .
and now let's comput it .
ye , it's similar shape , but if we compar , in fact , the two spectrogram thei look a littl bit differ .
the on of the tune fork look clearli more noisi than the on of the electron sinusoid .
still the electron sinusoid doesn't look ideal but it clearli look with a veri clear peak and the rest look much softer than in the other sound , in the tune fork .
okai so with that we can analyz sound and of cours the can chang the size that we analyz .
so for exampl if we instead of <num> sampl , we take <num> , <num> sampl and we comput it .
now we ar take a bigger chunk to be analyz but basic the spectrum look a littl bit differ , becaus of cours we have more sampl , but the gener shape is the same .
and we can plai around with the paramet to visual differ paramet .
for exampl we can just instead of start at <num> second we can start a second <num> so a littl bit forward in the sound , and the sound look veri much the same , becaus of cours it's a pure sine wave and it's alwai the same .
sound .
and that's all i want to sai .
basic we have us audac to analyz the sound of a tune fork .
and then we have save the file and us the interfac avail on the sm tool packag , that we have develop , to analyz the dft and compar the result of the dft of thi tune fork with the on of pure electron sinewav .
okai .
thi sinewav , it's in freesound , so you can get it there .
and that's all for thi class .
hopefulli thi ha given you a practic view of what the dft can do with real sound and also try to understand what a sinusoid is and that's all .
i hope to see you next class .
bye bye .
welcom back to the cours on audio signal process for music applic .
in thi class , in thi demo class , i want to introduc freesound .
you alreadi might have notic that all the sound that i have been us and the sound that we will be us , come from thi websit , from freesound .
so , it's a great resourc for thi cours and i want you to understand it a littl bit more and to take advantag of it as much as possibl .
so freesound is a websit that wa start at the music technolog group , at the universitat pompeu fabra in barcelona , close to <num> year ago , but the truth is that it ha been maintain and support by a larg commun of peopl that believ in it , that love to plai around with sound , and that ar contribut and maintain thi websit .
so let's go to the websit , okai ?
so here is the websit .
and it's a websit that alreadi ha a huge number of sound .
current it ha more than <num> , <num> sound and there's a lot of activ around it , so there is more than <num> , <num> peopl everi dai , access , download sound , and contribut in some wai or anoth .
but anywai , let's start us it .
so typic what you do is , in the search menu , you will type the name of some sound .
so for exampl , let's type flute note .
okai , and thi return the sound that it ha found that includ these two name , either in the tag or in the descript .
it ha found <num> , <num> sound .
so let's go , mayb , to on of these sound .
okai , so thi is the sound of a flute , note b4 , and we can plai it .
okai , so typic all the sound entri includ a descript of the sound .
thi on is pretti good , so it ha a descript of how the sound wa record , and what it is , and then it ha some of the kei descript of the sound .
and also it ha tag .
thi is a veri us wai for other peopl to find thi sound , through differ concept that mai be relat to thi sound .
and here is ha all the technic inform about thi sound .
let's go back to the sound result that we found , and here we have mani other sound .
for exampl even sound that , of cours , that ar not a flute .
for exampl , thi , ocarina sound .
but , in the descript it mention that is a flute like sound .
if we plai it .
the ocarina ha a flute like sound .
but on wai to search for sound that is quit interest is through similar , which in fact what thi doe is analyz all the sound of freesound , it analyz the spectrum of all these sound and it look for other sound that might have a spectrum similar to thi on .
so thi ocarina sound ha a spectrum similar to thi on .
so for exampl , thi is a on second nose flute and ye it's sound veri similar to ocarina .
and if we plai all these other sound the distanc increas so thei would be less and less similar , but thei have a similar with thi sound .
so that's pretti good .
so let's go back to the main page and in here also you can also search for sound and inform through mani other wai .
if you go the sound page in here , you can brows through all the sound accord to , like , the tag and the pack , or for exampl , an interest brows possibl is what is call the geo tag .
so geo tag ar sound that have been identifi with a geo tag .
so sound that have been record in a particular locat in the world and that peopl have identifi the place where thi wa record .
so you can find , if we look in barcelona , of cours , there ar a lot of sound from our citi becaus we're veri activ there .
thi is barcelona .
there is <num> , <num> sound come from barcelona .
but there ar sound from all over the world , and you can navig through these sound thi wai .
so that's pretti good .
of cours onc you like on sound you can download it , so for exampl in the case of the sound of thi cours i label all the sound with a particular tag which wa , asp cours .
so if we look for a sound that ha the asp cours label , or tag , you will find them all here .
so in thi case here it ha all the sound that i have been upload for the cours .
so you can plai it of cours but if we want to download thi sound , we can just simpli click the download .
you have to be log in , which in my case i am alreadi log in .
so i can just download it , and it will save the file in the same format that the sound wa upload .
so that's pretti good .
but what i want to do now is to do the opposit , to upload a sound .
i think it's veri good for peopl to upload sound in thi class that might be of relev for the cours , or you might have a sound that might be interest to analyz , or you might have a sound that you have transform and that you want to share with other peopl .
so i encourag to upload sound and mayb put the same label , asp cours , so that other peopl can find your sound .
so let's think of a sound that we might want to upload that is not there , so for exampl , let's see if there ar mani sawtooth , synthesi sound of a sawtooth .
ok , there ar quit a few , but i don't see the standard kind of , straight sawtooth of high qualiti , here there is on which is veri weird becaus it's <num> bit .
okai so let's go to audac , and let's gener a tone us a sawtooth .
okai so let's select saw tooth , frequenc <num> hertz .
and let's put an amplitud of <num> .
and let's have five second of sawtooth .
okai , so thi is it .
let's hear it .
okai , so we will upload that .
let's mayb , to make it nicer let's add a fade in at the begin , a fade out at the end , okai .
and that's it .
now we can save the file , export it .
and in the directori , let's put sawtooth , and it's <num> hertz .
okai , so let's save it .
we have it .
now from the freesound websit , we can just click at the upload sound button .
and here upload and we'll have the sawtooth <num> hertz .
so that's ok .
it's alreadi done .
and now what is import is to describ the sound .
so it ha the option to describ the sound .
and here we click describ and we can specifi tag and descript of the sound .
so , for exampl , for descript we can sai okai , thi wa a sawtooth gener waveform , for exampl , of frequenc 440hz and of <num> second gener with audac .
okai .
let's put and <num> second .
okai .
and then in term of tag we might put , of cours the word sawtooth , we can us <num> hertz , <num> is a4 , so that's pretti good .
it is an electron sound , it's produc with a synthesi techniqu and let's put synth , it's quit a common word .
it's a waveform .
okai , that should work , so that's pretti good .
let's just well in the pack .
these ar the pack i have .
i have the synthesi pack , so mayb let's put it there .
and the licens , there is three type of licens i can us .
creativ common zero , that mean public domain , anyth can be done .
attribut , that mean peopl have to sai that it come from freesound , or restrict that it should not be us commerci .
so normal i like the attribut .
so i will put attribut .
and i will submit it .
and that's it .
it ha alreadi been upload .
and now there will be moder that will check if thi sound wa well describ , and it is not infring ani legal thing .
i didn't take it from ani other place .
and then it will come up in freesound .
okai .
that's basic what i want to sai so let's go back to here and okai .
so we have talk about freesound and a veri import concept that i want to emphas , and that you should be familiar with is all these licens issu .
creativ common is a great set of licens .
and for sound , thei ar veri much appropri and freesound us them veri well .
okai , then we have us audac to gener the sawtooth and we have refer to thi pack in within freesound where i keep all the sound for the cours .
and that's all so we have introduc freesound , hopefulli thi ha been of interest to you and i encourag you to take advantag of it , to us it , get sound from it .
but even more .
to upload sound , to put thing that you believ might be of interest .
might be interest to the commun .
and for thi cours you have the oportun to gener and record sound that might be of relev to freesound .
so anywai , thank you veri much and i hope to see you next class .
hello , welcom back to the cours on audio signal process for music applic .
we have been talk about sinusoid sinc the veri begin .
sinusoid ar at the core of what we'll be do in thi week , in the dft , sinusoid ar part of the dft .
and in order to understand the dft it's fundament to understand sinusoid .
so in thi class i want to teach how to program sinusoid , how to code sinusoid .
and in particular we will be plai around with two type of sinewav .
the real sinewav , which is a sequenc of number , of real number , that can be comput by call thi function .
so , it ha an amplitud , capit a , and we can call the function cosin with an argument , which is two pi  with a frequenc and the time index n , is the time index discret , and then the capit t , is the sampl period and then we have an initi phase .
and then we will also comput a complex sinewav .
the on that appear in the dft .
these ar complex sinewav that ar discret and thei do not have ani time inform , so with just an index n , and the frequenc is an integ valu , so these complex sinewav ar alwai period for a given capit n .
so we defin a capit n , it's go to be the size of the dft and then these complex sine alwai have a fix number of period within that n and thi depend on k , and that k is the number of period within that capit n .
so to write some code to implement these sinewav we need to open up a text editor , in thi case gedit .
and we can start type python command that then will be part of a file , will be a script that then we can execut us python .
so , we first need some packag and typic packag that we'll alwai need , on is the the librari for plot , matplotlib , particularli pyplot , we will call it plt .
and then we will alwai need numpi , and thi will be our packag for plai around with vector and arrai , and now we can start type code , so defin the sinusoid , the real sinusoid .
so the real sinusoid ha an amplitud , let's defin an amplitud of . <num> , it ha a frequenc , let's sai f0 , that in hertz , let's sai <num> hertz , and it ha an initi phase , phi , let's sai pi  over <num> , pi  is a variabl defin in the numpi packag , so that is why you put np . pi  .
and now we need the sampl rate becaus we need to comput the sampl period , we need to displai the real sinewav in time .
so our typic sampl rate will be <num> , <num> .
okai ?
now sinc we do vector oper for the time index , we will defin an arrai , and we will be us thi function arrang from numpi that allow us to defin a rang of valu and an increment and then automat it comput all the valu between these two limit .
so thi will be an arrai of float point number , go from minu <num> . <num> to <num> . <num> in increment of on over fs , or capit t , which is the sampl period .
and now we ar readi to comput our function .
so it will be amplitud a time cosin , and in the argument will be the two pi  , so two time np . pi  time the frequenc , time the time index , which is the t arrai , and then we need to sum the initi phase phi , and it will be our time function , our sinusoid , and in order to plot it , what we will do is to plot the time arrai with respect to the x valu , and a good practic is to defin , axi valu .
for exampl in thi case , the axi in the horizont axi goe from minu . <num> to . <num> and in the vertic axi it will go from minu <num> to <num> .
okai , thi will defin the axi , what we ar see in the plot .
and also it's good practic to label the axi .
so we need to label the x axi , so with an xlabel .
and xlabel will be time .
okai and then we need label also the y axi so with the ylabel and that will be amplitud .
okai , and that's it , the onli thing left is to call the show command , so that it will displai .
and hopefulli if i didn't type anyth wrong , it can be comput .
so we save it under name sine . py .
and you can go to the termin and here we have the sine . py file and we can execut it by type python and sine . py .
okai , it give me an error that sai that okai , i type a wrong the name of the packag , i have to type pyplot .
pyplot .
and now that i see also the cosin is wrong , the cosin is a function within numpi , so i have to put np . co .
so two bug alreadi .
let's execut it .
and now it's okai .
okai ?
we have .
a sinusoid .
we have the time in second , the horizont axi .
time zero is the middl , and the amplitud is in the vertic axi .
and so we have four period of thi sinewav .
okai , now let's go for the complex sinewav which is go to be a littl bit more complic .
the packag ar go to be the same .
so , let's type it here .
so , we might be abl to reus some of thi code .
so , the first thing we will need to do is to defin the variabl capit n , which is go to be our arrai length , or in the case of the dft , the size of the dft and let's sai it's <num> .
and the frequenc is go to be an integ , so let's sai k equal three .
and then in term of the index , the time index , is go to be integ valu .
is go to be , we can just easili just sai np . arang , and we can displai it from minu n over two , to n over two .
okai , that will be the time index that will be creat and now we ar readi to comput the complex sinewav .
so the complex exponenti is a function that exist in numpi , so we just sai np . exp and now in term of the argument , for j we just sai 1j , then is two pi  , two time np . pi  , then we multipli by k , we multipli by n , and we divid by capit n .
and that's our complex sinewav .
and in order to displai it .
well , we cannot displai the complex in a 2d represent , so what we will do is , we will displai n and against the real part of s , so in order to do that we will sai np . real and we will get thi , okai and thi will displai the real part of thi complex sinusoid .
and now , again , we might want to have some specif axi label , so the axi will go , in thi case , from minu n over two to n over two , in thi case minu on becaus zero is also on of the valu , and then in term of the vertic axi , you just sai from minu on to on , becaus it's normal to on .
okai , and then for the label the xlabel we will sai that is just the n index and for the ylabel , the same thing , we have the amplitud .
okai .
and that should do it .
the onli thing left is again the show command .
and that should do it .
so if i delet thi other part .
and i save it under the same name , so it's the sine .
hopefulli , if i don't have ani error , okai .
it displai the real part of the complex sinewav , which is a cosin , so at time zero is on .
and it ha exactli three period which is k , k is specifi three , which mean three period within thi capit n .
now if instead of the real part , we want to displai the imaginari part .
we can comput again and thi is the sine part .
so at time zero it's a sinewav , and it's three period of the sine function .
okai , so in the dft what we ar do is , for differ n , henc , so the n is the dft size , so for exampl let's chang the n , let's put <num> for exampl , and then k is on of the sinusoid of the dft .
so , for exampl , let's put the number five , so let's close these , and if we execut thi it will look a littl bit differ .
okai ?
so thi is much fewer sampl , it's onli <num> sampl .
and , there is five period of the , in thi case , the imaginari part of the sinewav .
but , of cours , we have few sampl per period , so that's why we see it so jag , but anywai thi is a comput sinewav , and is the kind of sinewav that we'll be us in the dft .
and that's basic all i want to sai , and so we have been , in thi class , we have been talk about sinewav , and we've been explain how to code them us python .
specif we need two packag , numpi , matplotlib , numpi is go to be a fundament packag for handl all these arrai that we'll be us , and matplotlib we'll alwai need it becaus we'll alwai be plot thing .
and that's all .
so thi wa the first program lectur , first lectur in thi second week .
so in the next program lectur we'll go into the dft so we will go into how to program the complet dft , sinusoid is on part .
now we'll put it togeth into program the dft .
so i hope to see you next lesson , thank you .
welcom back to the cours on audio signal process for music applic .
in thi week , we ar talk about the dft and in thi program lectur we're go to learn how to program it , how to implement the dft equat in python .
in particular , we're go to talk both about the dft equat , the direct version of the dft and the invers of dft .
in the dft we will basic , we'll be comput all the x of k , so we will be comput all the spectral valu present in a given signal x of n , so we'll iter over all k and comput thi sum .
and in the invers we'll be iter over all time , over all n , and for each n we'll be comput thi sum .
so let's start , let's go to text editor and we'll start by implement the dft .
so the first thing we need to do is to import numpi , that's our packag for arrai process .
now we have to initi our output arrai of spectral sampl .
so we will creat an empti arrai , capit x , and we'll be now iter over all frequenc sampl .
so , what we do is us the function rang that basic creat valu from zero to n minu on , so k now goe from zero to n minu on , and now we have to creat the complex exponenti at everi frequenc at everi k .
so we'll creat a complex exponenti , time <num> pi  , multipli by the frequenc we want and we need to divid by capit n , and then we need to creat for all n , so we will creat an arrai of time sampl , of index , that will go from <num> to n minu <num> , and that's a complex exponenti at frequenc k .
and now we can comput the output spectrum and we will do that by append to the exist spectrum , whatev it wa from the previou comput , and we will comput the sum of the input signal x , by multipli by the conjug , okai of our complex exponenti .
so thi is the inner product that we talk about in theori .
and that's it , that's our dft implement .
we can save it in a file let's call it dft . py .
and so thi is a script that will run that .
in order to see if it work , well we need to put an input signal , so let's , befor the code of the dft , let's start us a particular signal .
let's defin a signal of size n , that will be equal to <num> , and let's have a frequenc that could be , for exampl , seven , and now we can declar the time signal as let's sai a complex exponenti and we will have a complex exponenti that will be again 1j multipli by two time pi  .
mayb i left here also the numpi packag .
okai , <num> pi  , and then we multipli by our frequenc k0 , our frequenc index , we divid by n , and again we need to creat an arrai of valu , so that we can comput n valu of an input signal and that's it .
now we comput the dft and we just , in order to see if it did anyth , we just plot the result .
in order to plot , we need to import the matplotlib . pyplot , okai pyplot , and we will call it plt .
okai and now in the plot we will again do a time index be np . arang capit n , and the spectrum , it's a complex signal , so we'll just plot the absolut valu of it , and that should do it .
and then we will have some axi , so that thei will go from zero to n minu <num> , and the horizont axi will go from zero to n .
and that should do it .
now we just show it , and if we save it and we go to the termin , and we just type python dft . py .
okai , there is a problem , matplotlib . , and there is a typo here , at pyplot , okai , that's better , matplotlib .
oh , okai here anoth typo , import , eh , anoth typo , okai , i made anoth mistak here , minu on .
and okai , that's it so that's the dft of a complex signal and we see here that it's <num> at the locat of <num> and the rest is <num> .
so the the analysi ha proven that our input signal realli wa a complex sinusoid of valu <num> .
okai , now let's do it with real signal , so instead of have thi complex sinewav , let's go to a real signal .
so most of the code will be the same , so the onli thing we have to do is chang our input signal to be a cosin instead of be a complex exponenti which is the cosin and we don't have the j and that should work .
so thi is our complex , our real signal .
and we just save it , and we comput it again .
okai and now instead of have on peak it ha two .
so a real signal ha two complex exponenti result , is the sum of two complex exponenti and we can visual it here .
here the issu is that the axi ar not so intuit now , becaus it give <num> and then thi other valu which is not , it should be minu <num> .
so , a better wai to implement thi is instead of deal with time index and frequenc index go from zero to n minu on , it's good to go from minu n over <num> to n over <num> .
so , to do that what we'll be do is creat some arrai that will be quit us for differ thing .
it will be np . arang and thi will be go from minu n over <num> , to n over <num> .
okai , and these our time index and also we will have frequenc index that will be our k index .
so now instead of comput from from zero to n , we will be comput in the dft from minu n over <num> to n over <num> , so we iter over kv and in here again , we will be in our time index , we will be nv , and hopefulli that should work , and then of cours in the axi we will have as output axi , minu n over <num> , to n over two minu on .
and in here the plot again will be over kv .
okai so now , well there is anoth mistak here .
in here , i miss the over <num> , over <num> , okai ?
and now , okai , thi is better , so now we have center around <num> and we have the minu <num> frequenc and the <num> frequenc .
okai , what happen if we do not have an integ valu frequenc , instead of <num> we will have let's sai <num> , okai we save it , we run it and well , clearli is veri differ .
now , the project of our input signal into the complex sinusoid of the dft doe not return a singl valu , but is posit valu for all complex exponenti .
so that mean the project ha posit valu for all the spectrum .
okai , and we explain thi in the theori class .
okai now we can do the invers dft , the equat we also talk about and we show in the slide .
so now we will be implement the invers dft equat .
so we will need to go over all sampl of n and comput all these equat , so how do we do that ?
so it's quit similar to the dft , so what we'll be do is , onc we get the dft analysi out , we will now creat the invers dft code .
so we'll first again , initi the output signal y , with an arrai that will be an empti arrai okai , and we will be now do a loop but over n .
okai so we'll be do over n in nv , and we will have to comput the complex exponenti but thei're go to be a littl bit differ , becaus now here the complex exponenti is 1j multipli by <num> by np . pi  .
and in here instead of multipli by all , for everi k , we will do it for everi n , divid by n .
and here , we will have arrai of frequenc , of kv .
so , thi wai , thi basic s is the sum of all complex exponenti of all possibl frequenc at the given sampl .
and now , the output will be again we will , keep append the output sampl , and we will be append to the y sampl , the sum of the spectrum x by the s , which ar the complex exponenti .
and that should do it , thi should comput the invers dft .
well , we ar miss someth , there wa , <num> over n and multipli , which is the normal factor of the invers dft .
and now to plot , what we're go to plot , we ar go to plot for all sampl , we're go to plot the output signal y and axi will go again from minu n over <num> to n over <num> minu <num> .
but be a time signal , it's go to go from minu <num> to <num> .
and that should do it .
hopefulli , if we execut thi , okai there is a problem of k here we type kn , which is kv .
okai and now we will run it .
okai thi is the output signal y .
so , at time zero is a cosin , so thi wa a cosin function .
and it ha <num> period of our signal .
that's the input signal we had and thi is exactli the same that the the output signal we have comput .
and that's all .
that's all i want to sai .
so basic in thi class we have implement the dft and the invers dft equat .
so pleas make sure that you understand those equat .
and of cours , we have been us complex sinewav , the dft sinewav to implement that .
and in the code we need two packag , the numpi and the and matplotlib .
and that's it , so we have hopefulli complet the dft explan .
we talk about the theori part , we made some demonstr and now in thi program class , we have been abl to actual implement it .
and of cours thi is not all , thi is just the veri begin , it's go to get a littl more complic .
but pleas hang on and hopefulli i will see you next week with more advanc topic .
thank you veri much .
welcom back to the cours on audio signal process for music applic .
last week we introduc the discret fourier transform , but that's not enough , if we realli want to understand it deeper and if we realli want to understand how it behav when we deal with sound .
thi is what we'll be do thi week .
in these theori lectur we'll be introduc the properti of the discret fourier transform .
in thi first on we will talk about four properti linear , shift , symmetri and convolut .
so let's start .
linear is a veri conveni properti of mani mathemat oper , in thi case of the dft .
it basic mean that is a well behav oper .
if we start with a linear combin of two signal , x1 , x2 , then in the spectral domain , in the frequenc domain , it also correspond to the linear combin of the spectrum of the individu signal that we put in .
and it's veri easi to prove .
if we start with the dft of thi sum , of these two signal , x1 , x2 .
we can see easili that we can group , we can separ these summatori into two sum .
on for a x1 , and anoth for b x2 .
so basic we ar comput two dft , and sinc the scalar valu do not depend on n , we can put them outsid the sum and therefor we will get small a multipli by the dft of x sub <num> , plu b multipli by the dft of x sub <num> .
and we can exemplifi thi with two real signal .
if we start with a signal x1 that ha a given amplitud and frequenc and anoth signal x2 which is also sinusoid with a given amplitud and frequenc we can comput the dft of these two signal separ , so we can see the magnitud spectrum , the absolut valu of signal x1 , and the magnitud spectrum of the signal x2 , and we can sum the two , so on the left plot we can see the sum of the two magnitud spectra .
but if we had to comput the dft of the sum of these two sinusoid , the result would be the same .
so the dft of sume the x1 and x2 is the same than have sum the two dft .
and thi is basic a result of the linear properti of the dft .
let's go to anoth properti , the shift on .
shift mean displac sampl of a signal , and in the dft case , it mean that if we shift the sampl in the time domain signal , we shift x n by n0 sampl , in the spectral domain it correspond to have the spectrum of the signal x k and then multipli by a complex exponenti .
and again , it's easi to prove if we start with the dft of thi shift signal , then we can chang variabl , and if we chang n minu n sub <num> and give it the name m , we can see that then we can split thi complex exponenti into two complex exponenti , on that is m and the other which is minu n sub <num> , and therefor then we can see that we have a dft of the signal x m , and it becom a complet dft of just the signal x , and then we have thi complex exponenti that ha the n sub <num> valu , that doe not depend on m , so it becom separ and therefor the result is that we have thi complex exponenti multipli the spectrum of the signal x .
and we can see an exampl of that too , here we see two signal x1 , x2 , and on is the shift version of the other on , x2 ha two sampl shift appli to x1 .
by the wai thi is a sawtooth , on period of a sawtooth waveform .
and then if we take the dft of these two signal we see that their magnitud spectra , the absolut valu of the spectra is exactli the same , there is no differ , and thi is becaus the complex exponenti that multipli thi spectrum doe not affect the magnitud spectrum .
but the phase spectrum is definit differ .
we have two line that have differ slope .
and thi is becaus the multipl by the complex exponenti in the spectrum affect the phase valu but not the magnitud valu .
so thi is an exemplif of thi shift properti of the dft .
now let's talk about symmetri .
and in the dft we have a whole bunch of symmetri and that's good , thei're go to be veri us for mani oper that we'll be do .
so for exampl if we start with a real signal , which is the type of signal that we'll be deal with , then it we take the dft of that real signal , the real part of the complex spectrum is go to have an even symmetri .
and the imagin part of the spectrum will have an odd symmetri .
and then if we look at it from the polar represent of the spectrum , we will see that the magnitud spectrum ha an even symmetri , and the phase spectrum ha a odd symmetri .
and then we would look at anoth type of signal , a signal that is also real but at the same time is even , ha even symmetri itself , the time to make signal , then if we comput the dft of that then we will see that the real part of the spectrum ha an even symmetri and the imaginari part is all 0s , and then again if we look at it from the polar represent , then we see that the magnitud spectrum ha the same even symmetri on the phase spectrum is all 0s .
and we can see it from thi exampl , in which we start from a triangl , a triangl is an even function , and of cours is a real function in thi case .
and we see these symmetri , we see that the real valu of spectrum is even and the imaginari part is all 0s and their absolut valu is even and the angl is all 0s .
and we can show these symmetri also in real signal .
thi is the sound of a soprano , a vocal sound , that we can hear so if we take a fragment of thi voic sound we see that the spectrum , in polar coordin , look at the magnitud and and the phase , can displai thi symmetri , the magnitud spectrum displai thi even symmetri , the right part is exactli the same than the left partm around <num> .
so that's a perfect mirror .
and the phase ha thi odd symmetri , which might not be as easi to visual , but clearli we see that the right part is kind of invert with respect to the left part , so thi is thi odd symmetri .
and to finish i want to talk about the properti that relat with convolut , so it basic sai that if we convolv two signal in the time domain , two time domain signal then in the spectrum domain , it correspond to the product of the two correspond spectrum of the two signal .
and again it is quit easi to proof .
it we start from the dft of thi convolut of these two signal , and then we put the equat for the convolut and we can separ the variabl x sub <num> , that just relat with m , and then x2 which ha n and m , but thi second part is basic the dft of a shift signal , of x2 be shift .
so as we just explain , the shift the oper in the spectral domain correspond to the product of a complex exponenti by the spectrum of the signal .
so here we see x2 , the spectrum , and the complex exponenti correspond to that .
and then , thi complex exponenti becom part of the dft of thi x1 , therefor we have the dft of x1 and we get thi product of the dft of the x1 signal with the dft of x2 signal .
and , like most properti , thi is a revers properti .
so that mean that if we multipli two signal in the time domain , it also correspond to convolv the two spectrum in the frequenc domain .
let's show these two view of thi properti .
for exampl if we multipli two signal , and thi is an exampl of thi multipl , and the correspond convolut in the frequenc domain .
so here , we start with two signal , x1 , x2 .
we have the dft of these two , onli we're show the magnitud spectrum , and we see clearli the magnitud spectrum of these two signal .
these ar even and real function , so we see these even symmetri , and then thi spectrum can be convolv , so if we convolv these two spectra , we see these on the right hand , thi is the convolut of these two spectra which result into thi shape .
but the same shape can be obtain by multipli the two signal .
multipli x1 by x2 , and then take the dft .
the result is exactli the same .
and we can show anoth exampl , which is veri common in filter .
thi an exampl of filter a sound , in thi case a sound of the ocean , by an impuls respons .
but first let's hear the two signal , okai , so thi is an ocean sound , so it's a veri noisi type of signal .
and then we can hear the impuls it's a tini sound , it's an impuls respons of of a space and we can then convolv the two to get the filter oper .
thi is the standard thing , but in the context of the dft we can see the dft of the ocean sound x1 and the dft of the second sound x2 and then thi idea of convolut can be done by multipli these two spectra .
so on the right hand bottom we can see the product of these two spectra .
and on the left hand , we see the dft on the convolut on the two input signal .
okai , so basic that mean that filter can be accomplish both in the time domain by convolv two signal , or in the frequenc domain by multipli the two spectra .
and that's quit a veri conveni properti that we can take advantag of the dft .
okai .
so , you can find quit a bit of inform about these thing in wikipedia , and especi in juliu websit .
there's a veri detail explan of all these properti and the proof .
the sound come from freesound and of cours all thi is avail under all these open licens .
so thi is all for the todai , in order to understand the dft in more real situat we have gone through some of it properti , in the second part of thi lectur we will continu with some more properti .
so i hope to see you then .
thank you for your attent .
welcom back to the cours on audio signal process for music applic .
in the first part of thi lectur we present some properti of the discret fourier transform , we now continu we some more properti that will be veri much us when us the dft .
in particular , we will talk about energi conserv and decibel , phase unwrap , zero pad , the fast fourier transform , the fast fourier transform togeth with what we call zero phase window and final we will put it togeth with the the concept of analysi and synthesi of a sound .
okai .
so let's start , the properti of energi conserv relat with the idea that energi of a signal both in the time domain or in the frequenc domain can be measur in the same wai , and it's basic the same .
so we can either comput energi in on domain or the other .
energi is defin as a the sum of the squar root of the absolut valu of the signal and in the frequenc domain if we take also the absolut valu , squar it and sum it , and if we just add thi normal factor by divid over n , we get the same valu .
so here we see an exampl , we have time domain signal , we do thi energi calcul , and we get thi valu <num> , and if we do the same thing in the frequenc domain , we squar the absolut valu , we sum , and then divid by n , we get exactli the same valu .
ok .
a concept relat to energi is amplitud which is what we normal us either in the time domain or in the frequenc domain .
when we obtain the polar represent of the spectrum of the signal , it dft , the amplitud is obtain by comput the absolut valu , which is a linear measur .
howev for the case of sound a more intuit represent of the amplitud can be obtain by convert into decibel , into a log valu .
so , the decibel ar defin , as we see here , as <num> time log <num> of the absolut valu of the signal .
so , from the origin time domain here we can see the absolut valu of the spectrum in a linear represent , and what we ar now sai that is a more intuit wai to visual the the amplitud in the frequenc domain , so us decibel scale .
okai the spectrum of a signal includ the amplitud , now comput in decibel , and also the phase , and phase unwrap is a wai to repres the phase spectrum of the dft in a wai that is easier to visual and understand .
so here we see an origin signal , the magnitud spectrum in decibel , and the phase spectrum , comput as the angl of the complex valu of the spectrum .
and here , we see clearli that is a veri messi type of visual .
so , the unwrap , what it doe , it basic smooth that out by ad two pi  whenev there is a discontinu .
so sinc thi is bound between zero and two pi  , whenev it reach beyond two pi  , it wrap back and it goe to zero , so what we're go to do is to unwrap that and let it grow as it behav in a natur wai , so we get these smoother function that becom much easier to read and interpret .
zero pad mean to add zero at the end of a signal .
in the context of the dft , it we zero pad on domain it produc an interpol signal in the other domain .
so here we see an exampl of that .
we start from a signal , x , of size <num> , and thi is the signal from which we comput the dft , it dft will also be of size eight .
here we see the absolut valu , in thi case comput into db , into decibel of these <num> sampl .
now , instead of comput the dft of these <num> sampl , we can comput the dft of these <num> sampl plu <num> sampl of zero .
therefor have the size of the dft to be sixteen , thi is thi second plot .
so , by comput the dft of size <num> but of onli these <num> sampl what we ar see is that is a much smoother visual .
the sampl of n equal <num> , of the magnitud spectrum of n equal <num> , ar exactli here .
but apart from those there ar interpol valu in between , so that to make the spectrum smoother .
and we can even do more , if we zero pad even more , up to n equal <num> , we will get more interpol valu in between , therefor result into a smoother spectrum .
okai .
so now , let's talk about the the fast fourier transform .
the dft can be a quit demand oper .
the implement can be quit slow if we don't pai attent about some effici implement .
so , the fast fourier transform is that , an effici implement of the dft equat .
and it doe that by take advantag of symmetri .
so what it doe , it restrict the input signal to be of size a power of <num> .
and becaus of that , and thank to that , then there ar a whole bunch of symmetri that appear .
and so in thi exampl , for exampl , have <num> sampl of a signal we can combin them so that we can group them and take advantag of the symmetri .
and then perform comput at thi pair wise type of signal and therefor have a much more effici comput .
there ar other algorithm that take advantag of other symmetri .
in thi case , thi is the algorithm that wa origin propos by colei tukei .
and here we can see a littl the differ in comput time between the standard dft and the fft .
so here in my laptop i comput the dft that i show last week , in python implement , and i comput differ dft size and a comput the time that it took .
so , as the size of the dft wa increas the comput time increas exponenti and here the last on i tri , <num> , <num> it wa close to two minut of comput time .
if i us the fft implement that come with python , of cours is an effici implement also , becaus it's implement in c , but clearli , we see the huge amount of differ between that .
so an fft size of <num> , <num> sampl is much less than a millisecond of comput time .
and the growth of thi comput time , is grow not exponenti , is grow a littl bit flatter , it is grow at at a growth of n log n .
which is lower the the exponenti growth of the dft implement .
okai , so in order to us the fft we need to have the input signal to have a power of two length .
but we want to comput the spectrum of ani length signal , so thi is the wai we propos to comput the spectrum of a signal .
we would first do zero pad , and then we will do what we call zero phase window .
so let go through thi exampl .
if we start from a fragment of a sound , x , that ha a given length , let sai <num> sampl .
now we want to us the fft , so we'll need to us power of two , so the next power of two will be <num> , so we'll add zero , so thi next represent ha zero , but it doesn't add them at the end , it doe it by kind of split the signal through the middl in a wai that , thi is what we call the zero phase window , yhat the zero sampl , which is center sampl , is at the left side of the buffer .
that's where the zero sampl is .
then we have the posit sampl up until the middl , with zero pad includ .
and then from the right side we have the neg sampl , the sampl that ar neg time .
so thi is the wai we will pack the signal in what we call the fft buffer , befor call the fft .
and it would comput the fft of that and then comput the spectrum in db and the phase with unwrap , unwrap the phase , we see thi visual in which we see the symmetri of the magnitud spectrum and we see it quit nice we see it quit smoothli and the phase , we see the odd symmetri of the phase .
we see a veri smooth phase visual becaus of two reason .
becaus we did the zero phase window , and becaus we did the unwrap .
so becaus of the zero phase window , basic we ar get rid of the shift distort that would occur if we had not center all the sampl around zero .
and of cours the unwrap allow us to see thi veri smooth visual .
okai so thi is the last part of what i want to talk about .
so we have seen the dft .
we have seen the differ properti , and now we can put it togeth and do the analysi and synthesi of the dft in what we call the analysi synthesi type of oper .
so , we can start from a signal .
comput the fft , repres correctli in the magnitud and phase , and sinc there ar symmetri , there is need to onli show half of it , the posit side .
so thi is the posit side of the magnitud spectrum .
and the posit side of the phase spectrum .
so , the spectrum is twice as long .
and then we can do the invers fourier transform from thi , and reconstruct the origin signal , and it should be exactli the same , so if we do thing right the input signal and the output signal should have exactli the same valu .
so we have seen thi slide befor .
thi is just the slide for give some refer and credit .
inform on the dft is avail in mani place , about the fast fourier transform too .
the sound from freesound .
again , the refer for juliu dft inform in hi websit .
and the standard credit .
so with thi lectur we complet the present of the relev fourier transform properti , that ar of relev for our audio process work .
in the next lectur , we will take thi further and start work with more complex sound .
so i hope to see you next class .
bye bye .
welcom back to the cours on audio signal process for music applic .
in thi demonstr class i want to talk about period signal .
period signal ar at the basi of understand most signal , and ar also at the basi of fourier analysi , so it's good to talk a littl bit about them .
let's start by open audac and gener some period signal .
so here it ha a tone gener .
and the most fundament period signal is the sinewav that we alreadi have seen .
so let's gener a sine wave of <num> hertz , durat of <num> second and amplitud of <num> .
okai .
so here is our sinewav .
let's hear it .
okai .
in order to see that it's period , we can zoom into it .
and here we see the sinusoid oscil , the period oscil of a sinewav .
if we zoom even more , we're go to start se the sampl that ar present in thi signal .
thi is a discret signal .
so we have gener thi signal at <num> , <num> hertz .
so we'll have that mani sampl per second .
okai .
so the first thing we might want to do to understand the concept of period is to measur what is the period length , the idea of period mean that there is a period that is repeat , a cycl of the sound .
so thi is a cycl of thi sinusoid and in here we can see what is the length of the select i made and it sai that it is <num> . <num> , so that mean <num> millisecond .
if we go to the termin and have python in , we can us it as a calcul .
so we can convert thi period length into frequenc .
so the invers of the period , so <num> . <num> will be our frequenc .
and , of cours , it give us <num> hertz , <num> hertz is the frequenc of thi sinusoid .
okai .
anoth thing we might want to check is , okai , thi period ha a seri of sampl .
so how mani sampl doe on period of thi sinusoid ha ?
well , in order to comput that , what we should do is start with the sampl rate .
the sampl rate is <num> , <num> and multipli it by the durat of thi period .
so , we multipli it by <num> . <num> and it give me <num> , which is the number of sampl of a period .
of cours , it should be an integ number , so i guess it's go to be <num> sampl in on period .
okai ?
now let's gener anoth sinusoid but of a differ frequenc .
so let is , mayb , open a new file .
okai .
and let's creat anoth sinusoid .
but instead of <num> hertz , let's put , for exampl , <num> , <num> hertz .
okai .
so thi is the sinusoid of <num> , <num> hertz .
we can hear it too .
okai , clearli much higher .
and we can also zoom and see the period .
but here , we alreadi see that it's not so nice .
in fact , the sampl ar not realli shape a smooth sinusoid function .
thi is becaus there ar less sampl per period , therefor , we don't have a veri smooth version .
so how mani sampl ar in on period ?
well , not that mani .
in fact here we can even count them .
and it's on , two , three , four , five , six , seven , eight .
so , in fact , we have like eight , nine , sampl per on period .
not exactli becaus thei don't coincid , of cours , with a period .
of cours it make sens becaus if we had seen that the frequenc of <num> had <num> sampl in on period , now that we have ten time the frequenc , <num> , <num> , the number of sampl will be ten time less .
so it's go to be around eight or nine sampl .
that's pretti good .
of cours , thi relationship between the number of sampl and the frequenc is a veri import on , and relat with the sampl rate .
the bigger the sampl rate , of cours , more sampl we'll have and for higher frequenc we'll have more sampl .
at <num> , <num> , as we go up in frequenc , and if we go even higher , like <num> , <num> or even <num> , <num> , the number of sampl will be veri less .
and , therefor , the shape will not look like a sinusoid even though it's a sinusoid .
okai .
let's look at anoth period signal but differ from a sinusoid .
so we will creat a new file and we will gener a tone .
but in thi case , let's gener , for exampl , a sawtooth .
and , instead of <num> , <num> , let's go back to the <num> hertz .
and mayb the amplitud , we do not have to put it that high becaus thi is a veri rich sound and it will be quit loud otherwis .
okai .
so thi is a sawtooth waveform .
again , we can now listen to it .
okai ?
if we zoom in into thi waveform , well , we see that it's veri period .
and sinc the sampl rate is high enough and the frequenc is kind of low , we can , if we zoom in , well , we have a lot of sampl per period .
but in thi case , the period , which we can measur and it's go to be same thing , <num> , it doesn't mean that there is on frequenc at <num> hertz .
in fact , thi waveform ha mani frequenc .
it ha <num> hertz as the fundament frequenc , and it ha multipl of that so that it's a harmon sound .
and how can we check that ?
well , we check that with spectrum analysi .
and in audac , we have the possibl to plot the spectrum .
okai .
and here , now it tell me that there is not enough data becaus i have to choos a bigger part of the sound .
so , let's choos a bigger fragment of the sound .
and now , if we replot , now we can visual the spectrum of thi sawtooth .
and clearli , we see that is a quit complex spectrum in which it ha mani peak .
in order to understand thi , i think it's good to compar it with the sinusoid we start with .
so thi wa the sine wave we start and if we do the same thing that we have done now with the sawtooth , that is to comput the spectrum , well , we see now that it's clearli veri differ .
the , the spectrum of a sinusoid ha onli on major peak at the frequenc , in thi case , <num> .
and the spectrum of the sawtooth ha mani peak , which correspond to all the frequenc present in thi harmon signal .
okai .
now let's even do someth a littl bit more complic .
let's see that we can gener on signal .
but instead of be the same frequenc all the time , let's have it that it chang in time .
so these ar normal call chirp function .
so let's have a sine wave be a chirp .
let's go from the two frequenc we have mention .
so from <num> , let's go up to <num> , <num> hertz .
and let's have the amplitud as <num> all the time and let's have thi <num> second .
so now , we have kind of a glissando , a chirp .
and , of cours , we can plai it again .
okai .
so it's a frequenc that goe up and again we , of cours , we can zoom but we will see that the period keep chang in time .
so here at the begin , we'll have a period that is go to be quit long .
it will be the <num> hertz , the <num> millisecond .
and by the end , it will be much smaller , it will be ten time smaller .
okai .
and , of cours , we can visual that by analyz the spectrum of thi signal .
so if we select a portion of the begin and analyz the spectrum , we will see that it ha around <num> hertz frequenc .
and if we go to the end , so we go to the end of the signal , here .
and now we comput the , replot the spectrum , well , it ha shift .
it's go toward the <num> , <num> hertz , so it's it's also on singl peak but much higher .
okai .
and that's that's a good wai to visual and understand period signal .
okai .
anywai , thi is all what i want to sai todai about period signal .
so let's go back to the slide .
and we haven't us much .
we've basic us audac .
and we have talk about electron period signal synthes period signal .
these ar signal that ar quit good to plai around with becaus we know how we gener them .
and so , therefor , when we analyz them , we know what to expect .
so in the next demo class we will complic that .
so we will actual analyz more complex signal , sound , that might have some part of the period , might have some part that ar not period , so thei reflect more of the realiti of real sound .
so i hope to see you next class .
thank you veri much .
hello , welcom back to the cours on audio signal process for music applic .
in the previou demonstr class we talk about period signal .
those were veri simpl signal , gener synthet , and us audac we tri to make sens of them by look at the time waveform and by look at the spectrum .
now i want to go to complex sound .
so to sound that have much more complex than those on and see what we can do with it .
okai so we'll start with sonicvisu and we will open up a file .
so let's open a speech file .
okai so thi is sound of a male speech .
let's hear that .
do you hear me ?
thei don't lie at all .
okai , now we can of cours zoom in into differ part of the sound and we will see that there ar some part that ar more period , some part that ar not period at all .
so for exampl thi end , thi end .
that we can also select and plai .
okai , it ha differ portion that we can analyz .
for exampl here in the middl it ha the more voic portion of at all .
so if we zoom in we'll see that it's quit period .
of cours it chang quit a bit but it ha some repeat pattern that evolv in time .
instead at the begin of the attack of thi sound it ha the t sound and thi clearli is non period .
so we see that it's quit noisi .
is the conson that is veri much non period .
okai .
in order to reinforc these idea we can of cours us the spectral analysi .
in sonic visual there is the concept of pane and we have the differ pane that we can displai and there is on that is a spectrum .
okai so thi is the spectrum of thi sound at the particular locat at the cursor that we ar in .
and as i said in the previou class it's better to visual the horizont in linear step , and mayb put here in line and then kind of mayb have a better db rang to look at .
and if we ar in the kind of the vowel type of area we kind of see the peak that correspond to the harmon of thi sound .
instead , if we go to the begin , thi attack , the t , sound , clearli thi is much noisi and is more difficult to see .
mayb if we chang the dft size by chang it here .
we might be abl to see a littl bit better .
so thi is a size we'll take <num> sampl .
and we will see littl bit differ the spectrum , okai let's look at anoth mayb more complex sound .
then let's look at for exampl thi cello doubl .
thi is a sound that there is two note .
let's hear that .
okai so it's not a monophon sound , it's a polyphon sound .
and these two frequenc , we can hear them quit well , on is quit stabl and it goe throughout in the same frequenc and then there is thi littl scale go up and down .
okai , so if we zoom in into here we will see that it's veri hard to see ani period .
becaus , of cours , we have these two sound plai at the same time .
in some area there might be kind of the two note thei might reinforc each other in term of frequenc and we might see some period oscil .
but typic that's go to be quit hard .
so here we might figur some period oscil for exampl .
okai in the spectral domain , so if we comput the pane and we show the spectrum , here again we will do with linear line here and then mayb zoom so that we see better .
okai here , well we see that thing chang and we can identifi the harmon of these two kind of melodi plai togeth .
if we would zoom into here and , too bad that sonic visual doesn't allow me to zoom into thi for region , we would see the differ harmon of the two voic that ar be sound togeth .
so clearli in the spectral domain we can try to identifi thing that in the time domain ar much harder .
and we can step through the sound and figur out differ aspect .
and then let me finish by present an even more complex sound that i don't think even with the spectrum analysi we can make some sens out of that , that's for exampl thi orchestr sound , thi orchestr sound we can plai it okai it's a full orchestra with mani string instrument .
it's a chines orchestra plai .
and there is percuss instrument , a whole bunch of thing .
so if we zoom in veri hardli we will make sens of ani of it .
it look basic like a random nois .
but of cours there's a lot of structur into it .
hopefulli the spectral analysi should allow us to make some sens out of all thi .
so if we open the spectrum pane and then again we chang it to linear , we put it smoother .
and we tri to make veri , better visual well it's veri difficult but we will learn that there ar some clear pic here that with them we can make some sens of some of the promin voic that emerg .
so we will try to understand it , but of cours thi is veri difficult .
in fact it's beyond the kind of spectral analysi that we will do in thi class .
thi requir certain techniqu that in fact ar still open research problem .
and it's veri difficult to analyz a signal as complex as thi on .
but basic that's all i want to sai .
and we have us is a sonicvisu to analyz differ type of real sound .
we analyz speech sound , we analyz a cello sound that had two melodi , two note plai at the same time .
and then thi orchestr sound .
all of these sound ar in freesound .
but we have seen that it's not easi .
of cours real sound ar veri complex , mayb the speech is the easiest .
we can try to grasp someth when there is sever melodi be plai at the same time but of cours in a full orchestra that's realli difficult .
but anywai we do not desper , we will try to make some sens out of that .
in the next class we'll learn about how to handl them .
so that's all for todai .
we tri to complement what we mention last time with period signal and try to analyz complex sound and we us sonic visual which allow us to visual some of the spectral analysi a littl bit better than audac .
and and that's all for todai , so next class we will introduc our tool , the on that we have develop , the sm tool to try to see if with those tool we can do someth els in term of analyz sound .
so , thank you for your attent , and i'll see you next time .
hello , welcom back to the cours on audio signal process for music applic .
in the previou demo class of thi week , we have analyz some sound , we analyz some electron period signal , and we analyz some real sound .
and we us audac and sonicvisu , special to look at the spectrum of these sound .
and now in thi lectur i want to continu that and try to us the tool that we have develop for thi particular class , so the sm tool and do the dft analysi to see if we can understand some sound .
so let's first open with audac a file , so we can see the overal view of the sound .
okai , so let's take the violin sound .
so thi is a note of a violin , it's quit stabl , so we can see that it's a length of two second .
but instead of us audac let's analyz it with with the interfac of sm tool .
so let's go to the model_interfac directori and just type python and the model_gui and thi will open up the interfac .
okai , thi is the interfac of of the sm tool , where it ha all the differ model that we ar go to be talk about .
and now let's go to open up the violin sound .
and us the dft modul , so we can hear the violin .
okai , so we hear thi note of the violin .
and in the paramet , well let's choos a size , a portion of a sound to analyz .
and for exampl let is us <num> .
we have to us a power of two for the fft size , becaus the fft algorithm requir that and we don't have to us the window size of the same length but for now let's do that .
and now we have to choos where we take these <num> sampl .
let's sai we choos the middl of the sound , so let's take in second <num> , and we comput it .
okai , so thi is the analysi result .
so , these ar the <num> sampl , start at second <num> .
and then we have comput the dft of that us the fft algorithm .
and we ar displai half of the spectrum .
we ar displai the posit side , becaus it symmetr .
so therefor , the neg side is not requir becaus it ha the same inform , so we're just plot the posit side .
both for the magnitud and the phase spectrum .
in the x axi we ar plot frequenc in hertz , and so we ar plot from zero to half the sampl rate .
okai so the sampl rate wa <num> , <num> .
so here we're appli up to <num> , <num> .
okai and the amplitud in the magnitud spectrum is in decibel , as we explain , so we ar show it in db and the maximum amplitud is minu <num> .
so here we don't have a complet , the signal onli reach . <num> , so that correspond to minu <num> decibel .
and it goe down to minu <num> .
and the phase , we ar plot it us the unwrap function .
so instead of limit the phase from <num> to <num> pi  , we ar lete it unwrap so that we see a much smoother shape .
and that's go to be quit good .
quit us .
and then final , out of thi we comput the invers and we comput anoth time domain signal .
it's not the same as the input signal becaus we have appli a window in the input signal and thi is what we ar see here .
thi is the window version that is the on that is basic captur in the spectrum .
okai , now let's try to see if we can understand someth on the sound .
and typic the magnitud spectrum is the most us on .
here , well we see thing , but mayb we don't see what we would like to see .
which is to visual the harmon of that .
so thi might be becaus these ar not enough sampl .
we do not have enough inform to visual and separ all these frequenc .
we need a bigger frequenc analysi .
so instead of have <num> let's take the next power of two , so the next fft size <num> , <num> .
okai and now it's a littl bit better , okai ?
so we can see , compar with the previou on , that , of cours we have taken more sampl , and the magnitud spectrum give us some more inform .
for exampl here , we see clearli these peak and thi correspond to the harmon of the sound .
so , that's a quit us inform .
okai , now mayb in order to see what can we understand about the sound , let's look at anoth portion of the sound .
of cours , as we saw , the sound is quit stabl .
but if we go into the begin , if we zoom into the veri begin of the sound , there is a region of the attack that's a littl bit differ , so let's see if we can captur that differ .
so let's go back to our interfac , and let's do the same analysi , but instead of do the analysi at time on , let's do it at time zero .
so we comput from time zero .
and now well we see clearli that the sound is mayb not as smooth we had it dure the middl of the sound .
and what we also see is that the spectrum is a littl bit differ .
okai , we see dure the attack that mayb the harmon ar not so clear , becaus at the begin of the sound there is more the attack of the bow , of the nois , so the harmon ar not so well identifi whether in the middl of the sound , clearli the harmon got stronger .
instead , at the begin there is more nois .
so these irregular that we see in the time domain waveform ar captur in the spectrum by see all these more , kind of random , and sort of irregular shape that we see in the spectrum .
okai , so thi is the kind of thing that the spectrum analysi allow us to visual and therefor to understand .
now let's go back to the the window of the control paramet .
let's go back to the middl of the sound .
and let's talk about the differ between how mani sampl we take and the ftt size we comput .
we do not have to take the same number of sampl of the fft .
for exampl , we can take <num> sampl and then zero pad to the ftt size and comput the result .
so if we do that , okai .
thi is similar to the previou analysi we did befor in which we took more sampl , we took <num> , so thi now there is less sampl .
and the spectrum well , thei look okai both .
of cours in the on that we took more sampl of the input signal , we see the harmon a littl bit better , than the on that we have comput now with <num> sampl .
but , it's as smooth as the previou on , so both ar equal smooth .
thi is becaus the fft size , in both case is <num> , <num> .
okai , now let's mayb get rid of the on we just comput and let's comput again the <num> , <num> sampl , which mai be the the most us on .
and , now let's try to understand a littl bit more about the sound .
by zoom into the begin where it seem that most activ and the most interest inform is .
so with thi figur interfac of python we can choos a rectangl , so for exampl , in the magnitud spectrum we can just choos the first <num> , <num> hertz .
okai .
and we can see these harmon , the peak of the first <num> , <num> hertz quit more clearli .
and we can do the same thing with the phase spectrum .
okai , so we'll take the first <num> , <num> hertz and thi is the phase of what correspond to these frequenc , the same frequenc .
okai , now we can start see other thing of the sound , for exampl we can see that these peak ar equal space and we can look at the frequenc of them , here in the lower right corner it tell us where , what is the locat of the x , of the cursor , of the x axi .
and we see that thi is around <num> hertz .
okai ?
becaus the dimens is in hertz .
and if we look at the next on , it's around <num> hertz .
so in fact , these ar the harmon of the sound .
the first is the fundament .
so the fundament is around <num> hertz .
and thi twice the fundament , and thi will be all the multipl , the harmon multipl of the fundament .
okai so that's good , so that's a wai to identifi the fundament frequenc of the sound .
and in the phase spectrum it's pretti nice .
basic what we ar see , in the correspond frequenc of the harmon , we ar see the phase of these harmon , the phase at time zero , where we have center the analysi .
so if we look here , for exampl , the correspond locat of the first harmon it sai that is around minu <num> radian , becaus the vertic axi is in radian .
and thi is in fact the phase at time zero of thi particular harmon .
and we can go to the next harmon and measur the phase , or to the next harmon .
so visual we can identifi the magnitud and phase of the compon of thi sound .
so that's go to be veri import and veri us .
and clearli with thi interfac , with the sm tool , we can zoom into the sound in wai that the sonicvisu or audac wa not so easi to do .
so anywai , so that's all i want to sai .
so basic we have gone through the sm tool , thi interfac of the dft in particular .
and we have analyz a violin sound which is avail in freesound .
and we have plai around a littl bit with the differ paramet of the dft .
okai , and that's all for todai , with these three demonstr class we have tri to see the differ tool that we can us .
for analyz the sound , visual the time domain , visual the spectrum .
but of cours there is much more to do .
so next week we will continu , and we will go into a littl bit more complic thing .
so i hope to see you then .
bye bye .
hello , welcom back to the cours on audio signal process for music applic .
thi week we're talk about the fourier properti and theorem .
and in thi program lectur , we ar go to be us that to actual implement the analysi of a sound , us the fourier transform , and we will take advantag of those properti to better understand thi program aspect of it .
okai , so let's first go to a termin .
and we go to be work within the sm tool kind of packag .
so we'll go to where we have kept the sm tool code that we download from github .
and we're go to be work from the workspac directori .
okai .
so , now we ar within the workspac directori .
and now we can start ipython .
so , todai we're go to be us ipython , which is an interact shell that is veri conveni for interact call python command .
sinc we're go to be us matplotlib all the time , there is a wai when we start ipython to alreadi import matplotlib .
so we do that by call pylap .
okai ?
and thi will execut iphython and it alreadi will be us matplotlib as part of that .
okai , now we want to start type in python , but it's much easier to do it from a text editor .
okai so here is our gedit , our text editor , and i alreadi type some of the command of what i want to explain .
so thi is a veri simpl script , in which i import three packag , so numpi , the standard arrai process packag , then i want to us a triangular function , so i got that from scipi , okai so i import that function , and i want to us the dft implement in python , the fft algorithm , so i get that also from scipi , from the fftpack .
okai ?
now we declar , we creat a triangular function , an arrai of valu that is a triangular shape .
so i comput <num> sampl of a triangular function .
then i call the fft algorithm .
and here it's veri import to notic that the size of the input signal is <num> sampl , it is not a power of two , even though we mention that in order to us the fft algorithm , we requir to have a length of a power of two signal .
but , thi implement of the fft , when the input signal is not a power of two , then it just implement the dft , the standard implement of the dft , therefor it doe not take advantag of the power of two and of the implement of the fft .
but so therefor we can us the fft for ani size , of cours we will try to us power of two when thi is call veri often .
and then after comput the spectrum , capit x .
we obtain the magnitud , and the phase of the spectrum .
okai ?
so from ipython , we can execut thi file , thi file is in our workspac directori , it's test . py .
okai ?
so i can execut thi script by just type run and test .
no need to type that . py becaus it know that we ar execut python file .
okai , so now it ha execut these command .
it hasn't print or plot anyth .
i didn't ask for ani output in that wai .
but it ha comput all these variabl .
so these variabl ar now known into the environ .
so if we for exampl just type the variabl x , it show the arrai of our triangular function that we have comput .
and we can plot it .
if we plot x , where plot is the matplotlib function , i don't need to make refer to the packag , but just directli the function plot .
and i plot x .
i'll displai the triangular function go from <num> to <num> .
okai ?
then the magnitud and phase spectrum can also be plot .
so i just can plot mx and thi is the magnitud spectrum .
okai .
and thi requir some explan .
the magnitud spectrum of a real function like a triangular function is symmetr and here there is a symmetri , but mayb a littl mislead .
the symmetri is around <num> and the wai thi ha to be understood is as a circular buffer in which the center is <num> and then the first half of the arrai ar the posit valu and the second half of the arrai ar the neg valu , so in fact the valu <num> is also the sampl minu <num> .
okai , so thi keep repeat left and right .
and , therefor thi end is the neg part .
and then , we can understand the symmetri veri clearli .
okai ?
we can plot the phase spectrum by type plot px .
okai ?
and it show thi quit complex function , which is kind of not so intuit from what we talk about .
when we analyz a real function , and an even function like the triangular function , the phase should be <num> .
thi wa on of the symmetri properti of the dft .
and here the phase is not <num> , why ?
well , becaus our time signal , the triangular signal , wa not center around <num> .
it had a shift oper .
it had a shift of half of the triangular function .
so from what we just talk about , the concept of center around <num> , in order to comput a triangular function that is center around <num> , we have to place the triangl in a differ wai .
let's show that .
okai , in thi second file , i have ad three line that chang the triangular function in a wai to center it around <num> .
okai ?
so after comput the triangular function , we ar creat a variabl , which we call fftbuffer , of the same size as x .
all initi with 0s .
so np . zero is a wai to creat an arrai of empti valu .
and then what we go to do is locat the triangl around <num> .
which mean that the first part of the buffer will be the end of the triangl .
thi wai of access the arrai basic sai that from seventh locat of the input signal to the end ar place at the begin of the fftbuffer .
and the second part of the triangl , the second half is place at the end .
no , thi is the first part of the triangl is place at the end of the fftbuffer .
and then we do exactli as we did befor , we comput thi arrai that ha the triangl now center around <num> , and we obtain the magnitud and phase spectrum .
so again thi file is in our workspac , so we can just execut it , run test1 .
okai ?
and now what we're interest is in the fftbuffer .
so if we show , we plot the fftbuffer .
okai , we see the triangl but place around <num> .
what doe that mean ?
well , the center of the triangl , the valu <num> is now at locat <num> .
thi is the second half of the triangl , and the first half is now place in neg valu .
it's place at the end .
thi would be the neg sampl of n .
okai ?
and if we now look at the magnitud spectrum , well , it should be the same than befor .
it's exactli the same .
the magnitud doe not chang .
what we have done is a shift oper .
we have move the triangl from <num> to <num> to minu <num> to <num> .
so the magnitud doe not chang .
but the phase should be veri much differ .
okai ?
so let's plot the phase .
well , that look strang , but let's understand that axi to understand it .
thi is , there is thi factor , exponenti factor here of e to the minu <num> , so basic these number ar <num> .
now , there is some numer error , but these ar tini , tini valu .
it's not <num> to <num> , but it's <num> to <num> , to the minu <num> .
okai ?
so basic thi mean that thi is all 0s .
and of cours there were some numer error that is caus by when we us comput .
so anywai , so thi is <num> phase result .
okai now let's look at a real signal .
let's do the fourier analysi of a real signal .
and for that i creat anoth file , test2 .
in which we basic us some of the same code but ad code in order to be abl to read a sound file .
okai ?
so we have the same packag , but here we need to includ a file that is within the sm tool directori , call utilfunct the ha the wavread function .
okai ?
the wavread function , is a function that read a file and then it convert to float point number , normal to minu on to on .
so thi is what we need , that's why we import that .
and then instead of have some fix valu , we have defin some variabl that allow us to defin ani section , or ani type of m valu that we want .
ani durat of input signal .
so what we do here is a wai to comput the durat of the second half and of the first half of the input signal , so we can then center thing around <num> .
and thi allow us to handl even an odd size valu .
okai ?
so thi is just simpli two variabl that allow us to decid where is the middl of a window .
then we read the input signal .
we read a file , the soprano wav file , and we store it into a variabl x and the sampl rate fs .
and then we just ar go to take a fragment of that , so we ar go to take from the x arrai , we go to take the valu that go from <num> , <num> to <num> , <num> plu the size of the window .
so <num> .
and then , we will multipli by a window , a smooth window , we'll talk about that more next week .
okai ?
so now we have a signal , x1 , which is a short signal , <num> sampl .
and then we do what we did befor , we ar go to center thi signal around <num> in the fftbuffer .
and thi code doe that .
and then we just comput the result .
so let's execut that .
so thi is test2 .
and let's first plot the origin sound that we read , so the whole soprano sound .
okai , thi is the whole soprano sound , and it ha more than <num> , <num> sampl , close to <num> , <num> sampl .
and thi is normal from minu <num> to <num> , so it's not that loud .
so it goe from minu . <num> to . <num> .
now let's plot the fft , well let's first plot the fragment that we choos , the x1 , the x1 is the fragment that we choos from the sing voic .
alreadi window by thi smooth ham window .
so these ar the <num> sampl .
and now we have to put them in the fft buffer , center around <num> .
okai ?
so we plot the fftbuffer .
and thi now is the same fragment of the sound but center around <num> .
the second half of the signal is in the posit time and the first part is in the neg time .
okai ?
and now , of cours , we can plot the spectrum , we can plot the magnitud spectrum .
okai , so thi is the magnitud spectrum and here we see symmetri that we saw befor .
so thi is the posit part of the begin and here is the neg part at the end .
and we have <num> sampl .
of cours we onli need half of it , becaus the other is redund .
and if we look at the phase , we can plot px , and thi is the phase , which look quit noisi .
and now we will try to improv that .
but thi is what it is .
and it's anti symmetr .
so , the first half is the neg valu of the second half , okai ?
now , in order to us the fft what we want to be abl to do is to take a power of two length signal , without have to chang the fragment of sound we actual take .
so what we can do is , well here the fft size n can be independ of the fragment of sound we take .
so here so for exampl now we can have n independ of m , and n will the fftbuffer .
in order to be abl to us a power of two fft , so we can just for exampl put <num> .
now thi will comput the fft , and will us the fft algorithm of a <num> sampl , even though we ar onli go to take <num> sampl .
let's try to understand that a littl bit .
so we will run the test2 .
and now , the fragment of the input signal is the same , but if we plot the fft buffer .
well , now see that the second half is store in the same wai , at the at the posit side .
and the begin of the sound is place at the end , at the neg sampl .
and the whole middl ar 0s .
thi is the zero pad .
okai , so these ar 0s that we have ad in order to fill up to the fft size .
and thi is good .
okai .
now if we look at the output , at mx , it will look similar to the previou on , but in fact there ar more sampl now .
there ar a <num> sampl .
and mayb here we ar not see the differ .
but now for exampl is we plot it in db , we might be abl to see more inform .
okai ?
so instead , the magnitud spectrum , on of the thing we mention is that we want to displai it in a logarithm scale .
so what we ar go to do is multipli <num> time the log <num> , which is a numpi function , of the absolut valu of x .
okai so now if we save it and run it again , okai run test2 .
and we plot the magnitud spectrum , it look veri differ .
okai , it look the , of cours the vertic axi ha chang a lot .
here we see again the symmetri .
of cours , here again now it doesn't make sens to plot the whole thing .
so typic what we're go to do is we just go to plot the valu that go from <num> , from the begin , to half of the fft size , which is go to be <num> .
okai ?
so <num> is half of the spectrum .
and thi is what we normal plot .
okai , thi is the magnitud spectrum .
and for the phase , on thing that we also talk about , when we talk about the properti , is that it's good to do an unwrap of the phase .
so what we go to do is call the unwrap function , okai from numpi , and thi will allow us visual thi phase spectrum better .
just , if you rememb , the phase spectrum look veri strang .
now if we execut with the unwrap function , let's execut again that , and we show the phase , it look much nicer .
thi in fact , we should onli be watch the first half , so in fact let's watch the part that goe from <num> to <num> , okai ?
and thi is the phase spectrum .
and thi look , as i said , much nicer .
let's unwrap the phase , it doe thi pi  two pi  unwrap , so it look much smoother .
okai so thi is the normal wai that we will be comput the spectrum of a signal .
and thi would be of a real sound .
so thi is a pretti good code that implement the fourier transform of a signal , us the fft algorithm and us some of the properti that we mention , and understand the issu of symmetri .
okai , and that's all i want to sai .
so basic we have us some of the fourier theorem and properti , so pleas make sure that you understand them , especi the concept of symmetri , zero phase window , the concept of db scale , the concept of unwrap the phase .
etcetera , so that when we comput the fourier transform we can actual visual and understand the valu in a good wai .
we us ipython , which becom veri help , so we can us a text editor for some aspect and then for the plot and to displai some thing interact we can us ipython command , so that's pretti good .
we start to us a number of packag , apart from numpi and matplotlib , the fft is part of scipi , that is go to be a veri us packag for us .
and that's all .
so , we have tri to us some of the properti we talk about in the context of program , in the context of actual practic us and we have basic develop a piec of code that implement the fourier analysi of a fragment of the sound .
so we're start to get someth interest .
so i hope you continu and that i will see you next class .
bye bye .
hello , welcom back to the cours on audio signal process for music applic .
in thi program class of the third week of of the cours i want to introduc the actual code that is within the sm tool's packag that implement analysi and synthesi us the dft .
in particular , what we go to show , is the dft modelfunct that , from a fragment of a sound , x of n , perform the fft algorithm .
and then gener a magnitud and phase spectrum .
and then that can go into the invers fft , and it return anoth fragment of a sound that hopefulli it should be ident to the input sound .
okai so let's go to the editor , and let's show the dftmodel . py file that is within the model's subdirectori of the sm tool packag .
okai ?
in thi file you will find three function , three function definit .
the first on is call the dftmodel , and thi is on that implement the whole analysi and synthesi , so the input is the input sound , x , the window , that we ar go to multipli by and the fft size , capit n .
and it will return the output sound , y .
okai , and then mani time we just need the analysi part or the synthesi part .
so in thi file we also find just the analysi .
so from the same input x , the window , w , and capit n , it return the magnitud and phase spectrum .
and the dft synthesi , the function that implement the synthesi part ha as input the magnitud and phase spectrum and the size of the sound to be gener , of the window sound , and it will return y , which is our output signal .
okai , and within that basic it ha the code that we talk about in in the previou program class , in which we just have to window the signal and put the signal in a wai that is center around zero , what we call zero phase window .
so for exampl let's look it at the dftanal function , which is veri much like we show in last class .
so thi begin is the declar and creation of some variabl , then we have the window that we put and we normal it .
then we window the actual signal , then we have thi buffer and we ar center the window signal in the buffer at zero .
then we comput fft .
and then we will gener the magnitud and phase valu by take the log for the magnitud and wrap the phase so that we get a nice look , result spectra .
and in the synthesi it basic doe the invers .
so again , we have to declar all these variabl , and then well we have to initi the output sound .
and a major differ is that the input , the magnitud and phase spectra , ar onli half of the valu .
sinc the spectra ar symmetr , the dftanal function on the return the posit frequenc .
therefor , in the synthesi , we have to recomput the neg frequenc from the posit on .
and of cours , sinc our symmetr is veri simpl .
the posit frequenc ar just direct , so get the magnitud and phase we just convert from rectangular to a complex number .
so by us thi kind of euler is formula and then for the neg frequenc we just get those but do it , read it , in a revers wai so that we get , the symmetri aspect of it , and of cours the phase we negat it so that we get negat of the phase .
that's it .
and then we obtain the invers fourier transform by call the ifft function that give as input a complex spectrum .
then we just get the real part , becaus we just want the real signal out of that and then we have to undo thi zero phase , thi center around zero so that we get back the signal as we had it origin .
okai so you can look at these with more detail , both the synthesi and the analysi of function .
i think thei're quit well explain here , so you can have a grasp of them .
but in order to test them i creat a small program in which i get all these packag .
i specifi the directori where these model ar both the util function that i'm go to us and the dftmodel .
okai , so from the current directori , i have to specifi thi rel path to the model's directori so that it find thi two packag , the utilfunct and the dftmmodel packag .
okai ?
now we ar go to start read a file .
so i read a piano sound file .
also rel to thi current directori to where the sound ar .
and i us thi function that i alreadi had been us to return an arrai of float point valu .
then i us a function that gener the window .
okai , get window allow us to gener a smooth window and we will talk more about it next week .
in thi particular case the ham window of a given size , <num> and and it return an arrai of these valu .
okai , then we need to get the fragment within the input arrai that i am go to analyz .
so we start at second . <num> and then i have to convert to sampl , so i multipli with the sampl rate , and i get the sampl of x that start at second . <num> and that last for m sampl .
and now we ar readi to comput the dft of that .
so i call the dftanal function from that modul that we just saw .
the packag we name it dft , so we call the dft and i pass it the fragment of the sound , the window that i want to us and the size of the fft , which i gave the number <num> , <num> .
and then .
i can send the output valu to the dftsynth and get back the synthes sound , it ha to be normal by the window .
there is a whole bunch of normal factor that have to be us and sometim ar not so intuit .
you can check it and you can make sure that you need thi normal factor .
okai , so now from the termin , i am in the workspac , and i have thi file , the test4 there .
so i can start ipython , with the pylap command so that i get the matplotlib packag into that .
and i can run the test4 .
okai that execut that , so let's check that we did the thing right , so for exampl let's plot the x , which is go to be our input signal .
okai that's the whole piano signal , a littl bit long , more than close to <num> , <num> sampl .
no , <num> , <num> sampl .
okai , we can plot just the fragment that we chose , x1 .
okai , thi is just a fragment start at . <num> , we can also plot the window that we appli .
so , we can plot w , thi is our window that we ar go multipli by the signal .
okai , and then out of the dftanal and now , of cours we can plot mx , which is go to be the spectrum .
so thi is the posit side of the spectrum .
go from zero to half of the sampl rate , or half of the fft size , so in thi case it's <num> .
okai , and of cours we can also plot the phase spectrum .
px , and that's the phase , unwrap phase spectrum that we have .
okai so that's basic the whole thing that we want to show .
and then there is anoth file in the model's interfac directori .
that is the on that basic integr the analysi , synthesi and make nice plot .
and in fact is the on that is be call by the interfac , that we ar show in the demo class .
so thi is the dft model function file .
that again , it import all these packag the same wai that we did .
and then it ha on singl function , a main , that ha predefin variabl that of cours thei can be chang .
and that we can comput .
and then it doe the comput as we have done now , and then it plot sever figur with correct plot axi and label , etc etc .
so , i copi thi file into the the workspac .
so i have it as dftmodel function .
so if i run thi , it will execut the default paramet and it will comput and plot thi .
okai , so thi is the result of thi analysi , synthesi of a fragment of the piano and here now , it show in a nice wai , well with the label the time in second the frequenc in hertz .
and the amplitud explain in decibel , the phase again and then the output signal , which is the window version of the input signal , and of cours as we show in anoth class we can zoom in into fragment of thi to visual certain aspect of that , so we can understand , some particular harmon , how it behav .
okai , and that's basic what i want to show .
so let's go back .
so we have shown the analysi and synthesi of a sound and the code that implement that in differ version .
and so all of thi is avail in the github directori that you can find here , in the sm tool .
you download , you can look at , there is quit a bit of inform about that , and well explain .
and of cours the sound that we were us come from freesound , but of cours thei ar also within the sm tool directori so it's easi to have access to .
and , that's all .
so we did we have seen how to program the dft .
and how to us the actual exist code of the sm tool to perform the analysi and synthesi .
and hopefulli thi ha allow you to understand better the dft .
and thi will be fundament for understand the next step , which will be next week which is go to be the short time fourier transform .
we ar go to put togeth thi dft analysi into an analysi synthesi framework that realli work for ani sound , and that allow us to analyz and synthes larger sound not just small fragment .
so , thi is all for todai , and i hope to see you , next time .
bye bye .
welcom back to the cours on audio signal process for music applic .
until now we have seen how to comput the spectrum of a signal , it dtf .
but real sound can not be repres by a singl spectrum .
sound chang in time , and we need to captur thi time variat .
the short time fourier transform is our solut .
again , thi lectur is divid into two part .
so thi is the first on .
we'll first present and explain the short time fourier transform equat .
and then discuss , what we call the analysi window .
the is the short time fourier transform equat .
basic , a modifi version of the dft .
with few but import differ .
so for exampl , the input to the equat , the input signal is not just x of n , but is the multipl of w , which is our analysi window , by a fragment of x of n .
so here , x is ha an argument , that ha n , our time in that .
but also ha a frame number and a hop size .
so , l is the frame number and thi is our time in that .
so we will be iter over l , so we will be skip over time thi wai .
and capit h is our hop size , how much we're go to hop from on time instanc to the next .
so basic , x is go to be chang in time accord to l and h and then at everi time instanc , at everi l , it's go to be multipli by thi analysi window w of n .
the rest is the dft .
so the onli thing that chang is that the input signal chang .
and therefor , the output also is not a singl spectrum , but a sequenc of spectra .
there is the , x sub l , so the the variabl l is the frame number .
so that mean that the output of the short time fourier transform is go to be a sequenc of spectra .
each on of the same size and have magnitud and phase .
but , each on differ becaus the input will be a differ fragment of the sound .
step through the sound in a progress manner .
so , to emphas the idea of zero phase window , that we alreadi have talk about , from now on we gener specifi the time index to go from minu n over <num> to n over <num> minu <num> .
okai , so it's alwai center around <num> .
we don't have ani phase chang , we don't have ani kind of shift in the time and therefor in the spectrum .
the window is a wai to step through the sound , as i mention .
so , here we can see a depict of that .
and if we us the analog of imag and video , we coud relat a spectrum with a photograph , a static imag , and then the short time fourier transform with video , a time vari imag .
so , here we see in thi pictur , the whole time for for a sound at the bottom and how we ar basic step through the sound by window the sound with thi analysi window .
and therefor be abl to get all the sound as a sum of sound fragment .
okai , to better understand the effect of window a sound let's put an exampl of what happen when we window a real sinusoid and then comput it spectrum .
so we start from a real sinusoid , sinusoid we alreadi have seen that .
so it's a cosin with a frequenc index k sub <num> , and an amplitud , a sub <num> , which can be express as the sum of two complex sinusoid , on with a posit frequenc and anoth with a neg frequenc .
then if we substitut into the short time fourier transform equat thi signal and we window it , we can step through these differ step in which we first put x of n in the equat .
then we ar substitut the sum of these two complex exponenti .
therefor , becaus of the linear of the dft , we can split these into two equal equat in which in each on we have a complex exponenti as the input signal , and the amplitud can be move outsid and basic what we get back to .
is the sum of two dft of the window and with frequenc shift oper .
so basic and the end here we see that the result is the spectrum of the window , of cours , frequenc shift by the frequenc of the input signal , and multipli by the amplitud , by half of the amplitud , of the input signal .
plu , of cours , the other window at the other complex exponenti frequenc .
on is the minu frequenc and the other is the plu frequenc .
so thi will be the result of thi cosin so which is basic the transform of the window shift to the frequenc of the input signal and multipli by the amplitud of the input signal .
well with thi plot we can understand thi window process a littl better .
so on the top we have the window , and underneath is the window sinusoid that we have as our input signal , and then the transform of the window can be shown on the top , in which the transform of thi window , which , in thi case is a han window , is the magnet spectrum center around zero , and with the symmetri and with the even phase .
and now if we take the dft of the window sinusoid well , what we ar sai is basic the same shape than the window , but at the frequenc of the sinusoid , the two frequenc of the sinusoid , the posit and the neg frequenc .
and at the phase of the sinusoid too .
so we have the two valu for the two phase with these anti symmetri that is analysi result into .
so for thi discuss we can realiz the import of the analysi window in the spectrum of a sinusoid and thu of ani sound .
it's clear that we have to spend some time explain the window .
so an analysi window is gener a real function and is symmetr around the origin , and thi is the simplest window , the rectangular window .
it's time domain is noth too particular , but it's magnitud spectrum is much more interest .
so time domain it ha valu of on for the durat of the window , in thi case <num> , and the spectrum , the magnitud spectrum , ha a shape which we call it is a sinc shape , becaus the the transform is a sinc function .
and it basic could be describ in mani differ wai but we focu on two main aspect .
on what we call , the main lobe , the peak at the center , and we'll be talk about the width of the main lobe mainli .
and then , we talk about the side lobe , which ar these small lobe next to it .
and we basic focu on the level of the highest of these side lobe .
so we will be talk about the highest side lobe level .
and okai , so there ar mani window us in audio signal process and thi is the list of window avail in the scipi modul of python .
so we can go through them and we can see quit ar a varieti of window .
some of them we're not go to pai much attent to but for exampl we will be talk about the blackman window , we will be talk about the ham window , the han window .
we will be talk about the triangular window etc .
some other ar not so much us in audio .
each window can be distinguish from the other by measur the main lobe width and the side lobe level and each window offer a differ compromis with respect to these two valu .
so , let's show some of them .
so the first on is the rectangular window .
and the equat show how it's comput .
and the spectrum is what we call a sinc function .
is the sine pi  k , where k is the the frequenc index divid by anoth sine function .
so if you look in the plot the spectrum could be thought , well is the magnitud spectrum , so is the absolut valu of thi w k .
so basic , is a sine function with kind of attenu function appli to them , at the boundari .
so it result into thi shape , veri characterist shape , that's go to call sinc , function .
and talk about how to describ it we mention about the width of the main lobe and thi ha two bin , and two bin mean two sampl , and thi we have to be care becaus thi is measur when the dft is the same size than the window .
so if we take a window size of the same size of the window , let sai ten sampl , then it go to be two bin .
but gener sinc we do zero pad , then the number of bin is higher .
but thi is becaus of the zero pad .
and we normal do it in order to better visual the shape .
so in fact thi shape , ha been gener by a lot of zero pad .
so that we can have thi smooth visual .
but strictli speak , the number of bin that we refer to is two .
and the side lobe level , the higher side lobe level , is minu <num> db .
so the distanc between the center peak and the first side lobe level .
mayb , the most popular window is the han window , which is a rais cosin .
so the equat is . <num> plu . <num> of the cosin , thi rais the cosin , so it's just on cycl of a cosin .
and if we comput the spectrum it also can be express as sum of the sync function .
in fact all the window can be express , in the time domain by sum of cosin and in the frequenc domain by sum of thi sinc function .
so in thi case is the sum , in the frequenc domain of three sinc function .
and , again the two valu that character thi shape , thi frequenc domain's shape , is the width of the main lobe , which is four bin .
so , twice as much as a rectangular function .
and , the side lobe level is minu <num> decibel , so which is lower .
okai .
now the main lobe is wider and the side lobe level is is lower .
the ham window is veri similar to the han but with a small and signific differ .
it's a rais cosin with a step at the side .
by have these small step into the side we get a magnitud spectrum that maintain the same main lobe width , so that's good , it doesn't get wider .
but , in exchang , we get much lower side lobe level .
minu <num> decibel .
and thi is , as we go to see , an import thing .
the ideal is to have the lowest side lobe level and the narrowest possibl main lobe .
so , thi is a good window .
of cours , noth come for free , so the side lobe level do not decreas so abruptli , as thei go awai from the main lobe .
the blackman window is the sum of two sinusoid , and with that we accomplish a signific improv in term of the side lobe level measur .
okai , so we see the magnitud spectrum , which the main lobe is wider , is <num> bin , but the side lobe level is lower , is <num> db .
and that's good becaus that's start to be quit us valu at the side lobe level for mani audio applic .
we will come back to that .
and then final the window i want to end talk about is the blackman harri window which is a veri special on , becaus we can basic sai that it ha no side lobe .
so , it's a sum of sever cosin , in thi case is four cosin .
with differ coeffici in the sum .
and then in the frequenc domain , the magnitud spectrum , the main lobe , again , get wider .
in thi case , it's eight bin .
but , the side lobe level is minu <num> db .
and if we think about it in term of signal to nois ratio , which is a veri import factor in digit , signal , <num> decibel is basic below the nois floor of <num> bit , of the kind of signal that we deal with .
so basic that mean that these side lobe , and if we consid them as artifact or as nois , thei ar not heard .
in other window we could sai that these side lobe ar artifact that can't be heard and again we will come back to that .
and now to finish let me just compar some of these window be appli to the same sound .
so we start with a fragment of a sound , of a certain length , and we ar appli three differ window .
the first on is rectangular , the next on ham , and the final the blackman .
clearli , veri distinct spectra .
and by look at these we can see that mayb the best for thi particular analysi is the blackman .
we see a smoother spectrum .
we see these peak ar much more clearli distinct .
and in fact these peak correspond to the harmon of the sound .
okai , so thi is all and there ar a lot of refer for the topic i cover .
especi about window .
in wikipedia you can find quit a bit of inform about the short time fourier transform , about window .
juliu , in hi websit and in hi onlin book discuss thi quit a bit , so that's a veri good refer .
and the rest ar the standard credit and refer .
so thi is all for the first part of the lectur on the short time fourier transform .
we have explain the basic equat of the short time fourier transform and we have focus on the analysi window .
in the second part we will continu with thi topic .
i will see you in next class .
welcom again to the cours on audio signal process for music applic .
in the first part of thi lectur , we start talk about the short time fourier transform .
now let's continu .
we will cover quit a few topic , but each on is quit short .
we will first review the concept of the stft and analysi window .
then , talk about the window size and the fft size , then the hop size , then what we call the time frequenc compromis .
and then , onc we have cover all that , we can do the invers of thi analysi process , and we'll do the invers of the short term fourier transform .
and final we can put it togeth into an analysi synthesi system that can be us to analyz and synthes ani sound .
so we saw thi equat in the first part of the lectur .
we now know that the short time fourier transform is the time vari version of the dft .
and that window is a kei concept to understand the stft .
so for exampl in these plot , if we start from violin sound , that we can listen too .
okai , then the magnitud spectrum of on fragment of on of the frame , is quit differ , depend on the window we us .
if we us a rectangular window we can see thi first magnitud spectrum .
if we us the blackman window we can see thi second on .
okai , so now let's try to understand a few more thing about the short time fourier transform , about the window process .
so , we talk about differ type of window in the last class , but these window can be of ani size .
and what is the effect of thi size .
so , here we see an exampl of the same sound and choos the same window but with differ size .
on is with size <num> , and the other is with a size <num> .
clearli veri differ , and the result is amazingli differ .
the magnitud spectrum of the small window ha veri littl inform .
it ha veri few sampl , it ha basic <num> sampl , and in the larger window we see quit a lot .
we see a lot more detail of the sound of what's go on .
so , that's go to be a veri import compromis to be done when we us the window size .
and the phase spectrum , of cours , is also differ but a lot of these issu will be much more clear in the magnet spectrum .
so , we'll focu a lot on discuss the effect on magnitid spectrum .
okai , anoth import issu that ha a signific effect , even though it's a tini differ , is the concept of even and odd size window .
so , we can take the same window and have a size <num> , which is an even size , or we have a size <num> , which is <num> sampl less and it is an odd size .
if you look at the magnitud spectra thei basic look the same , the magnitud spectra ar the same , the differ is not signific .
but , the phase spectrum is quit differ .
in on , in the even size , there is a slope .
so , these ar by the wai , of cours , center around zero .
so , clearli , if it's an even size it cannot be perfectli center .
becaus we have to have a sampl at zero .
and then if it's even it will have differ number of sampl on the right hand or on the left hand .
in the other hand , if we have an odd size window we can have a sampl right in the middl .
and then have the same number of sampl on both side .
therefor it can be perfectli symmetr around zero and therefor get the zero phase valu that we have talk about befor .
so , whenev we can we're go to be us odd size window .
ok , the window size , ha been chosen accord to some resolut criteria .
the number of period or the resolut that we need to have .
we will , again be talk more about that .
but now we have to choos the fft size .
which is independ of the window size , becaus we have the opportun to do zero pad .
so in thi exampl we show , we start from a given window size , <num> , and if we choos the same window size than the the fft size we get the thi first magnitud plot .
and , we we see a pretti magnitud spectrum with all these peak .
that correspond to the harmon of thi obo sound .
but if we do an fft size larger .
so , we do an fft size in thi case of <num> sampl .
also , we zero padd quit a bit , is four time larger the fft size than the window size .
we see a spectrum which is much smoother and much nicer .
thi is someth that's go to be veri much desir .
someth that peopl will be look for is a spectrum that ar quit smooth so we can identifi thing much better .
okai .
then the final step of the short time fourier transform analysi loop is the advanc of the the window , the advanc of the frame what we call the hope , the hop size .
so the window advanc eight sampl after each dft .
and then , with thi equat we see the effect of thi hop .
so , by just take the window function and hop by a given h we get a function , a , that depend on thi hop factor and of cours of the window size , and here we have two exampl , two hop factor , differ .
okai , in the first on with a window of <num> sampl we ar hop a <num> time , like half of it .
and the red function is thi a function , the sum of these window .
clearli is not a veri smooth result .
it ha like thi oscil .
basic we call it a modul , that in fact will be heard in in the resynthesi that we will do with the short time fourier transform .
on the second plot we see the hop of <num> , so basic , on fourth of the window size .
and , apart from the boundari , in which we see clearli that there is the effect , kind of a distort .
all the middl is veri much like a straight line .
and thi is the kind of thing that we would like to have .
we would like that the hop doe not affect , so it can maintain an ident .
and so thi a function should be a straight line .
now , we can put all these concept togeth to analyz a real and complex signal .
like a piano phrase .
so , first let listen to the input sound okai , so , choos all the paramet in the stft it ha an number of effect in the output .
the most import on is what we call the time frequenc compromis .
on the top plot we see the the magnitud spectrum of the whole stft analysi .
so basic it's a sequenc of dft .
the vertic axi is the frequenc , the horizont axi is the time , and the color intens basic is the magnitud , and the magnitud valu in the magnitud spectrum .
okai , so here we see veri clearli the attack of the piano .
and kind the horizont aspect correspond respond to the harmon of the piano .
but on the second plot which ha a bigger window and fft size , four time , it ha <num> sampl for the window .
we see that the horizont line ar much better defin , even though in exchang of the vertic line of the attach that ar not as crisp as clear .
so thi is what we call time frequenc compromis .
if the window size small we might get a good time resolut in exchang of a poor frequenc resolut .
if we take a bigger window size , we will get a better frequenc resolut so that's what we see better horizont line in exchang of not so good time resolut , so not so good crisp attack .
as we see in thi second plot .
and then , of cours , typic we onli show the magnitud spectrum , but the phase ha also valuabl inform .
so in here we see both the magnitud spectrogram and the phase spectrogram .
in fact , what we ar see is the deriv of the phase .
and if we take the deriv , what we ar see is kind of when there is a flat region or when there is a phase that chang a lot .
so in fact here , we can also kind of see these horizont structur that relat to the stabl peak that correspond to the the harmon .
so whenev the color is more clear it mean that is more stabl .
and when we see these darker color it mean that there is a bigger slope so that there is a bigger phase chang .
so , it's a littl bit harder to read thi visual thi phase spectrum , but thei have some veri interest inform that we ar go to be us .
and like the dft , the short time fourier transform ha the invers transform .
if we do thing right we can recov the origin sound from the amplitud and phase spectrogram .
how to do that what , we're basic do is what we call overlap and ad these differ output spectra .
so , we'll be comput everi individu spectrum of everi frame .
so x sub l , and we take the invers dft of everi x sub l , and then there is thi shift and sum , which correspond to thi idea of shift and ad over the previou frame , in such a wai that we basic compens all thi windowind and we recov the output signal .
so , basic , the output frame of on singl frame is go to be thi yw sub l , which is go to be the result of on fragment of the input sound multipli by the window .
and then , the overal output sound will be the sum of thi window output fragment .
and what we see here is , in thi equat , is we identifi the effect of the window .
basic , we have thi sum over all the window and thi is the possibl distort or artifact that might be appli us thi process , so if thi sum of the window is a constant and is on , then the input will be equal to the output .
but if the sum of window is not equal to a constant , then we're definit go to have some distort , modul , that will be heard in the output sound .
so , graphic , basic , we ar just do exactli the same so is the invers process .
we ar overlap and ad everi singl fragment to recov the whole signal .
and now that we know how to analyz and synthes a sound with the stft we can build a system .
and we will show that and we'll implement that in the program lectur .
and thi is the diagram of a complet analysi synthesi system us the short time fourier transform .
so we have the input sound , x of n , then we have the window that we appli and we us to select portion of the sound .
and from thi window fragment we comput the fft and result in the magnitud and phase spectrum .
then , at everi frame we do the invers of that and recov the output sound , which is go to be a window signal .
becaus it ha the window in it .
and then with the overlap add factor .
and if we do it correctli we gener an output signal that should be ident , if the window and the hop size is correct , to the input signal .
so thi would be an exampl of a complet sound analysi and synthesi of a sound with vari time .
we start with piano sound that we alreadi heard .
we see that magnet spectrum with a given window size , fft size , and hop size .
in a wai that the overlap is correct .
we see the deriv of the phase spectrum and then we see the y , the output sound , which is the invers of thi spectrum .
and we can listen to that .
and clearli , in thi case is ident to the origin becaus we did the hop and the window correctli .
so again , quit a bit of refer ar avail on thi topic about wikipedia and on juliu' websit .
and that's al for thi class .
with thi second part of the lectur , we have complet the topic on the short time fourier transform .
we now know how to analyz and synthes ani sound .
and of cours , in the demonstr class and in the program class of thi week , we're go to put that in practic .
but even that , thi is just the begin of the interest stuff .
we will now be abl to realli do power thing .
build on top of the short time fourier transform .
so , stai with me and you will see .
see you next time .
welcom back , to the cours on audio signal process for music applic .
thi week we ar talk about the short time fourier transform and the spectrogram is basic the output of the stft , is the visual of the time vari spectra that we comput .
so , in thi demonstr class i want to us the spectrogram , the short time fourier transform , to analyz a voic sound , so that we can understand better the stft and at the same time understand better a given sound .
so we'll start with the sonicvisu .
and thi is the sound i want to analyz .
it's a note of a soprano sing , let's hear that .
okai , that's a quit high pitch sound .
and it ha quit a bit of vibrato , thi frequenc oscil that is characterist of operat sing .
and to understand a littl better the sound let's open the spectogram , so let's open the pane on the spectogram .
so here it is .
we see now clearli some inform of thi voic sound .
and we see these horizont line that correspond to the harmon and we see thi oscil , which is basic thi vibrato that is present .
to go a littl deeper , let's open anoth pane , with a singl spectrum of thi time vari spectrogram .
so let's first show in a linear scale in the horizont axi .
let's have line as interpol and the window , let's us the same window then for the stft so we'll us <num> , <num> .
okai , and thi is it .
let's mayb make it , zoom in and stretch so that we see same thing that we would see in the spectrogram , okai ?
so thi is on slice of the spectrogram , all these horizont line correspond to these peak that we see here .
okai .
and now mayb let's chang thing .
let's chang for exampl the window size .
if we chang to <num> both analysi .
okai , now what we're see is a much smoother shape .
we're not see the individu harmon .
we're just see an overal shape which basic correspond to what we call the formant , the reson of the vocal tract , which is what make us be abl to distinguish between vowel , for exampl .
so each vowel ha a characterist formant structur .
of cours if we move thing will chang a littl bit but of cours the vowel will remain the same so it will not chang that much .
if we go back to the analysi size hat allow us to visual the harmon , and when we move , well we see few more chang becaus the harmon ar chang more than just the formant .
okai , so now if we want to chang the type of window , we can go to the prefer , and in the analysi tab .
let's put thi awai from thi , here in the last option we see the window , the analysi window to be us , okai .
current is the blackman window , let's chang for exampl to rectangular window .
which is the the squar that will cut the signal , veri abruptli .
let's appli that .
okai , so clearli , it doesn't look so nice .
a singl spectrum look with quit a lot kind of nois , the nois floor is veri high .
so , we see veri few of the harmon .
and in the spectrogram we see these vertic line , which is a kind of a distort of it .
so that's clearli not that good so we definit would prefer for thi sound the blackman window .
okai , now let's do the same kind of analysi , us the sm tool .
with the sm tool we have the singl spectrum us the dft option , or the time vari spectrogram us the stft option .
so let's first start with a singl spectrum .
let's go to the soprano sound .
so soprano e4 .
okai .
then let's analyz the middl of the sound , like <num> , and let's us the same valu that we us befor .
<num> , <num> for both fft size and window size with the blackman window .
and we can comput .
okai , and thi is basic what we saw befor .
thi is the <num> , <num> sampl we have start with .
thi is the magnitud and phase spectrum .
and we see clearli the peak correspond to the harmon .
and in here we see the phase spectrum which we didn't see befor and also we see the invers of thi .
so , thi is the window signal that we gener back by take the invers fft of thi spectrum .
and of cours we can do the same thing .
we can chang window , for exampl if we chang the window size to <num> .
and also the fft size , <num> , and the same locat we comput , we see much less sampl .
the spectra ar much smoother , less inform there .
on advantag of cours , that thi interfac will have is that we can independ control the window size from the fft size .
so , we can put the fft size <num> , <num> and mayb a window size not that larg , mayb <num> .
and we will comput , okai .
we ar take less sampl than befor , but still the frequenc resolut is quit good , it's quit smooth becaus we have been do zero pad and so the shape of the spectrum is quit nice .
let's look at all thi from the short time fourier transform perspect , from the spectrogram .
so we will get the same sound .
okai and again let's put <num> , <num> , <num> , <num> , and the hop size , ha to be at least much smaller than the window size , in a wai that the overlap add factor , add correctli .
so for <num> , <num> , in the blackman window , at least we need on fourth .
so let's put <num> .
and we comput .
okai ?
and thi is the result .
so we have the input signal , the magnitud spectrogram , the phase , the time vari phase and the output sound .
and the output sound is veri much the same than the origin , becaus we have done a good reconstruct with a good overlap .
howev , if thi overlap is not correctli set , for exampl let's put the same than the window size , for exampl , <num> , <num> , and let's comput it .
well , clearli now there is someth wrong in the output signal , and if we listen to it okai ?
of cours , we see thi modul , that is at the frame rate .
becaus we ar not overlap correctli , so at everi frame we see a burst of sound .
and thei don't balanc out by the overlap factor .
so , we definit need to have a much smaller hop size .
and anywai , that's all i want to sai .
basic , i encourag you to plai around with these paramet .
you can chang the window size .
you can chang the fft size , the hop size , the type of window , and in between the dft and the stft , i believ you can get a good grasp of all these differ paramet and the effect thei have in the visual of the spectrogram .
and also in the reconstruct of the signal .
so let's just finish and okai .
todai basic , we have us sonicvisualis to analyz a voic sound and to visual the spectrogram and the individu spectrum .
we'll have also done the same thing with the interfac of the sm tool and of cours we have us thi sound , a soprano sound from freesound .
so thi hopefulli ha given you a more practic view on the stft .
and ha allow you to understand how us might be to us thi type of techniqu to visual a particular sound .
in thi case a soprano sound .
of cours thi is just the the begin of thi more analysi , thi more complex analysi .
so in next , in next demonstr class , we're go to analyz a more complex sound .
and we will see how we can analyz time vari sound that have much more structur and how to us these spectrogram analysi to get some insight on that .
so thank you veri much for your attent and i hope to see you next class .
hello .
welcom to the fourth week of the cours on audio signal process for music applic .
and in thi demonstr class i want to continu what we start in the last on , which wa to analyz a sound , in that case , a sound of a soprano , us the short time fourier transform , the topic of thi week .
so in thi lectur i want to analyz anoth sound .
a sound that can give us anoth view of the short time fourier transform .
so let's open the sonicvisu and thi is the sound we ar go to analyz todai .
and thi is the sound of a piano .
and so let's let's listen that .
okai , so thi is a veri simpl piano phrase , quit clear , five note .
so let's go directli to the sm tool and let's go to the short time fourier transform model .
so let's go to the piano sound .
is here , piano . wav .
okai .
and now let's decid about the paramet .
okai , in the last class we mention that the blackman wa quit a good choic for what we were do , so let's keep it .
the window size , okai , thi is not as high pitch as the as the voic so we would need quit a bigger window size .
so , i don't know , let's start with for exampl , let's sai <num> .
thi is an odd size window and thi is someth that we will , whenev possibl , we will do .
if we take window with an odd size that mean that thei can be center around zero and especi for the phase analysi , that's go to be veri conveni .
so let's now us that and let's take that as a habit of us alwai odd size window .
the fft ha to bigger than that .
and of cours , normal now we will be alwai be us power of two , so that is effici and you can us the fft algorithm .
so the power of two bigger than <num> is <num> .
okai ?
that's a good size .
on the hope size ha to be , for the blackman window , ha to be hop so the window overlap correctli .
so let's sai , thei have to be , at least , on fourth of <num> , <num> , so that would be around , let's sai <num> .
okai .
that would be around on fourth .
and let's comput .
okai .
thi wa the input sound , the magnitud and phase spectrogram and the output reconstruct .
so let's first just listen to the reconstruct .
okai , that's pretti good .
so , i guess we haven't lost ani inform from the analysi so that mean that the hop size and the window size were chosen correctli , so that thei overlap correctli .
and well , in the phase spectrum we see it look like veri minimalist , but it's quit interest .
we see thi veri clear vertic line .
and thi correspond to the attack , basic , thi mean that dure these attack , the phase is quit disrupt .
it's quit chang .
there is a quit big transit there .
that's someth that we see veri clearli in the phase inform .
and in the more steadi , dure the note , we see more of these horizont structur .
that mean that the harmon maintain a kind of a phase continu , that can be identifi in the phase spectrogram .
in the magnitud spectrogram , we see well , we see veri clearli the harmon .
these red line and we see that , as the sound evolv , piano be a percuss instrument , in the attack there is more energi , and so there is more harmon , and as the time evolv , the harmon ar decai and especi thei decai , the high harmon , and the low harmon , ar stai more .
we also see quit clearli , the attack of the sound and what is go on dure the attack , so that's that's quit interest .
okai , now let's , zoom in and let's go into some detail of that .
so let's us the option of thi figur of do zoom into rectangl .
and let's just take thi middl note , the fourth note , from a littl bit befor the attack to around when the note end , okai .
and that's that's what we're get .
and what we're see in fact is the discret of the analysi .
we have zoom enough , so that we can see thi vertic kind of quantiz , these vertic bar .
thi correspond to everi frame , everi spectrum , comput .
so , at everi bar correspond to the number of sampl of the hop size .
so thi wa these <num> sampl , that we ar hop from on frame to the next .
and vertic , we also see thi kind of discret , these horizont line .
that ar ar more narrow , becaus we have taken quit a bit of sampl in the fft .
we have taken <num> sampl .
so that's , we have a pretti good frequenc resolut .
let's comput with a differ set of paramet .
for exampl , let's us a window size which is smaller .
for exampl , let's us <num> sampl .
and let's us an fft size correspondingli smaller .
it doe not have to be that big , so let's sai <num> .
and of cours the hop size ha to be accordingli to the window size , at least on 4th .
so let's us <num> .
and now , let comput it .
okai , it take a littl bit becaus it of cours , be the hop size smaller , it ha to comput more fft's .
and thi is the what we get .
basic we , we're visual a similar thing , the analysi and then the synthesi , and the synthesi is go to be pretti good .
let's listen to that .
sinc we have maintain the same relationship between the hop size and the window size , .
the ident is preserv .
so , the output sound is ident to the origin .
but now let's zoom in to the same region that we zoom befor , to try to understand the differ .
let's get a littl bit befor the attack , and let's get a littl bit of the steadi state .
okai .
and let's compar it with the previou on .
okai , thi wa the previou and thi is thi on .
well , quit differ .
if we mention what we were talk about befor , the concept of the vertic and horizont line , in term of the vertic line we see them narrow .
there ar more frame per second here .
so , the resolut , the time resolut , is bigger .
okai ?
so we see more thing , in term of what how thing evolv in time .
in exchang , at the vertic axi , the frequenc resolut , is wors , becaus the fft size wa much smaller .
therefor , these box ar kind of larger in the vertic axi .
so , we see less inform in the frequenc resolut domain .
and thi is at the core of on of the thing that ar fundament for the short time fourier transform , is what we call the time frequenc compromis .
in the first case , we had a good frequenc resolut and a not so good , time resolut .
in exchang , in thi second exampl , we have a pretti good time resolut , but not so good frequenc resolut .
and that's a quit import consider to take into account when we analyz the sound , and to decid , what is the best set of paramet for a particular sound .
okai .
now , let's go into on aspect , to the attack , and try to understand some aspect of thi sound by look at thi find spectrum analys that we have start to do .
so let's , for that , let's do the dft .
okai we will just comput the dft of on locat at the attack .
okai ?
the attack , more of less it wa around , let's see , it wa <num> . <num> .
that's kind of where the attack is .
and let's keep thi same resolut that we have .
so let's keep the <num> and let's have the fft size <num> .
and let's us the piano sound .
okai , now , we will comput it .
okai .
thi is the begin and we see here is the attack of the piano .
so we see quit a bit of thing go on here .
the phase and the reconstruct .
let's zoom into the begin .
so , let's just get magnitud spectrogram up to , let's sai , well let's get up to <num> , <num> hertz .
okai .
so we see quit a bit of thing .
let's now recomput with the same paramet , but a littl bit beyond the attack .
so when more is a steadi state .
so let's sai <num> millisecond after , so <num> second and <num> , with the same paramet .
okai .
and thi is anoth analysi .
and let's again zoom into the same region .
let's just zoom into the region that goe until <num> , <num> hertz .
and that we get all the inform .
okai .
and let's compar it , and let's see if we can understand what is is go on , what is go on at the sound level .
all right .
thi wa , the top is the attack , the bottom is the more steadi state .
in the time domain clearli , we see the differ .
in the frequenc domain i believ we can see also significantli differ .
for exampl in the attack , the harmon ar not so well defin .
becaus it's the begin of the sound the harmon have not been start complet .
instead , in the steadi state , these peak ar much more clear , much more resolv .
okai ?
then anoth thing , is that , in the attack , kind of the nois floor , basic the energi or the high frequenc , is higher .
so the high frequenc ar much louder , than or at least substanti louder than dure the stead state , in which , ar the lower harmon ar clearli louder .
okai , so thi is a good wai to try to understand a particular sound , a particular fragment of a sound and do some analysi us the short time fourier transform that give us some insight into the sound .
okai .
so that's basic all i want to sai .
so we have been look at the at a sound , in thi case the piano sound , us the sm tool , and of cours , thi sound is avail on the freesound .
and hopefulli thi ha given you anoth insight into the the tool we ar build .
in thi case , the short time fourier transform .
but at the same time ha given you some insight into the piano sound .
and i believ it is a quit interest instrument and sound .
and us these tool we can appreci quit a bit of it .
so anywai , so that's it for the demonstr of thi week .
so , i hope to see you next class .
thank you .
hello .
welcom back to the cours on audio signal process for music applic .
thi week we're talk about the short time fourier transform .
and on of the fundament element of thi transform is the analysi window .
so in thi program lectur , i want to talk about window but from a program perspect .
so let open at text editor gedit , in which i type a script that , what it doe is to get a window .
in thi case a han window .
and then it comput the spectrum of the window .
but sinc i had to do all thi zero phase window , and center thing around zero , and zero pad at the end the code is go to be longer than what it could be desir .
so let's go through the code and talk about the main aspect of it .
well , first we have the packag that we need .
we import numpi , scipi and matplotlib .
then we have the line that relat to the window .
so we defin the window length .
in thi case <num> .
and , and we keep that as m , capit m .
then we call function get window .
which it ha two paramet , the name of the window and the size .
so , the window i chose is the ham window , which is the rais cosin function .
and then , i need the variabl that keep the middl of the window inform .
and it ha to handl thi even and odd situat .
so the middl can be differ , depend of even an odd size and so the two side might have a differ number of sampl .
okai .
then we need to prepar the window for comput the fft .
so to place the window at the 0th locat .
so what we ar go to do is we creat a buffer , of the size of the <num> that we want to comput , in thi case , <num> sampl .
and then , we place the window around the 0th sampl , okai ?
so , we take the second half of the window and place it at the begin .
and the first half of the window and place it at the end .
then , we can comput the spectrum of thi buffer .
okai ?
so we'll comput the buffer us the fft , algorithm .
and then , we convert the spectrum into absolut valu and phase .
the absolut valu , in order to convert it to decibel , which is the wai that we like to see the inform of the magnitud .
we have to make sure that there ar no zero so that the log of zero is not there .
so we will have to check if the absolut valu is below thi epsilon valu , which is the minimum valu we can have in python .
so that's why we have thi three line of code .
and then , we comput the angl of the complex valu .
and then in order to show it better , to displai the spectrum , the magnitud and phase spectra .
and see it center in the middl , let sai , of the arrai , we undo thi zero phase window thing , so that we place back the data in the middl of the arrai .
that's easier to visual .
okai , let run it .
okai .
so we ar in ipython and with pylab in it , so we have the matplotlib packag alreadi in it and we can run the script .
okai , that's it .
and now we can start plot thing that we have comput .
for exampl , we can plot the window .
okai .
so thi is the han window , which is thi rais cosin go from zero to on and the <num> sampl we have comput .
then we can plot how thi window ha been place in the fftbuffer .
so we can plot the fftbuffer .
okai .
so here , the window is center at zero , so we have the second half from zero to half of the window and the first half right befor the <num> valu of the fft buffer .
okai ?
and now we comput the fft and we can plot the magntid spectrum result from that .
okai ?
so thi is the magnitud spectrum .
again center around zero .
so , here we have the posit frequenc valu and in the second part we have the neg valu .
so , a better wai to displai that is to move thing around and locat the main lobe in the center so , that's what we did , and mx1 ha the inform in the center .
okai ?
and if we plot the phase we can also show , the locat of the phase .
and here what is import , of cours , ar the phase in the middl .
and here we have thi 2pi discontinu , but basic , everyth is zero , modulu 2pi .
and it's clear , it's good , becaus that mean we've center the window around zero , and therefor we have , what we call a zero phase window .
okai .
in order to visual the x axi better , i here type some command , to plot in a wai that the axi ar better shown .
so here what i did wa to plot against an x axi arrai .
that ha been normal , so that the zero pad doe not affect .
so , we divid by n and multipli by m , so we actual see the sampl , let's sai , the sampl with respect to the window .
and i also have normal the magnitud so the maximum is zero decibel .
and i am onli plot the valu that go in the x axi from minu <num> to <num> and the db valu i am plot from minu <num> to <num> .
okai ?
so now , if we run thi script , with these line ad .
well , we're see the magnitud spectrum of the han window , but with an x axi that show a center around zero and decibel start from zero .
so now we can check the valu we talk about , that describ the window .
we mention that the main lobe , the width of the main lobe is an import characterist of the window .
and in here we can see if we look on the bottom right side , where our x valu is of the cursor , and we can see that thi main lobe sort of deep is at minu <num> .
and thi other on is at <num> .
so clearli , thi main lobe at thi locat , the width , is around four sampl , what we call four bin .
and thi is what we mention , about the han window .
and then also we talk about the sidelob level , the highest sidelib level .
and here again , we can put the cursor at the highest sidelob level and it tell me kind of the valu that thi ha and it's around minu <num> decibel , which is the kind of thing that we mention .
okai .
so now , we can keep chang the window and for exampl , we can put instead of the hannind , instead of the han we can put the ham .
and comput the same script .
and okai , that's a differ window .
and if we can measur the main lobe width , we see that it also ha four sampl but now , the side lobe level , is much lower .
so the highest side lobe , is around minu <num> decibel , which is the kind of thing we mention in the theori class .
okai .
and if we go to anoth window , for exampl we go to the blackman window .
blackman window and we save it and run it .
okai .
well , ye , that's what we saw in the theori class and now the main lobe is wider .
it's around six bin and the side lobe level is much lower , around <num> decibel .
and then , final , the last window that we also talk about wa the blackman harri window , blackman harri window that we can comput , and if we run it .
okai .
so now , in fact we ar not see the side lobe and thi is becaus the rang we ar specifi doesn't even reach where the side lobe ar .
so let's chang the displai and let's chang the axi .
instead of have minu <num> , let's put at least minu <num> , so that when we show it , now we ar see the side lobe .
the highest side lobe is around minu <num> decibel .
and now , the main lobe , is quit wider , is around eight bin .
okai .
so thi is a good wai to visual and try to understand the window .
and so , pleas feel free to plai around with that .
now , i want to do it but with sinusoid .
so to analyz a sinusoid that ha been window , and thi is anoth script .
thi is much shorter becaus instead of call the fft and worri about all thi center around zero , and worri about the zero pad , etcetera .
i call directli that dftanal function that we have in the sm tool directori .
so , now , what i do is i specifi the directori of the model where i have all the model of the sm tool .
and i import the dftmmodel file .
okai ?
so that , i can call thi dftanal function that receiv as input the signal , the window , and the fft size .
and automat doe all the oper that we just show in the previou script .
okai , so in thi script basic what i do is i get a sinewav , with a given frequenc , in thi case the frequenc is <num> , <num> hertz .
of cours , a sampl rate of <num> , <num> and i comput <num> sampl of a sinusoid which ar basic go to be the same length of the window size i am us .
for exampl , in thi case , i am us the ham window .
but mayb let's chang it and let's us the , i don't know , for exampl there the ham window .
okai .
and now , we comput the analysi .
and here i also displai , in a wai the output , so i center everyth and talk about hertz .
so we're go to displai onli the posit part , becaus the dftanal , onli comput the posit part of the spectrum .
and then i will be displai it show it in hertz .
okai .
so let's execut thi file .
test1 .
okai , and thi is the sinusoid of of what i have analyz .
and thi is the the shape of the window , in fact .
so thi is thi , prove what we talk about in theori that , when we analyz a sinewav and we multipli it by a given window .
in fact , what we're see in thi spectrum , is the transfer of the window , center at the frequenc of the sinusoid , okai ?
<num> hertz , and with the amplitud of the sinusoid .
the amplitud in thi case wa normal , so it is not here an import thing , but we would also see the amplitud of the sinusoid .
and of cours we see the standard characterist of the window , and here the x axi is in hertz .
so we need to understand the relationship between frequenc in hertz , and all these other valu , the bin that we talk about .
and of cours if we chang the window and we comput the , like the on we mention , the blackman harri .
okai , so now , we do thi comput .
okai .
and now , we're see , again , the blackman harri window , the magnitud spectrum , but center at the frequenc of the sinusoid .
okai so that's basic all i want to talk about in thi lectur .
so we have been us some packag from python .
and also of cours , we have been us the sm tool , in order to get dft analysi code from that .
and that's all .
so we , we have been focus on on aspect of the short time fourier transform , which is the analysi window .
which is a fundament element and unless we understand how window work is go to be veri difficult to understand how spectrogram , and how the short time fourier transform and other spectral analysi system work .
so , pleas make sure that you understand the concept of window and how it affect when either by itself , when you see the spectrum , or when we window a particular signal .
and therefor , so how we see the spectrum of a particular signal have been window , in a certain wai .
so thank you veri much .
and i hope to see you in next program class that we will basic put it togeth , togeth with the whole code of the short time fourier transform and we will be abl to understand the whole implement of the stft .
so , see you then .
bye , bye .
welcom to the cours on audio signal process for music applic .
thi week is the week of the short time fourier transform .
and in the previou program class , we talk about window .
we talk about how to get a window , how to displai it , how to comput it spectrum and how to visual the kind of thing that we talk about in the theori class relat to window .
and now in thi second program lectur i want to build the whole short time fourier transform system and talk about the implement we have in the sm tool packag .
so we'll basic implement the whole stft equat shown here .
so basic we'll be iter over a sound , x , and we'll be comput at everi frame , so the frame number is l .
so we'll be comput frame of the sound at each frame locat , we'll be multipli the fragment of sound with the window , w , and therefor at the end we'll have a sequenc of spectra , a sequenc of , in thi case , complex spectra .
and we see it as a block diagram so we start from the signal x of n , we multipli on fragment with our window , so we get a window signal .
that's what we comput the fft of and then of cours we comput the magnitud and phase represent of the spectrum and then we can undo the whole process by call the invers fft , therefor obtain the window synthes sound and with what we call overlap add strategi we will be ad togeth these fragment into a whole signal .
and hopefulli if we have done the thing correctli , especi if we have chosen the window of the hop size correctli , thi output signal will be ident to the origin .
so let's look at the code of the stft that we have in the sm tool packag .
okai , so thi is the file call stft . py , and in it we have three function .
on , there is the stft , that doe the whole analysi and synthesi .
and then we just have the analysi and synthesi separ , so sometim it's us .
so we have the stftanal function , and the stftsynth function for the invers part .
but let is talk about the complet analysi synthesi .
so let's talk about the stft function .
as input paramet , it ha the x , our arrai with the complet sound .
the , we need to know the sampl rate of that sound .
then , we need to pass it the window we go to be us , w .
then the size of the fft , capit n , and the hop size , how ar we go to hop through the sound .
and basic , the core of the function is a loop .
in thi case a while loop that keep advanc through the sound by a pointer , thi pin .
pin is a pointer that keep advanc by h , by capit h , by the hop size .
so pin get advanc at everi iter by capit h until it reach the end , which is the end of the sound .
and within that we basic choos the fragment of the sound that we want to analyz and then we call the dftanal function .
so thi is the function that alreadi discuss last week , which is the dft model .
it come from the packag dftmodel , okai .
so we don't have to worri now here about the zero phase window , about the zero pad etc , everyth is done within thi dftanal function .
and it receiv the fragment of the sound , the window , and the fft size and it return the posit side of the magnitud and phase spectra , okai .
after that we can do the invers dft , also call the dftsynth function .
and therefor that will return a window fragment of the sound and then we can put it all togeth overlap and ad the sound and creat the overal output arrai , okai .
and apart from that the rest ar basic initi and wai to better analyz the sound and the to make sure that the pointer start at the veri begin of the sound , and can end at the veri end of the sound .
so i am not go to go into detail of that , but pleas , feel free to go over that and understand thi code .
so now we have thi function , that return a sound .
and let's us it , let's write some code to us thi function .
so thi is a littl script that i wrote to call the stftanal in which i first have to get all the packag requir includ the actual stft function .
so thi come from the model directori .
and then , i can get a file , defin the window , and then defin the size of the window , the fft size and the hop size .
and now we can read the file with wavread , get the window and call the stft function and thi will fill up two variabl , mx and px which will be includ the sequenc of magnitud and phase spectra .
okai , so let's let's run it .
let's , run test3 .
okai , that's quit quick so it analyz the sound and it obtain all these variabl , so let's go through them , so mayb the first thing we can do is to listen to the sound so we can just do the exclam mark , plai , and the name of the sound , which is thi flute sound .
and we can listen to that , okai , so thi is the sound of the flute .
and now we can go through the differ variabl that we have comput .
so , for exampl , the first on is the sound that we read , the x arrai , so thi is the whole sound , the arrai of the whole sound , so it's more than <num> , <num> sampl .
okai , then of cours we can plot the window we comput , which is a ham window .
and then we have the output arrai , of magnitud and phase , but those ar veri big variabl , veri big matric of valu .
so in fact if we put mx . shape , it will tell me the dimens of the arrai , basic the number of frame and the number of sampl in the spectrum that we have .
so in fact , thi tell me that we have <num> frame , and each frame ha <num> sampl .
these <num> sampl ar the sampl of the magnitud spectrum , of half of the magnitud spectrum .
so now we can access individu frame of that , so if we put for exampl mx , and we access for exampl the frame number <num> , and we plot the whole spectrum of that 50th frame .
these ar the valu of the magnitud and of cours , we can , if we call the function plot with that variabl , we will plot the magnitud spectrum of that particular locat , okai so thi is the flute sound .
we see the harmon and we see how the higher valu ar much softer and it's quit noisi .
of cours we can also plot the phase spectrum of that same locat .
and thi is the phase , unwrap phase , so we can see all these nice look phase shape .
okai of cours we want to visual the whole spectrum so in order to visual the whole spectrum the , the plot command that can do that is what is the function is call pcolormesh , pcolormesh .
it plot a matrix as a kind of three dimension shape so you if give it mx .
it will basic plot all the frame .
but it mayb plot in in a differ wai than we ar accustom to becaus the vertic axi is the time .
so in fact we see time , go from bottom to top , and the frequenc is on the horizont axi .
in fact , a better wai to plot thi with with pcolormesh is to transpos it first , so we can call the transpos function , so thi will transpos the mx in a differ wai , so that we can see it in a more meaning wai .
so now we see time go from left to right , and frequenc go , or the frame , frequenc go from the bottom to top .
okai , so that's basic how we comput the magnitud and the phase spectrum us the stft and how we can plot it .
and there is a function file that implement all that and make plot in a nice wai and that is the stft underscor function and thi is the on that is call from the graphic interfac that we also us .
and here it ha on function call main and it goe through the kind of thing we did and it doe both the analysi and synthesi .
okai , so the main ha as input valu the input paramet and then it read the sound file , it get the window .
it perform the analysi , thi is exactli what we did now .
but then it doe the synthesi , and it output the synthesi file into a locat , with a given name and then it write it , okai ?
by the wai , here thi file i just copi it into the workspac , but i had to chang the rel path of a number of thi name .
so for exampl , i had to chang the path of the softwar model or i had to chang the output file name becaus in here it wa us a particular directori to store the sound file , here i just write it directli on thi directori .
okai , so let's execut thi .
i have it in thi directori .
so it's stft_function so i can just run stft_function .
okai , and it plot , well , the input sound , the magnitud , the deriv of the phase , and the output sound .
and thi ha creat a file which is call , what is it call ? , is call piano_stft . wav and of cours from here again i can plai it so i can sai plai stft , no piano , piano_stft . wav .
okai , and it's basic the same than the origin sound .
of cours now from thi file i can realli chang and make the thing differ if i want , so feel free to chang how the plot ar shown .
but thi is a quit nice wai to plot the thing with the correct axi , with the correct label , and with the correct scale , so that we can better visual the analysi and synthesi us stft .
and that's all i want to sai .
so basic we have gone through the short time fourier transform , the implement of the short time fourier transform .
so make sure that you understand the actual equat and what the signal process consider that ar involv in that .
and then , of cours , we us a number of packag from python , togeth with the sm tool , that we have alreadi develop and implement the dft and stft so we have been call those function .
and that's all , so with thi program class , hopefulli , you have gotten an idea of how to implement the stft and how can we us the function of the sm tool to actual , adapt it to our own particular need .
so pleas feel free to plai around with that and make sure that you understand the stft also from thi program perspect .
and that's all , thank you veri much .
welcom again to the cours on audio signal process for music applic .
last week we talk about the short time fourier transfer .
that offer a sound represent from which we can synthes sound without lose ani inform .
and at the same time it's a good tool for understand , describ and transform sound .
thi week , we go a step further in the direct of obtain a higher level represent , that in exchang of lose a bit in term of the ident properti of the stft , we gain quit a lot of flexibl , and level of abstract in the represent .
thi is what we call the sinusoid model .
and we'll cover thi topic in three theori lectur .
so thi is the first on .
you will first present the model , the sinusoid model .
and then talk about how these sinusoid can be express in the spectrum and how can thei be identifi in what we call spectral peak .
so the model is quit simpl ; it's just a sum of time vari sinusoid .
so thi equat , we have seen it befor .
but here we ar emphas two aspect .
on is the idea of sum a finit of number of sinusoid , capit r , so we have capit r sinusoid .
and each of these sinusoid is time vari .
it ha an instantan and a frequenc valu that chang in time .
so it chang as a function of the time index n .
but , we're interest in model the sinusoid in the frequenc domain , in the spectrum .
so let's see how that look like .
again , we have seen these equat befor .
so if we start from signal x , that is a real sine wave , and then we take the dft of the window version of thi sinewav .
we see that , of cours , the sinewav can be express as the sum of two complex sinewav , that ar then multipli by the window we us .
and , be the sum of two exponenti sinewav , we can split that into two sumatori , separ dft .
so we'll have a dft of the neg frequenc and a dft of the posit frequenc .
each on , again multipli by a window and these complex exponenti can be group togeth and basic thi is the dft of a shift version of the transform of the window .
okai so basic , at the end we see that the first summatori is the dft of the function w , it's a big w , and the frequenc index is shift .
so we have shift the window , and is scale by the amplitud of the cosin , by half of the amplitud of the cosin .
and the other element is the the same window but shift by the posit frequenc and also scale by the same amplitud .
so if we start from a sinewav , and we want to show it , the plot of on singl spectrum of thi window sinusoid , we can see it like thi .
so thi is the posit spectrum , so we don't see the two window , we onli see the posit on .
so we're see the posit frequenc and so the contribut of the posit exponenti .
and we see the shape of the window that we us but of cours center at the frequenc of the sinusoid , which is <num> hertz which of cours we can listen to the sine wave .
and thi is it spectrum , so a peak center at <num> hertz and the phase , that dure the main lobe is flat , that correspond to the phase of that sinewav at locat zero .
let's make it a littl bit more difficult .
what happen when our sound is made up of two sinewav .
so these ar two sinewav , on at <num> hertz , the other at <num> hertz , togeth , and we can also listen to that okai so , clearli it sound like a modul signal .
and in the time domain we can see these modul .
we see the low frequenc , which is like the modul , and the high frequenc .
and if we comput the spectrum of that , the posit part of that , we ar see the two contribut of the two sinusoid , so see the two peak of the two sinusoid .
and in the phase we see the phase of these two sinusoid .
and now let's show an exampl of a real sound , a sound that includ mani sinewav , like the sound of an obo .
let's listen to the obo first .
okai , so thi is an obo plai , the a4 note so which is around , fundament around <num> hertz , and in the spectrum we clearli see all these sinusoid which ar the harmon of the sound .
here we ar onli plot the first <num> , <num> hertz .
so , we're onli see the first few harmon , thi sound ha mani more harmon .
but thi a good wai to zoom into these shape of the window and also we see the phase spectrum of that .
but , how do we detect the frequenc , amplitud and phase of each of the sinewav ?
a simpl wai to identifi a sinusoid in the spectrum is by just focus on the spectral magnitud , on it locat and on it height .
so the locat is the frequenc and the height is the amplitud of the sinusoid .
so , therefor , we consid a sinusoid as a peak in the magnitud spectrum .
and , of cours , the issu is that the resolut of a magnitud spectrum is is discret , is finit , and the maximum resolut we'll be abl to get is half of the distanc between two frequenc sampl , between two bin .
so , that's the maximum frequenc resolut that we'll get in measur a sinusoid .
but we can do better than that .
and , a wai to do better than that , and relat to thing that we have alreadi mention , is the idea of zero pad and of spectral interpol .
so we'll be abl to do zero pad to get a bigger fft , so that we get more sampl .
and we can also do interpol directli on the result sampl to even refin the valu of the frequenc and amplitud valu .
to detect the spectral peak we have to understand the effect of the window and the most import factor is the window size .
so , if we have a particular window , and on import concept is the bandwidth of the main lobe in the spectral domain .
so the bandwidth of the main lobe is b sub f , express hertz , so that would be the main lobe bandwidth of a window in hertz .
and that's defin as the product of b sub s , so the main lobe width of the window express in sampl , multipli by the sampl rate and divid by the window size .
so that would be the width of the main lobe , and then if we consid a particular delta , of the distanc between two frequenc that we want to resolv , so we have two frequenc f sub k plu <num> and f sub k .
so the absolut valu of the differ is the delta frequenc that we want to resolv .
so what would be the window size , capit m , so that two main lobe of the window ar disjoint ; so that we can see these two frequenc as separ peak in the spectrum .
so thi equat here show what ha to happen .
so m ha to be bigger or equal than b sub s , so the number of sampl of the window , in the main lobe , multipli by the sampl rate and divid by thi delta .
or , we can also chang thi delta as the absolut valu of the differ of these two frequenc .
but , in mani case thi differ between the two frequenc correspond to the fundament frequenc , becaus if it's a harmon sound the distanc between two consecut harmon is equal to the fundament frequenc .
so if we consid the fundament frequenc thi delta that we want to be abl to discrimin , then the bandwidth in hertz of the main lobe of the window ha to be smaller or equal than thi fundament frequenc .
so , we see these lobe separ .
and therefor , capit m , the window size , will have to be bigger or equal than b sub s multipli by f sub s divid by f sub <num> .
or if we express the period instead of the fundament frequenc , we express the the cycl length as the period in sampl , then thi m ha to be big or equal than b sub s , multipli by the period .
and the period of the harmon sound express in sampl ; which is thi capit p .
so let's show an exampl , let's start from a given window , like the ham window , that b sub s is equal to <num> .
so the main lobe width is equal to <num> and we have a given sampl rate , and we have two particular frequenc that we want to distinguish , the on we show befor , <num> hertz and <num> hertz , so the differ is <num> hertz so we can calcul capit m that allow us to distinguish these two frequenc .
so capit m will have to be bigger or equal than b sub s , <num> , multipli by sampl rate , <num> , <num> , and divid by thi differ , the absolut valu of thi differ , which is go to be thi <num> hertz , and that m will be <num> , <num> sampl .
so if we take <num> , <num> sampl of thi signal and we comput the dft of , with some zero pad so that we see a smooth spectrum , we see thi magnitud spectrum .
clearli , we see two clearli distinct peak .
each on correspond to the transform of a ham window , and of cours in the phase spectrum we also see the correspond phase .
and let's see what happen with differ sound .
so , for exampl , if we have the sound of an obo , that ha a particular frequenc , which is <num> hertz , what should be the m , so if we take an m of <num> sampl , these <num> sampl basic correspond to four period of thi obo sound , okai ?
and then , so , if we comput the dft of thi signal , multipli by a ham window , and again with zero pad to get n equal to <num> , we see these harmon quit clearli separ , so each harmon correspond to on main lobe of thi ham window and thei're quit clearli on after the other .
but now , let's see if we increas thi window size , instead of have thi <num> sampl , we have twice as mani , so we have <num> sampl , and then we do the same thing , we appli the ham window and then we take the fft which is larger , we see thi spectrum .
and so here becaus we took more sampl , the the distanc that now we can discrimin is larger .
so in fact , we see that the main lobe ar narrow than what we even need , that is , we even see the side lobe in between the two main lobe , becaus we took a bigger window size and therefor we ar abl to discrimin even more than the fundament frequenc .
on the topic cover until now there ar quit bit of refer but start from thi lectur on the techniqu ar more specif to music applic and quit a bit less ha been publish .
thi is good for me , for the cours , you have to pai more attent to what i'm go to be talk about .
anywai , so , apart from the standard refer in wikipedia , you can find , a littl bit about it .
and of cours , again , on juliu refer you can find , quit a bit more , a more in depth discuss about these thing .
and that's all for thi lectur .
we have present the sinusoid model ; a sound represent that can be built on top of the short time fourier transform .
and that can reduc the amount of the spectral inform to be consid .
howev to us it we have to understand a bit about spectra and about window .
hopefulli , you understood some of that in thi lectur .
now we have to complet the explan of how to identifi the spectral peak and how to synthes them , so thi will be cover in the next two theori lectur .
so , thank for your attent .
welcom again to the cours on audio signal process for music applic .
thi week we're talk about the sinusoid model .
and in the previou theori lectur we present the actual model and a littl bit about how these sinusoid can be , visual in the spectral domain .
so , let's continu with that .
we'll first overview a littl bit of the model .
then focu on the idea of detect peak in the spectral domain , which ar go to be our sinusoid .
and also we're go to be talk about how to track them in time .
so these sinewav vari in time in a particular sound .
so how can we track these time vari sinewav in spectrogram .
the sine model is simpl , is a sum of time vari sinusoid , and in the previou class we made emphasi on thi idea that we need to detect the sinusoid in the frequenc domain , therefor we need to choos a window size that is good enough to be abl to isol those sinusoid , or at least be abl to visual have separ peak for these sinusoid , okai ?
in thi particular case , these two sinusoid <num> and <num> , we need a window size of <num> , <num> sampl in order for be abl to have these two main lobe separ , but how do we measur the valu of the sinusoid in the spectrum ?
well , if we choos the window size correctli , as we show , we will have a peak for everi sinusoid in the signal .
then to measur the frequenc and amplitud of each sinusoid we have to just find the tip of the peak and it's height .
so we defin a peak as the locat in the magnitud spectrum .
so p sub r , the peak , is go to be the magnitud spectrum at the locat k sub <num> , when the previou locat , so the locat of the spectrum when k sub <num> minu <num> is a smaller .
and the next locat so the locat at the k sub <num> plu <num> is also smaller .
so that's go to be what we call a local maximum .
so in thi plot we see a local maxima for the differ peak , okai ?
so the cross , the blue cross , ar local maxima and also in the phase spectrum ; what we basic do is just read the locat of these local maxima in the phase spectrum .
so we have with thi procedur we have the locat of the peak , which is go to be k sub <num> .
then we have the magnitud , it's go to be mx of k sub <num> .
and we have the phase , which is go to be px of k sub <num> .
but there's a littl problem .
in fact , you can visual identifi thi problem .
there is not enough resolut .
so , on solut to thi resolut problem is to do zero pad .
we us and fft size much larger than the window size and we have been talk about that .
so for exampl in thi particular exampl , we have increas the fft size of the previou exampl by <num> .
the window size wa the same but we ad zero to the end , up to the next power of <num> .
thi result into a much smoother spectrum .
and now the local maximum , comput in the same wai , so these blue cross , ar much better .
thei're locat in , visual you can see that , thei're locat in a better place .
thei're locat in a place that look like it's more the center of the peak .
and therefor the magnitud and the phase will be better .
but , if we want a good enough resolut , we will need to increas the fft size a lot .
and that will be quit computation expens .
so is there ani other solut ?
well , ye .
we can do a cheaper interpol by us , for exampl , parabol interpol , the parabola is a function with a shape quit similar to the tip of lobe of the spectrum of the analysi window , in the db scale .
so thi is the equat of a parabola .
where p is the center of the parabola , a is the concav measur and b is the offset .
and thi is a sampl version of the parabola , so we have differ valu n .
and so , thi is veri similar to what we would see as a sampl function .
okai ?
so to perform a parabol interpret on a spectral peak we can just us the three highest valu of the magnitud of the peak .
for exampl in thi case , the k minu on , k , and k plu on locat of the mx spectrum can be consid to be the three highest valu of a parabola .
so x minu on , x zero , and x on .
and then we can appli the equat of the parabola in a wai to find where would be the center of thi parabola .
and the center of the parabola would be defin by thi equat which k sub p , which would be frequenc , or the locat of the center , would be equal to thi k , that wa the highest point , plu these valu , which is go to be the previou and the next valu comput in thi wai .
and then it's go to be veri easi to read what would be the amplitud of thi valu , so we can basic plug in the interpol k sub p into the parabol equat and obtain the amplitud , the height , of thi peak .
okai , so with thi equat , basic , we can refin the peak posit , and we can combin it with the zero pad .
so to get a much better result .
so thi exampl is exactli that .
there is some parabol interpret togeth with some zero pad .
and if you would zoom in to thi , you would see that thi is quit a bit better than the two previou exampl , the on without ani zero pad or the on with just zero pad .
thi will give us quit a good measur of frequenc , amplitud and phase of all the sinusoid present in a spectrum .
and we will get thi , so we'll get a valu of the frequenc locat of peak , k sub p , and it will be comput with thi equat , then we can convert thi k into hertz , into frequenc , by multipli by the sampl rate and divid by n .
then we can comput the amplitud , by us thi parabol idea .
and final the phase will be veri straight forward .
we can just read the phase of that locat , and thi doesn't even have to have ani interpol , by just read the closest that should be enough .
but these ar the valu of a singl frame , and the sinusoid model is about time vari sound .
so time vari sinusoid .
so how do we go about that ?
so we have to deal with spectrogram , and find time vari sinusoid , and we will defin a time vari sinusoid as a stabl peak track in the spectrogram .
so thi variabl will be constrain , and we will defin peak that evolv in time , that sort of move in time , but not so much .
and thi stabil will be measur by the frequenc and amplitud of success frame .
we could also look at the phase deriv in time frequenc , for that .
in practic we're go to just focu on the frequenc and amplitud variabl .
but the phase is also a veri interest valu to look at .
so , the condit for a peak of a frame to be part of a track is defin by thi equat .
so a peak , a particular frequenc of a peak f sub p , of a given frame , l , will be part of a track if the distanc between that frequenc and the frequenc of the previou frame , so the track is come from the previou frame , if the absolut valu of thi differ is smaller than a threshold .
and also if exist a track for a certain amount of time .
so we will be make a constraint in term of the frequenc , in term if it doesn't chang that much .
and at the same time we will make it a constraint in term of how long ha thi track been in exist , if it's too short , it mean it's like a short burst , and that's not realli a sinusoid .
so thi is an exampl of track these sinewav in a sound .
in a bendir .
bendir is a drum us in turkei and sever other place .
so it is a non harmon sound so is a sound that is quit complex but it ha partial .
it ha sinusoid and we contract them so with these algorithm , these black line correspond to the track .
but let's hear the bendir first .
okai , so it's a instrument that doesn't have a clear pitch and therefor the track ar a littl bit kind of a veri unstabl and thei keep chang , appear and disappear .
so thi is what we will find .
and also we can look at the same track in the phase spectrum .
so if we take the phase spectrogram , which is the deriv of the phase and we plot those black line , the frequenc track on top of that , we get thi result .
and it's quit interest becaus clearli we see that the black track ar in the place where the color is clear .
and these ar the locat where the phase chang less , where there is more phase continu .
so these indic that also the phase inform would be quit relev in track these sinusoid becaus the phase inform allow us to distinguish thi variabl stabil aspect of a given partial .
so sorri there ar not that mani refer on these topic , so a part from the wikipedia entri for sinusoid model , or , of cours , juliu smith discuss on spectral analysi on hi onlin book .
and that's basic it .
so thi is all for thi lectur .
we have present sinusoid model , a sound represent built on top of the short time fourier transform that reduc the amount of inform and that get rid of none relev spectral compon .
howev it us for the analysi of sound is not as easi as the us the stft .
we have to understand even more about spectra and about window in order to make good us of thi model .
hopefulli by now you ar start to get a grasp on that .
now we have to complet the explan of the sinusoid model by describ the synthesi part .
and thi is what we will be do in the next lectur .
so , i hope to see you then .
bye , bye .
welcom back to the cours on analysi signal process for music applic .
in the previou two theori lectur we present the sinusoid model , the analysi part .
now in thi third and final lectur , we will finish the topic by talk about the synthesi part of the model , therefor by gener sound out of the analysi that we did .
we will first review the model and the concept of spectral peak and spectral track .
and then we will focu on the concept of sinusoid synthesi , what is also call addit synthesi .
and then we will finish by talk about the complet system , the complet sinusoid model system , that doe analysi and synthesi .
so as we show in the last lectur , the sinusoid model consid that the sound is the sum of time vari sinusoid .
and it's express by thi equat in which the output signal is the sum of sinusoid , of time vari sinusoid .
so , a good wai to show the result of the analysi is to plot the frequenc of the time vari sinusoid on top of the magnitud spectrogram of the sound .
of cours , each sinusoid , apart from the frequenc , it ha also magnitud and phase , which ar not shown .
so for exampl in thi plot , here we ar show the spectrogram of a flute sound , that we can listen to .
and then on top of that we ar show these line , which ar the frequenc track of the sinusoid that have been identifi .
of cours , again , there is much more than that , but that's quit good compromis and it give us quit a intuit visual of thi sinusoid model .
but now from these valu , the on have analys , we want to synthes a sound .
the standard wai to synthes sinusoid is to us addit synthesi .
thi is the standard block diagram of an addit synthes , in which we have a seri of oscil .
each on , from an input of a given amplitud and frequenc , it gener a sinusoid , a time vari sinusoid , and then we can sum all these thing togeth to gener the output .
but how do we gener , each individu sinewav ?
the most straightforward wai to gener a sinusoid is to us the sinusoid function directli .
so thi function that we see here can be easili implement in a program languag like python like you see here .
so , we can we can have specif amplitud , frequenc , to control these thi function .
but thi is quit expens , especi when we deal with complex signal in which we might have to call these function hundr of time , and at everi sampl .
so let's propos anoth wai .
we can us the dft to do synthesi .
so if we start from the spectrum a sinusoid and do the invers fourier transform .
in thi equat we show how to do it .
so basic we start from the magnitud spectrum of the sinusoid and the phase spectrum of the sinusoid and we just take the invers dft of that .
so here the plot show a veri special case in which we would have the spectrum of a sinusoid that ha on of the discret frequenc of the dft , or the fft , so we just have on valu , then we just take the invers dft of the whole arrai and we get thi nice look sinusoid , of length <num> .
too bad that thing ar not that simpl .
thi onli work for these frequenc that have a veri discret frequenc , on of the dft on .
but we know , also , how to repres sinusoid that might have frequenc differ from these discret frequenc .
so such a sinusoid doe not have a singl spectral valu , it ha valu for all frequenc .
valu that depend on the window that we consid .
and then to gener the sinusoid in the frequenc domain we have to gener the transform of a window and place it at the right frequenc , amplitud , and phase .
so , in here , thi equat express thi idea , that the magnitud spectrum of the sinusoid is , in fact , the magnitud spectrum of the window , shift to the right frequenc , and multipli by the right amplitud .
and , again , the phase spectrum is also the phase spectrum shift to that particular locat .
and the plot show two exampl of two differ window .
so , the same sinusoid with a differ window appli to it , of cours , it is express with differ magnitud and phase spectra , and then when we take the invers of that we get a nice look sinusoid .
of cours , with the windoweappli to them .
but in the time domain all sampl have the same weight .
and on great advantag of the frequenc domain is that not all sampl have the same weight .
so , we might take advantag of that in order to make thi whole process a littl bit more effici .
for exampl , thi emphas the idea of the main lobe of these window .
those sampl , the sampl of the main lobe , ar the on that carri the most weight , the most amplitud , so in the exampl befor , with the ham and the blackman harri , we can now plot just the spectrum of the main lobe sampl .
and here we see the main lobe sampl with the dark red and the rest of the sampl with a light red .
and then it would just take the invers dft of just those sampl , of the sampl of the main lobe .
well , we get thi blue shape , these sinusoid , which , from a first look thei look okai , but if we actual measur the signal to nois ratio .
so , basic how thi would be distinguish from a real sinusoid .
a veri a veri synthet sinusoid that would be perfect .
we see that the ham window ha a bigger signal to nois ratio than the blackman harri window .
becaus of cours , the sampl of the main lobe of a ham window carri less weight than for the case of the blackman harri .
so in the ham window the signal to nois ratio is <num> db and in the case of the blackman harri is veri good , is <num> decibel so basic the distort , or the nois , is insignific for audio applic .
so it's clear that the blackman harri is a good choic for gener sinusoid in the frequenc domain .
we just need <num> sampl , which ar the main lobe of , blackman harri ha eight sampl , and if we just that those eight sampl and do the invers we can gener a sinewav as long as the fft we have .
and then if we want to gener sever sinusoid in the spectrum , we can just gener sever main lobe .
so from thi equat we can see that the sum of sinusoid , in the frequenc domain , is the sum of main lobe .
the sum of the main lobe of thi window , in thi case the blackman harri window , becaus , as we will see , is the on that we'll be choos .
so in thi exampl we ar gener <num> sinewav .
on and a <num> , <num> hertz .
anoth at <num> , <num> hertz , and anoth <num> , <num> hertz .
so we place the main lobe of the window in those locat .
each on with a differ amplitud .
we also gener the phase for those main lobe .
and we can just take then the invers dft of thi spectrum , of thi combin spectrum .
and we get a signal which is in fact the sum of these three sine wave , of cours , multipli by a blackman harri window .
okai , and then we can put togeth an analysi synthesi approach us thi idea .
so , we start from a sound , a fragment of a sound , in thi case an obo sound , then we comput the spectrum .
we find the locat , and for thi we can us ani window , ani dft size , ani fft size , so whatev is appropri for the analysi .
and then we basic do an addit synthesi approach in the frequenc domain , by gener main lobe from these cross valu , from these peak locat , the fft can be a differ size , the window in thi case is a differ on becaus we're us a blackman harri window , and then we do the invers of that , and hopefulli , thi resynthes sound is ident , or similar to the origin on .
of cours .
with now the idea that we have a blackman harri window appli to that .
but we have on problem and that's the problem of overlap add in the process of synthes .
the blackman harri window requir a big overlap .
if we want to gener a time vari signal , the overlap of a blackman harri should be veri high .
even bigger than on eighth of the window length .
so the solut is to undo the blackman harri window and appli a window whose overlap factor is better .
and thi is a propos approach that is commonli us .
which is , as we see in the top plot , is our synthes signal , which ha thi blackman harri window appli to that .
and then what we're go to do is divid by the blackman harri and multipli a triangular function .
but we ar go to do it on , not the whole size , but onli on half of the size .
in fact , what we ar go to do is multipli by thi third shape , so we will divid by the blackman harri and multipli by the triangular , or multipli by thi third shape that we see here .
and then the result is a similar function than the previou on , but now thi function , which is half as long , ha been multipli by a triangular function that can be overlap by <num> .
so , that's pretti good .
so , like , would be <num> of the initi size .
okai , so , thi is our approach that we will be do .
in which we can do an overlap of <num> , that's the on we requir with thi process .
so we start with the spectrum , with blackman harri window .
then we do the invers , we have the blackman harri and then undo it and appli the triangular function .
and that's it , we're done , we can do analysi synthesi , us sinusoid approach .
like we did with the stft we can put it all togeth into an analysi synthesi system .
so we start from x of n , our signal , our complet signal .
then we multipli by our analysi window , comput the fft , obtain the magnitud and phase spectrum , and now we ar start with the sinusoid analysi .
we ar start with detect of the peak , detect in the magnitud spectrum , the locat and amplitud and the phase of the peak .
and then we can track those peak in time by appli some of these constraint of continu of the frequenc valu .
so that we construct sinusoid track .
so we have a track per everi time vari sinusoid and thi is our analysi result .
we have these track of sinusoid valu .
and then we can synthesi with what we just explain in thi lectur .
so we can do it in the spectral domain by gener these main lobe of blackman harri window , which is quit effici .
we just need to gener eight or nine sampl per sinusoid in the frequenc domain .
and then comput the invers fourier transform .
and obtain the synthes , which we can undo the window of the blackman harri , appli the triangular function , in a wai that we have an overlap add process that work at <num> and it reproduc quit well the origin sound in some wai , at least a part of it .
let's see an exampl .
so thi is an exampl of an analysi synthesi us the sinusoid model .
so thi is a sound of bendir , which is thi turkish drum , thi is just on stroke of it .
let's hear that .
okai ?
and then the analysi show just the the track , the sinusoid track that we have obtain , so we see onli the frequenc of of them , plot in the time frequenc space , and then from those we can synthes the sinusoid and hopefulli recov the sound .
and let's hear that .
if you pai a littl bit of attent , well , it's not exactli the same , especi in the attack you can hear some differ , and that's on of the thing that we will be try to work on in the next few lectur .
so for the refer in thi topic , as i said , there is not much .
for addit synthesi there is quit a bit , you can look yourself in wikipedia , again on my juliu onlin book you can find some relev materi .
and thi is all for the sinusoid topic , at least from a theoret point of view .
we will also demonstr and do a more program approach to that .
in in these <num> lectur we have start from the short time fourier transform and we have seen how to analyz sinusoid on top of that .
and thi is a wai to simplifi the spectrum .
so in fact , it can be us for compress .
but at the same is a veri us represent for mani other thing .
as we will see in futur class .
so we'll continu in thi direct , toward a more us and higher level represent that captur some of the promin essenc of a given sound .
so next class we will take advantag of some of the characterist of the sound .
to appli some more constraint in the model , so that hopefulli we'll get some other aspect of thi analysi synthesi that can be of interest for mani applic .
so thank you for your attent and i see you in next class .
welcom to the cours on audio signal process for music applic .
thi week we're talk about the sinusoid model .
in the theori lectur we actual present the model and we present it from a signal process and mathemat point of view .
in thi demonstr class i want to present it from a practic point of view .
so , actual us it .
so , let's go directli to the sm tool gui and let's start with the dft model and let's open on sinewav .
thi sine wave at <num> hz .
okai , so let's listen to that .
okai , so let's us a han window , that's fine , mayb let's us window size of <num> and mayb an fft size of <num> , <num> .
we comput it , okai .
so thi is the sinewav , the magnitud and phase spectra and the reconstruct signal from the spectrum .
the sinusoid model will attempt to find the peak , the spectral peak , the height , the locat , and the phase correspond to that locat .
of cours , you will do it for the whole sound .
so we'll start from the stft .
so if we get the same sound and get the same type of paramet , <num> and <num> .
and let is just put thi half of that window , and thi will be the stft , the spectrogram .
we can listen the output right .
pretti good .
so in here we ar see thi red line which is basic the peak as it evolv in time , which is veri stabl and in the phase we see thi clear area which is the flat phase of the main lobe .
okai , but now let's go to the sinewav , the sine model and let's do the same thing .
let's open the sine .
let's us the same paramet .
<num> and <num> .
and now we start with the paramet that ar specif for the sinusoid analysi .
for exampl , we have the magnitud threshold , which is the magnitud threshold in decibel , that we're go to be look for .
so we're go to be look for peak that ar within <num> db from the <num> db , from the maximum of the sound .
we can restrict the durat of the track .
for exampl let's just put <num> .
so no restrict .
we can restrict the maximum number of sinusoid .
<num> is plenti .
in fact there is onli on .
and we can restrict the deviat from frame to frame in term of how thi track evolv .
and here we have put ten at the lowest frequenc .
and then normal it's good that thi deviat chang as the frequenc goe up .
and as the frequenc goe up it's good to increas thi deviat .
so thi is the increas factor of thi deviat as the frequenc goe up .
okai , so let's comput that .
and okai , interestingli enough , we ar see more than on line .
okai .
that's the synthesi .
we can listen to that .
that's pretti good .
it's a sinusoid .
but , in the analysi , here we ar onli see the frequenc valu of the peak .
we ar not see the magnitud or the phase , be there four line .
but clearli thei mai not be the same amplitud .
so where do these come from ?
in fact , thei come from the side lobe .
we specifi magnitud threshold of minu <num> .
and if we go back to the the signal , the dft .
and we zoom into the peak .
well , we're go to see that apart from the main peak , there is side lobe , that ar peak , and ar within <num> decibel of the maximum energi .
so therefor , these have been pick up .
if we want to not pick up these side lobe we should reduc thi threshold , for exampl , minu <num> .
and now , yeah , now there is onli on line .
okai .
let's complic thi and let's analyz a littl bit more complic signal , for exampl , two sine wave .
so , let's go back to the dft and and , let's get rid of all these window , and let's open the sum of two sinewav , <num> and <num> hz sum togeth .
and , let is , mayb , well we have to choos the window size appropri for a specif window .
and we talk in the theori class that in order to do that we can us an equat that sai that it ha to be the number of bin of the window , in the case of han window is four , time the sampl rate which is , in thi case <num> .
and we have to divid it by the frequenc distanc that we want to resolv .
in thi case , between <num> and <num> hz .
so <num> hertz , okai ?
so thi number <num> , <num> is the size of m , the minimum size of m .
if we want the two main lobe of these two sinusoid to be separ .
so we put here <num> , and we'll put it as an odd size , we'll put <num> .
the fft ha to be bigger than that , a power of two , and let's just analyz at thi point .
okai , and now we mayb we zoom in into thi region .
we will see , okai , the two peak of the two sinusoid .
ok , then we'll do the sinusoid model , we do the short time fourier transform , let's go directli to the sinusoid model and let put the same valu .
let's get the sum of these two sinusoid , which mayb let's listen it okai and now we can set up the valu as <num> .
okai and again the fft size <num> .
and okai , the rest of the paramet let's lower the threshold .
i think minu <num> will be too littl , just put minu <num> for exampl .
okai ?
and let's leav the other the same as we had befor .
okai ?
let's comput that .
okai .
and now we have the origin sound and the resynthes , we can listen to that .
okai , that's pretti good .
and then if we zoom into thi area we see these two line , the 440hz and 490hz .
what happen if thi size is not larg enough ?
for exampl , what happen if it's <num> , <num> ?
and of cours we don't need such a big fft .
let's <num> is sufici and i think in here let's make sure to be safe and let's have a lower threshold , let's sai minu <num> and let's leav the other the same .
okai , and now we see someth interest .
okai .
so if we listen to the output sound .
is not that bad , but if we look at the analysi it is definit veri differ .
okai , if we look at the analysi what we ar see is kind of , it get confus , sometim it find two , sometim it doesn't .
so , clearli we don't have enough resolut for discrimin clearli these two sinusoid .
even though when we sum it all togeth it doesn't sound that bad .
okai , but anywai we'll have to pai attent to thi and make sure that we understand how the paramet have to be set for analyz a specif type of sound .
and now let's go to a sound , a real sound .
let's us the obo sound and let's go directli to the obo sound , which is the note a4 , <num> hz .
so , let's calcul again thi distanc that we need to , the size of the window that we need to have .
mayb let's chang the window .
and let's put for exampl a blackman window , it's okai .
what should be the window size for thi sound ?
okai , the blackman window , the number of bin is six , the sampl rate is the same , <num> , <num> , and now we have to divid by the fundament frequenc , the fundament frequenc of thi sound is <num> hz , and that's the distanc between two consecut harmon .
so we will put <num> hz here .
and thi is the size that we need <num> sampl , okai .
so , let's put <num> sampl .
fft size , well let's put the next power of <num> , and now , of cours , we're deal with a big sound that ha a lot of harmon and thei will go pretti much down .
so let's put more , bigger threshold , so lower valu .
ok , so let's put minu <num> .
and now we can , these these paramet matter a bit , so thei might be spuriou kind of track .
so let's get read of track that ar small , so for exampl <num> . <num> .
so we get rid of that .
in thi case now we will need quit a bit of sinusoid .
and we definit will need thi deviat .
so thi will be a deviat that will be quit us .
okai .
on , let's comput it .
of cours , it take longer becaus it's a much more complex sound .
okai , and thi is the result , the origin sound .
the track , here we're onli visual the first <num> , <num> , but if we would go higher , we would see more .
and , we see pretti good all the horizont line .
and of cours , here at the end there mai be some harmon that ar disappear .
let's listen to the origin .
on the synthes okai , that's pretti good .
what happen if , for exampl , the threshold is not low enough ?
let's put minu <num> , for exampl .
now , let's recomput it .
okai ?
now , what we ar see is that it ha not been abl to captur all the harmon .
the harmon that were too soft were not analyz .
so let's hear what we got back .
yeah .
clearli thi is onli a part of that sound .
and that is basic what i want to talk about .
so , thi wa a class that i tri to introduc the the sinusoid model from a practic perspect .
and of cours , we have us the sm tool , the gui , and these sinusoid sound that we have , the obo sound , we have been plai around with come from freesound .
and that's all , hopefulli that ha given you a practic view of the sinusoid model .
of cours thi requir for you to practic quit a bit more .
it's veri import to analyz mani sound and to actual see what is the effect of the differ paramet on differ sound .
and in fact , that's what we're go to do next demonstr class .
so , i hope to see you in next demonstr class where we'll actual analyz some more complex sound and go into the sinusoid model more deepli .
so , see you next time .
welcom to the cours on audio signal process for music applic .
in the previou demonstr lectur of thi week we talk about the sinusoid model , from a practic perspect .
so we analyz some sound , some simpl sound .
and we tri to figur out what paramet , from the sinusoid model , would give us a good visual and re synthesi of the sound .
so we want to complic it a littl more , by choos a littl bit more complex sound .
so , we ar go to analyz the mridangam .
the mridangam is an instrument , a percuss instrument .
from the south of india that is plai as part of the carnat music tradit .
and in thi pictur in fact , we're see ajai on the mridangam and he's a t . a .
of thi cours .
and in the voic , sing , is vighnesh .
which is also a collabor in our group and we ar also go to be analyz some of hi sound .
so let's go find some mridangam sound .
and of cours what we would do is go into freesound .
so if we look for mridangam in freesound .
now we're go to see , well , there ar quit a few sound .
there ar <num> , <num> sound of the mridangam , that's pretti good .
and the first on , let's mayb just open thi first on , and in fact it's a sound that wa upload by ajai .
and we can listen to it .
okai , that's pretti nice .
the mridangam is a veri interest instrument .
it produc quit a few differ qualiti of sound , the wai the instrument is hit and there is differ bowl , that ar call , to produc differ sound qualiti .
and rhythmic is realli complex .
i mean , the music of the carnat music tradit .
and the wai that the mridangam is plai it explor veri sophist and complex rhythmic structur .
let's just us on of these sound .
in fact , as part of the packag of sound that we ar us for thi class , there is a sound by ajai .
in fact it's thi fragment here .
and we can also listen for that on .
'kai so thi is the sound .
and we can plai it .
'kai so let's analyz thi sound by ajai .
let's open the sm tool gui .
and let's start by look at the short time fourier transform .
so we'll go and get a mono version of thi sound , mridangam sound .
okai , and we have to decid what paramet to us , so befor we can realli make ani decis let is just take some default kind of paramet .
for exampl , let's us han window , that's kind of a default window that work quit well .
in term of the window size okai , we don't know much , but okai , let's start with <num> , <num> sampl of the window .
the fft size , when we don't know much about it the bigger the better , if it doe not take too long .
so okai , so <num> , <num> seem like a good enough number .
and the hop size , well it should be the smaller possibl , becaus percuss instrument , with thi sharp attack , it's good that we have a lot of frame and we can have like a decent time resolut .
so let's comput thi , okai .
so thi is the result , the output should be the same becaus we haven't done much yeah .
it's the same , we haven't done much to it and the hop size is in a good relat with the window size .
now what basic would like to is understand a littl bit the sound so that we can better choos the paramet .
so , let's think about the window size that best fit thi sound .
so for do that let's zoom into on of these sound .
for exampl , thi on look good becaus it ha a lot of horizont line .
okai ?
so these ar the partial of the sound .
it's a membran that creat some vibrat .
thei mai not be complet harmon , but clearli there ar some veri stabl partial of the sound , of the reson of the instrument .
and we would like to see what is the minimum distanc between two partial , so that we can decid what is the resolut that we need , the best resolut that we need .
okai ?
and by look here where the cursor is , we can see , for exampl , that thi first horizont line is around <num> hertz , and the second on is around <num> hertz .
okai ?
so that mean that accord to thi , at least the minimum distanc between two consecut partial is around <num> hertz , okai .
so from that we can try to comput an appropri window size .
as we said in theori class , we have to start with number of bin of a window .
so , let's start with thi ham window , so it's four bin and let's multipli it by the sampl rate , <num> , and divid it by the frequenc resolut we want to have .
in thi case we make a guess of <num> hertz , that we identifi as a distanc that wa present in these sound .
okai , so thi is <num> sampl .
okai , so we would need these <num> , or let sai <num> sampl , so that we have a valu that is an odd size .
let's still keep the fft size big .
so , there's no harm on that .
and in term of the hop size , well it look like we can have a smaller on .
so let's see , <num> , that would be <num> 4th of that .
okai ?
and let's comput it .
that's not that differ from where we start .
so in fact where we start wa pretti good .
okai .
so thi is the kind of analysi that should be okai accord to thi measur .
now , let's analyz the sound us the sinusoid model .
so let's go to the interfac , and let's open the sine model .
so let's go for the mridangam sound , okai ?
and well , we have to choos the paramet for that , so let's us the same on , so , we have thi <num> , around <num> sampl .
let us the same , the ham window .
the fft size , let leav it to thi <num> .
magnitud threshold , mayb we do not need that much .
let's sai minu <num> .
durat , well let's make sure that we have good enough track , so <num> . <num> .
number of sinusoid , <num> , yeah , we need quit a bit .
deviat , doesn't deviat that much the sinusoid in thi type of sound .
so , thi will be okai .
let's just first try thi on .
let's see what we get .
well , not that much , okai ?
so we have analyz the sound and we obtain veri few sinusoid , and if we listen to the result , well , not much there , it ha some sound , but not much .
so , what can we improv from thi .
well , the window size , i guess it wa all right .
clearli the magnitud threshold could be lower , becaus clearli thi sound wa not record veri loud .
and a lot of these thing , especi within the decai , is quit soft .
and clearli the sinusoid track could be shorter .
becaus the stroke ar veri short .
and some of these trajectori ar go to be veri short .
so let's have it at <num> . <num> .
let's just have the rest as it is .
okai , that's better .
that's better .
of cours from thi pictur we might not get a good idea becaus we don't see the amplitud of each of these but it give you someth .
and clearli on the waveform it's pretti good , much better .
let's listen to that .
yeah , that's pretti good , that's pretti good .
of cours , on basic problem is the frequenc resolut and the time resolut , thi time frequenc compromis .
so let's see if we can get better frequenc resolut .
so these harmon , i am sure there ar some , as we can see here , that ar closer togeth .
these ar partial .
thei're not harmon , in fact .
so , some ar relat harmon , becaus in the reson of the instrument emphas certain harmon , but some ar not complet .
so let's try to make it bigger window so that we can captur partial that might be closer togeth .
so for exampl let's go to <num> sampl .
quit a bit more .
see what happen .
okai .
and let's just leav the rest untouch .
and let's comput it .
okai , interest .
so we definit got mani more line .
but look at the wave form , it doesn't look too good .
let's listen to that .
so in fact , if you pai attent , on of the biggest differ is that now the attack ar not crisp .
thei ar kind of a smear .
we see it also here in the waveform , that the attack ar not so good .
so okai .
so that wa not a good idea .
we might have gain on frequenc resolut .
but we definit lost in time resolut .
so let's go back to a number that is , mayb ?
let's have <num> , <num> which is kind of a compromis .
see what's happen now .
and okai , that's pretti good .
look at the waveform it look quit decent .
and if we listen to that okai it's pretti good .
even though if you listen carefulli we ar still miss a littl bit of the sound .
the sound especi dure the attack .
there is a lot of energi .
there is a lot of nois into that mayb with these sinusoid ar not well captur .
but that's on of the thing that we'll talk about and we'll learn how to handl in the next few class .
thi is all i want to sai in thi lectur .
so let's go back to the slide .
so we have done a littl bit of more analysi of a particular sound .
in thi case , the mridangam , us the sinusoid model .
and of cours , we have us the sm tool and sound from freesound .
hopefulli , thi ha given you a better understand of the sinusoid model and at the same time mayb you have discov thi new fascin instrument , which is the mridangam , and which i encourag you to listen to it and especi in the context of carnat music .
so thi is all and i will see you next class .
thank you veri much .
hello , welcom back to the cours on audio signal process for music applic .
thi week we're talk about the sinusoid model .
and we ar consid sinusoid in the frequenc domain , in the spectrum .
and more particularli , we ar consid that a sinusoid is a peak , a spectral peak , and from which we can measur the valu of the sinusoid .
so thi is what we want to go over in thi program lectur , from a program perspect .
therefor develop some code that would allow us to measur the valu of the sinusoid .
and these ar the equat we present in the lectur class , to measur the frequenc , amplitud , and phase of a sinusoid us parabol interpol .
so thi first equat is the the wai to comput a parabola , on the tip of a peak , and obtain the refin frequenc valu .
as a locat from <num> to n , which is the fft size .
then we can obtain the frequenc valu in hertz by multipli by the sampl rate , and divid by capit n , and then we can plug the locat valu in the in the parabola and obtain the tip of it which will be the interpol amplitud valu .
and final , we can also get the phase valu by read the locat of the frequenc , mayb us a linear interpol of that , in the phase spectrum , so that we get a refin phase valu .
okai , so let's go to the text editor .
and in here i wrote some code to actual do these , detect of a spectral tip .
so here i first import some of the packag that i need , like the numpi , matplotlib , the window from scipi .
then i go to append the directori from which i have some code , that i'm go to us , specif the dft model so our dft implement and set of util function that i have in the sm tool packag .
okai , after i have all these packag i can start read a sound file .
so i read a sound file that includ a sinewav of <num> hertz .
so i know exactli what frequenc i should get .
and then i declar some variabl that ar go to be us for comput the dft .
so m is our window size , how mani sampl of the sinewav i'm go to comput .
n is the fft size and t is a threshold that i will be us for the peak detect .
okai ?
so then i can get the window .
i get a ham window of size m , then i read into the file , well into the the middl of the sound file , so i can just get m , capit m sampl of the middl of the sound , and then i can comput the spectrum us the dftanal .
i return the magnitud and phase , and then i'm comput the peak , okai ?
so thi peak detect , thi is a function that is declar in the util function .
so let's go there .
thi is the peak detect function that ha as input magnitud spectrum , and t which is a threshold .
the magnitud spectrum which is the arrai of valu , of amplitud valu , in decibel , and t is the threshold in decibel that is go to be us , to consid the minimum valu below which we're not go to consid to have peak .
so the comput is quit simpl .
we check for three condit in the whole magnitud spectrum .
well the whole , we're discard the initi valu , valu <num> and the last valu .
so between <num> and the size minu <num> , we ar look for the valu that ar abov a threshold .
okai ?
abov t .
the valu that ar higher than the previou and the next valu .
okai , so thei're local maxima .
and then we ar consid the peak , as be the valu that fulfil the three criteria .
thei're abov a threshold , thei ar abov the next valu , and thei're abov the previou valu .
and then , well , we add <num> in order to undo thi on , the condit that we had .
and it return the locat , an arrai of peak , of the locat of those peak .
if we can go back to our code .
okai , so we we call the peak detect , it return the locat and then to get the magnitud of those locat , we just read those valu from the magnitud spectrum .
to plot that , well , we have these line for plot , in which we defin first frequenc axi .
so we're go to be abl to see the x axi in hertz .
then we plot the whole magnitud spectrum .
so with the frequenc axi and the magnitud spectrum .
and we plot the peak locat on top of that .
so we plot the locat and the magnitud and we're go to plot an x on those locat .
okai ?
without ani line , so we just see those those locat .
so let's run that .
we ar in the workspac of sm tool and i have thi test . by so i can just run test .
okai , and thi is the spectrum of the sinusoid , and of cours it ha a main lobe of the ham .
so let's zoom into that locat .
so let's just go into just the peak .
okai and thi is the peak of the sinusoid .
we can see the cross and we can see some of the higher sampl of the magnitud spectrum .
okai .
so in here we can see that the cross is at locat <num> hertz more or less , or <num> hertz .
that's clearli quit far from the <num> hertz .
why is that ?
well , thi is becaus our size , the fft size , wa <num> sampl .
and with <num> sampl we have quit a bit of distanc between two consecut sampl .
in order to comput exactli what is that distanc , we can just do the sampl rate .
<num> , <num> , divid by the fft size , which wa <num> .
and <num> , thi is the distanc in hertz between on sampl , which is here it sai <num> .
and in here is <num> kind of thing .
so thi is the <num> sampl distanc between these two .
so to improv the resolut , we can now increas the fft size .
so in here , the n , let's make it four time bigger .
for exampl , let's make it to <num> , <num> sampl .
so thi should give us better frequenc resolut .
let's try that .
so we save that and in here , well , let's rememb thi plot , so we can now , if we run again and we zoom into the tip of the spectrum .
okai .
okai , yeah .
we can see that there is more sampl now and i think , even if we zoom more , okai , we can see that well , now the tip , the peak , ha been comput to be around <num> hertz , okai ?
and clearli the distanc between two consecut sampl ha reduc .
so in fact it should be four time smaller .
if we comput that , we can just comput <num> divid by <num> .
so now , it's <num> hertz , the distanc .
but still it's not the frequenc we would like to have .
it's a littl bit far .
in fact thi <num> hertz resolut is not ideal .
so what we're go to do , is to do thi parabol interpol .
so in the util function file , there is thi peakinterp function , that perform parabol interpol on these locat that we have found .
so from the magnitud spectrum , the phase , and the locat that it found , these local maxima , thi function comput the interpol valu .
so from the three highest peak of each local maxima , the actual local maxima , left and right valu .
it perform the parabol interpol to refin the frequenc and find the center of the parabola .
then it find the tip of the parabola , the magnitud of it .
and then it us the locat to look into the phase spectrum and perform some linear interpol , becaus the phase dure these valu should be quit flat .
and it perform a linear interpol to find the actual phase valu .
and it return these three .
now let's get these three output valu .
let's copi them , and put them in our program .
so we will obtain thi by call the peakinterpol function .
so , let's copi that too .
copi , and we put it here .
okai .
so thi is our peak interpol function .
no need to comput the pmag and now it return the interpol locat , interpol magnitud , and interpol phase , by call the peakinterp , and send it the magnitud , phase and locat valu .
so now we can plot the iploc and ipmag and okai .
so let's see if we improv thi plot .
so we had the peak at <num> hertz .
see what we can do with thi interpol .
so let's run again test .
okai , it complain about peakinterp , becaus it's part of the packag uf , so i have to specifi that it come from there .
and , let's try it again .
okai .
now let's zoom in to the tip of it , so we can see how it doe .
okai , and we can zoom a littl bit more .
okai , so here we see the valu that we had befor .
so the tip befor it wa thi tip , so it wa like around <num> .
and now it ha found , the cross is in between these two locat , so it ha move the the tip , becaus it consid the tip of the parabola and now the cross is closer to <num> .
still , it's not at <num> .
in fact it's around <num> or so .
so we ar still on hertz kind of differ , but definit it's much better than where we start with .
okai , so that's basic what i want to show .
with thi code we can analyz a spectrum of a sound and identifi the spectral peak locat , that ar within that spectrum .
of cours if the sound is more complex than a sinewav , and the threshold is also lower , it would not just find on singl peak , it will find mani peak .
okai , let's go back to the slide .
we have been us the sinusoid model , or part of it , the concept of peak detect .
and us some of the packag of python , numpi , scipi , matplotlib and some of the function avail in the sm tool packag , we have been abl to measur the spectral peak of a sound .
and with that we ar now readi to go to the next stage , which will be talk about in the next program class , actual handl more real sound and both analyz and synthes these sinusoid .
so i hope to see you in the next class .
bye bye .
welcom back to the cours on audio signal process for music applic .
in the previou program class , we talk about the spectral peak and how to program them .
how to detect the valu of the spectral peak , and that wa the begin of implement the analysi synthesi us a sinusoid model .
so we identifi the valu of spectral beat , which hopefulli correspond to sinusoid .
so in thi second class i want to introduc idea of how to synthes a sinusoid from those peak .
so how to do basic addit synthesi .
so we will be do it in the frequenc domain , like we talk in the in the theori lectur , in which we're basic synthes the main lobe of a blackman harri window and then do the invers dft of that .
so thi equat show the idea that we synthes the sound y , by take the invers dft of a sum of main lobe .
and in here we see the plot of that .
so we see the the main lobe alreadi been gener .
the phase alreadi been gener , and then we take the invers of that , to gener the synthes sound .
so let's show that .
and we first have to actual learn how to synthes a lobe of a blackman harri window .
so in thi littl code i show that , so we call thi function call genbhlob , and we give it the sampl , the bin , that we want to gener .
so sinc we onli want to gener the main lobe we just give the eight center bin of that .
but first let's look at thi function , genbhlob , which come from the utilfunct file .
and in here we have thi genbhlob , which implement the gener of a blackman harri window directli in the spectral domain .
in the spectral domain of blackman harri , is the sum of <num> sync function .
and thi is what thi main loop doe .
it gener <num> sync function and it sum them togeth .
each sync function ha a coeffici that come from the equat of the blackman harri window .
and then in thi , of these sync function , we call a function call sync , which also is here , which is what gener on particular sinc function .
again , it onli gener the main lobe , it doesn't gener the whole sync function .
okai ?
so , with these two function , we ar abl to gener the main lobe of a blackman harri window , let's run thi code .
okai .
run test2 , okai ?
and if we show the output , x , capit x .
these ar the eight sampl of the blackman harri window , in a linear scale , okai ?
so the center is thi sampl , which is valu <num> .
if we take the absolut , well the log of that .
so <num> time log10 of thi x , we will see it in a log scale .
okai .
and we can plot it .
so we can plot thi , okai .
so thi is the main lobe in the log scale of a blackman harri window .
if instead of read these sampl , we read some other seri of sampl .
for exampl , we just add . <num> to thi arrai and we save it .
and now we run it again , and we plot it , well we have to plot thi okai ?
now we see that these ar differ sampl .
these ar the , there is no center sampl , so thi is basic in between two sampl .
thi is how we gener main lobe correspond to differ frequenc .
becaus we ar move these main lobe around the sampl .
let's now do it with with a function that the sm tool doe it , which is the function call genspecsin .
so genspecsin ha thi input arrai of frequenc , magnitud , and phase and then we gener thi spectrum , that includ all that .
okai ?
so in thi code i am gener on singl sinewav at <num> , <num> hertz .
magnitud of <num> decibel and phase <num> .
and i'm gener the whole fft of size of <num> sampl .
from there i comput the absolut valu .
and then here i plot the log of that , the db valu of that .
so let's show that .
let's run test3 .
okai ?
and thi is on main lobe of a sinusoid at frequenc <num> , <num> hertz .
and if we zoom into that we will see , thi is the main lobe and of cours thi ha been shift exactli to have a center around <num> , <num> hertz .
if we go zoom in more we will see that the tip of thi peak is basic at <num> , <num> hertz .
okai , now let's talk about how to actual gener the time domain from that .
so we have to do the invers fourier transform from that .
and , and thi is in thi other script i implement that .
so after have done the genspecsin , i call the invers fft , and then there is some code to undo the window of the blackman harri window .
we mention in the theori class that in order to have a good overlap add with not much of a small hop size , it's good to undo the blackman harri window and appli a triangular function , and thi is what we do in thi part of the code .
we gener a synthesi window , which is sw , which is the result of have a triangular window divid by a blackman harri window .
and thi is what we multipli by to the invers of the dft , of what we obtain .
so let's run thi code .
so let's run test4 .
okai , and we can plot the individu step .
so let's plot first absolut valu of the spectrum .
okai ?
so thi is the complex spectrum of the sinusoid .
well onli the magnitud part of that .
so that we see both the neg and the posit side of that sinusoid .
so we see in here that x axi is not in hertz , so we don't see the exact valu , but these would correspond to the <num> , <num> frequenc , both the posit and the neg side of it , in linear scale .
kai ?
then what we do is , we comput the invers dft so we can plot the inversi of dft of that .
so let's plot y .
okai ?
and thi is the blackman harri window sinusoid in the time domain .
and we see it center around zero .
so we see that the second half of the window in the the begin , and the first half at the end .
there is no zero phase here .
well there is no zero pad .
becaus we actual had the same window size and fft size , which wa <num> .
okai ?
so onc we do that then we undo , we divid by thi window and multipli by a triangular window .
so we can show the result of that , which is yw .
okai ?
and thi is the signal that we would like to us in the overlap add step in which we have divid the blackman harri and we have multipli by a half length triangular window .
so it's onli , the origin wa <num> , now it's <num> sampl .
so we will be abl to overlap by half of that , so we'll be abl to overlap by <num> sampl .
okai , so we have seen the whole synthesi from some frequenc valu of a given sinusoid .
let's put that togeth into on a real analysi synthesi of a fragment of a sound , and thi is in test5 .
and in here we ar read a fragment of an obo sound .
and we're go to do the dft analysi .
then we will detect the peak .
then we will intrapol the peak to get a more accur valu of the locat of the sinusoid .
and then we will do the synthesi of that in the frequenc domain .
and then do the invers fft and undo the window .
here it plot the spectrum , result spectrum , the magnitud spectrum , and the peak of that , so let's show that .
so let's run thi test5 .
okai , and thi is the magnitud spectrum of the obo sound and we have detect some peak with a given threshold .
so let's zoom into that .
okai ?
and we see the cross which correspond to the interprol peak .
here we see the effect of the parabol interpol is huge becaus , in here we didn't have ani zero pad , and the fft wa quit a bit small .
so the effect of the parabol interpol is realli substanti .
okai , so now from these cross , we have the magnitud , frequenc and phase of each of these peak , and we can then comput the invers of that .
and so that we can plot the y arrai , in which we have the invers of that .
so here we have the <num> center invers fft of all these sinusoid of the obo sound .
and if we now center it and undo the blackman and obtain multipli it by the triangular , we can plot the yw which will be thi window by a triangular function signal , and thi is the on we will be us in the overlap add of the synthesi , analysi synthesi , of the obo sampl .
okai , so that's all i want to sai .
basic , we have look anoth compon of the sinusoid model .
we have done the peak , sort of synthesi , and befor we talk about how to actual find the peak .
and now what we're miss is the put it all togeth into a complet analysi synthesi system of time vari .
and worri about the continu of thi sinusoid .
so thi is what we're go to be do in the next program lectur .
so i hope to see you then .
see you , bye bye .
welcom back , to the cours on audio signal process for music applic .
in thi week that we ar talk about the sinusoid model , in the program lectur we have been try to put togeth a whole system for analyz and synthes a sound us the sinusoid model .
so in the first program lectur , we talk about the peak detect or how to detect the peak of a spectrum , which hopefulli ar go to be sinusoid .
then in the last program lectur we talk about how to synthes sinusoid from those valu .
from the peak valu .
and now in thi lectur we want to put it all togeth and add the miss compon in order to actual analyz a complet sound .
so we start from signal of x and then we do the standard window , fft , and these ar the thing that we talk about thi week .
so the peak detect , and how to get the amplitud frequenc and phase of the peak .
then todai we're go to talk about the sinusoid track .
so how to build track out of those peak .
then onc we have these sinusoid track we can do the synthesi .
so we can synthes the spectral peak , with the shape of the sinusoid in the spectral domain .
and then we can do the invers fft and do the overlap add so that we can add the time vari aspect of the sound and we can reconstruct veri complex sound .
let's open up the file that includ most of the function that ar need in the sinusoid analysi , which is the sinemodel . py , which is part of the sm tool packag .
in thi file we have sever function that ar of us for the sinusod model .
for exampl thi first on is the sinusoid track .
then there is anoth on which is clean sine track , that we'll talk about .
then there is on that implement the whole sinusoid model , analysi and synthesi , but doe not includ the track aspect becaus thi is meant to be us in real time .
so it cannot do track and allow some memori in the process .
so we do not recommend to us that unless you want to develop some real time kind of concept .
so what we're go to be us , and we recommend to us , is the sinusoid sinemodelan function , that just perform the analysi part , and is abl to do sinusoid track , becaus it allow to have all the track in on place and then do some post process on them .
'kai ?
so in here we the input is the whole input sound x , the sampl rate , the window , the fft size , the hop size , then the threshold for the peak detect , and then a number of paramet that ar import to control the kind of these time vari aspect of the sinusoid track .
so for exampl , on is the maximum number of sine that will be allow at the same time , default is <num> , so normal you put quit a lot of them , so to allow for creat and and disappear sine wave .
and then we control the minimum durat of a track .
so the default <num> . <num> , so the track that thei're go to be shorter than thi valu ar go to be delet , and then we're go to control the allow deviat , from on frame to the next of a given track .
so in thi case , thi deviat which is in hertz , <num> hertz , it mean that in the lowest frequenc it allow , from on frame to the next , for a peak to chang frequenc by <num> hertz , and still be part of the same track .
and then thi freqdevslop is a wai to allow for thi deviat to increas as the frequenc ar higher .
in higher frequenc normal , you would like thi deviat to get higher , so we can chang that by control thi slope .
the bigger thi the bigger the slope and therefor the bigger the chang with the higher frequenc will be .
okai , and then in the function , it's not that long , of cours it ha a lot of the paramet and the function that we alreadi have seen , the core is thi while loop that basic what it doe is it iter over the whole sound , and it perform all the block that we talk about .
so it perform the dft , us the fft algorithm , it perform peak detect , then it perform the peak interpol .
and then it it put these peak into track .
and thi is what we're talk about now .
so let's look into thi function , the sinusoid track which is right here , okai ?
and thi function from the peak , that the algorithm ha found in a particular frame , and from the concept of track .
the concept of a seri of incom track with specif frequenc .
we ar build track .
we ar basic continu the incom track , or creat new track , accord to these deviat paramet .
so thi function is a littl bit long , but it's a lot of clean and and set up thing .
the whole concept is not that complic .
it's simpli the idea that if there is incom track and if not track will be creat .
but from these incom track , it find the peak that ar closest to those track .
and then if it's close enough accord to the deviat , thei will becom part of the track .
okai ?
so if these deviat is small , we will add it .
and otherwis we can also creat new track here .
okai ?
so , if there ar peak that ar left , that have not been assign to ani exist track , we can creat new track .
so track will be creat and will be disappear if thei ar not us in the follow frame .
okai .
so thi return a seri of track .
okai , so if we go back to the function of the sinemodelan , okai ?
after thi track it's done .
well again there is a whole bunch of variabl need to handl these track and how to pack them and clean the matrix so that we save space .
but then thi is done until then .
and then onc everyth is done , befor return the track , there is a clean step .
so thi clean step receiv all the track that have been comput for the whole sound , and it will delet the on that ar shorter than what we specifi .
so if we go to thi function , the clean of the track , cleaningsinetrack , it's a veri simpl , it just simpli goe through all the track that have been creat .
it look for the begin and end of each track fragment , let's sai .
and if a track fragment is below a given length , then it will simpli delet the track .
it will set the frequenc to zero .
and that's what it mean to clean the track .
okai ?
and that's all the sinusoid model doe , the analysi of that .
so let's us a function that , or a script , that call the sinusoidalmodelan , okai ?
so thi is a script that call the sinusoidalmodelan and with a given set of paramet , with a sound , the obo sound , with a given window , given an fft size , et cetera .
all the paramet that we talk about .
so let's run thi function , or thi script , and well it will print the actual track .
let's run thi then .
run test6 .
okai .
so thi of cours will take a littl bit more than a singl short time fourier transform .
so thi is the result .
here we have all the track , and we see the track in differ color , and thing that ar import to notic here , is that for exampl , even if we see a singl line , we can see that thei ar sever color .
that mean that a track will start , wa wa aliv for some time , and then it disappear , so a new track start , and then it disappear , a new track start and disappear , etcetera , etcetera .
so thi is the idea that track can appear and disappear .
then also we see that most of the track correspond to the harmon of the sound , but some do not .
for exampl here in the high frequenc , clearli we see track that ar quit short live and thei mai be track some nois compon or thei mai be track some side lobe of the analysi and thi is someth that with the sine model we cannot do anyth about it .
of cours we can control the length , and so all these track , the the minimum length wa the on that we establish , which wa <num> second .
so all the track here at least ar <num> second .
if we had set thi to a differ valu , for exampl let's leav it to <num> , and now we can run it again .
it will do the same analysi , but it will allow to do mani more track .
so now , we'll onli track thing higher up .
but if we zoom into the area where we were look at , yeah .
we see mani track that ar veri short , and presum correspond to fragment of littl sound , or site lobe , or thing like that .
so the clean of the track is a good wai to get rid of all these kind of , that typic mai be correspond to artifact .
okai .
then we can do the synthesi .
so the sinemodelsynthesi is thi function here , and it will receiv these track to be analyz .
and from then it will call , basic the gener of the spectral sine .
so it will iter over all of them , and it will gener the main lobe of the blackman harri window , here there is some consider for the phase , we might want to not pass ani phase here , it pass the analysi phase .
but in some case the phase will be reconstruct from scratch .
and it allow for reconstruct of the phase and the synthesi stage .
anywai , so thi sinemodel function , which is in the actual function that is call by the interfac that we us in the demo class .
it ha on function , main , that call the analysi and synthesi of a given sound us thi sinusoid model .
so , the paramet , the default paramet , it us , these bendir sound , and then it that's the analysi , and then perform the synthesi and it output the sound file .
and it also plot the input sound , the sinusoid track , and the output sound .
so let's just call thi function .
let's close thi on first .
and if we run , sinemodel function , so we copi it in our directori and we have to chang a few of the rel path of file .
okai , so now it's comput the analysi and synthesi of thi bendir sound .
okai , so thi is the origin sound , and here we see these trajectori , and the re synthesi from that .
so if we zoom into here , for exampl , let is zoom to a particular area .
we will see all these quit messi sinusoid that ar come in and out and in thi type of sound that's quit normal , becaus there is a lot of veri partial that ar veri unstabl and thei disappear and appear in a short fragment .
okai .
so we can listen to those sound .
for exampl let's listen to the result sound .
we creat a file in thi directori , synthes , and it's call , bendir sinemodel .
so we can us the plai system command to plai thi sound .
okai .
and it's not that differ from the origin file that the bendir we input .
so anywai that give you an idea of how to us the sm tool code and how to understand it .
so now the idea is that , by yourself , you can plai around with these paramet and realli go into the differ function and understand what thei do .
so , let's finish with that and we have seen the whole sinusoid model from a program perspect .
and within the sm tool packag we have seen all the function that perform all these differ analysi task and synthesi task .
so we have pretti good code base with which we can do a lot of veri interest thing .
again thi is just on step into further complic on these model .
so now we have seen the sinusoid model as a model that will allow us to do quit a few thing .
but we can do more , and so next week we will be talk about the harmon model which is a wai to restrict the sinusoid model to track onli the harmon , like in the obo sound , i think it wa clear that it make sens to do that .
and we will also extend it with other new approach to the spectral analysi and synthesi of sound .
so i hope to see you next week , and thank you for your attent .
if you're watch thi , it hopefulli mean that you have follow the cours on audio signal process for music applic until here .
you've just reach the half point , so congratul .
and no need now to give up , veri interest topic ar still come .
last week we talk about the sinusoid model .
and now , follow in the path toward a more flexibl and higher level represent of sound , we present the harmon model .
we will first introduc the actual model , then talk about the differ between sinusoid , partial , and harmon .
then discuss the differ between polyphon and monophon signal .
then present the idea of how to detect these harmon from sound , given that we know from the fundament frequenc , which is go to be a topic of the next lectur .
and then , we'll put it togeth into an analysi synthesi system , the harmon model system .
so the equat of the harmon model is veri close to the on of the sinusoid model , that we alreadi explain , there is a singl but veri signific differ .
the frequenc of the sinusoid ar all multipl of a fundament frequenc .
thu , it's onli valid for singl sourc sound produc by period or pseudo period oscil like the sound produc by mani music instrument .
so if we look at the equat , well the output signal yh , where we emphas the idea that is a harmon signal , with the h , that is of cours the index n , is a sum of our cosin function , time vari , with a time vari amplitud and time vari frequenc , but here the frequenc is not f sub r , where would allow ani frequenc for ani sinusoid .
but is r f sub zero .
so that mean that thei ar all multipl of f sub zero .
small r is an integ valu .
so it mean that all the sinusoid ar either , for differ valu of r , either the fundament frequenc or ani of it multipl .
we can also express the model in the frequenc domain , the time vari spectrum of a harmon sound is the sum of all the time vari spectra of the harmon .
so in thi case we ar express the idea of a sinusoid be the transform of the window .
that we us in analysi .
so the spectrum , the overal harmon spectrum , is the sum of all these window which ar a scale factor of an amplitud a and a shift factor of minu rf , in which we ar place these window at the appropri locat of the sinusoid .
okai , thi is basic what we talk about in the sinusoid model .
but now again here , restrict the frequenc to be multipl of the fundament frequenc .
here we show spectrogram of the sinusoid track of two sound that have differ characterist .
the top sound is an inharmon sound , a note of a vibraphon , and the bottom plot , is a harmon sound , a voic sing mainli a vowel .
let's listen to top on , which is thi vibraphon sound .
okai , thi is a veri simpl sound but it ha line that ar non harmon .
so , that mean thei're not multipl of a fundament frequenc .
some ar relat , in fact we listen a pitch in thi note , but there is some of the sinusoid that ar clearli not perfect multipl of thi fundament .
instead , the second sound , which is a voic sound , which vari , so it's a bit more complex .
okai , so thi is the sound of vignesh sing , and here we see that the line , the sinusoid line , ar veri much multipl of the fundament .
thei're multipl , in fact , of the first line .
and thi is the typic structur of a harmon sound .
in order to better understand the concept of harmon , is import to understand the differ between sinusoid , partial and harmon .
mani peopl get confus with that .
sinusoid is a mathemat function .
it is a function that we comput from an equat .
and that is it ha an analyt represent , and therefor come from a mathemat point of view .
so , the top plot is clearli the spectrum of two of such mathemat function , sinusoid that we have comput with the sine function .
a partial instead , is a compon of a signal that is period and stabl and that can be model , as a slowli time vari sinusoid .
okai ?
so here we introduc the concept of a real sound .
a partial is a concept that come from analyz a real signal .
that ha a certain behavior , that can be approach , can be model , with these mathemat concept that is the sinusoid function .
okai ?
so thi , second plot is a on spectrum of the vibraphon , in which we see that there ar sever of these compon in the spectrum , that can be approach , or can be model , with the idea of a sinusoid .
other not .
so , in here , clearli there is some veri clear sinusoid compon and some other aspect of the spectrum , which might be , is not so easili model with the idea of sinusoid .
and final , a harmon is a partial of a sound .
there is a multipl of a fundament of frequenc .
so it can also be model as a slowli time dure sinusoid .
but it ha thi ad restrict , that ha to be a multipl of a given frequenc .
so in thi last plot , that is the obo sound , we see thi veri , the peak , the top peak , these cross , these ar clearli the multipl of the first peak , which is the fundament frequenc .
but there ar other cross , which ar not harmon .
thei're not multipl of thi fundament frequenc .
these ar , mayb , artifact .
or mayb part of some signal that is underneath .
or mayb , some side lobe .
and look at the phase spectra of the same signal , it also help to understand that some of these concept .
so the top <num> is the phase of these two sinusoid .
we see thi veri flat area in the main lobe of the two sine wave .
in the second plot , with vibraphon sound , with clearli some area that ar quit flat , where the cross is .
and that , so hopefulli mean that thei ar kind of sinusod , and some other cross ar not in a stabl region , a phase region , so that mean that mayb thei ar not sinusoid .
and final , on the obo sound , we see the same thing .
some of the cross ar clearli in the flat region .
and thi clearli mean that it is a stabl compon .
so it's a flat phase stabl compon , and some of the cross , ar not in such area .
so that might give some indic that thei ar not sinusoid , or that thei cannot be model easili as sinusoid compon .
in order to us the harmon model , we need to identifi the sound sourc that ar harmon .
in the case of a polyphon signal there ar sever sound sourc .
for exampl , there might be sever instrument plai at the same time , and some might be harmon , some mayb not .
so for exampl , thi top plot is the fragment of carnat music concert , in which we hear a voic and some accompani instrument .
let's listen to that .
so , the goal would be to identifi the harmon of the voic sound , and look at these sinusoid track .
well , it mayb not that easi but still , it can be done .
we can try to track the harmon off thi voic sound , or other harmon compon that might be present .
a monophon signal , includ just on singl sourc .
sourc like the on of below which is just a singl voic that we alreadi heard .
so , it's vignesh so , so he is in fact the same singer than the voic abov , but clearli here , we can see the time vari harmon much easier , and these the sinosoid track that we have identifi can show veri clearli the harmon of the voic .
so the question is , how do i identifi the harmon of a sound sourc , be in a monophon signal , or in a polyphon signal ?
we ar just focus on harmon sound .
so , we would like to find the harmon in a monophon signal , or in on of the sound sourc of a polyphon signal .
the major problem is the identif of the fundament frequenc of a sound sourc , and thi will be cover in the next lectur .
so , here , we will just assum that we know the fundament frequenc of the sound .
so we'll focu on the concept of a harmon and we will defin that as be a spectral peak , whose frequenc is close to a multipl of the fundament frequenc .
and we can formul thi idea with thi equat in which we defin f p a peak , the concept of it be a harmon , will be when the absolut valu of the differ between f sub p and a multipl of f sub <num> for a given frame l , is smaller than a threshold that we give .
and at the same time we defin thi idea of be stabl as have been live for some time , as have been in exist for some time .
so , we also make the restrict that thi f sub h ha ha had some exist for some number of frame befor the current frame .
so we could defin a capit l , as the number of frame , the minimum number of frame , that we need to have in order for a harmon to be defin as a harmon .
the implement of the harmon model , is a modif of the sinusoid model that we saw last week .
here we introduc two modul , on is the f0 detect algorithm , that again requir to be treat separ , and we will discuss in the next lectur .
and the idea of the harmon detect , which wa what we talk about , the idea that we select the peak that ar harmon of the fundament frequenc .
and the rest is exactli the same than the sinusod model .
so let is , thi is an exampl of an analysi synthesi of the sinusod model , and that wa the vignesh sound .
the harmon of that , of cours , that alwai might have some problem in the area in which we don't have a clear harmon , like in the transit , in thi case even in the conson , or silenc we might have some problem .
but in gener it work , so from thi sound that we alreadi heard thi is the synthes sound , which is quit close to the origin on .
so , for thi sound , the harmon model work quit well .
the concept of harmon oscil , in the studi of mani natur phenomenon ar , is quit present in mani book and refer .
and you will be abl to find them , in wikipedia you can find mani of that .
of cours that is not much when we deal with specif music signal and sound , and the harmon of sound .
but still , you will find some thing on wikipedia and on some book , and again the sound you have heard , that i plai come from freesound .
and you can find all these , the code for these plot , that i show in the in the github repositori .
so we have cover the harmon model .
so you can us it to analyz and synthes signal .
the applic possibl we will see that ar much larger than with the sinusoid model .
and we'll show some exampl of that .
the difficult step is the detect of the fundament frequenc and that's what we will cover in the next lectur .
so see you in the next class .
welcom again , to the cours on audio signal process for music applic .
in the last lectur we introduc the harmon model , and mention that in order for it to work we need to be abl to detect the fundament frequenc of a sound .
what we call the pitch of a sound .
we will us the term fundament frequenc and pitch interchang .
but strictli speak , thei ar refer to differ concept .
f0 , is a signal process concept , pitch is a perceptu concept .
for our cours f0 is a more appropri term to us .
mani method have been propos to identifi the fundament frequenc of a sound .
these method can be group to the on that work directli on the time domain signal and the on that work on the frequenc domain represent , on the spectrum .
the time domain approach work well on monophon signal and the frequenc domain approach can be made to work on monophon signal but also on polyphon signal .
and that's go to be a veri import advantag of thi type of approach .
so to understand the concept of f0 detect , let's look at some sound and to their spectrum .
thi is a fragment of an obo sound , we can listen .
the time signal clearli show a period , and we can identifi a period , a cycl that keep repeat .
and thi length , the period , it invers , is what we actual call the fundament frequenc .
in the frequenc domain in the magnitud spectrum , we also see a period .
and basic the distanc between two consecut peak , is the fundament frequenc .
so we can also think of algorithm that could measur that .
so we could measur it in the time domain , or in the frequenc domain .
and mayb not too hard .
the phase might be us in certain situat .
but let's not talk much about that now .
a singl note of a piano ha a clear pitch .
thu , it should be abl to detect it f0 .
let's listen to a phrase , a piano phrase .
clearli we listen to the pitch of thi sound .
but , if you look in the time domain , well , it's not that trivial .
it doesn't seem to be easi to identifi the period of thi sound .
in the spectrum , it's a littl bit easier .
we see some of these peak that clearli have a period .
so we can envis some algorithm that could take advantag of that .
and then if we deal with polyphon signal , for exampl thi is a fragment of these carnat piec .
let's listen to that again .
there ar sever sound sourc , but the voic is the most promin on .
and to detect the fundament frequenc of the voic in the time domain , is basic close to imposs .
in the spectrum , well , it's not easi either .
but , we'll see that there ar some algorithm that attempt to identifi thi promin voic , thi harmon compon , in the in the frequenc domain , and thei do a pretti decent job .
so to detect the fundament frequenc in the time domain , we basic have to identifi the length of it repeat period cycl .
and the auto correl function , is a mathemat tool for find repeat pattern .
it is the cross correl of a signal with itself .
and inform we could sai that is the similar between sampl as a function of a time lag between them .
so in thi equat we see a version of the auto correl function that ha some taper .
and what we do is we comput thi function for everi lag time , so we try differ lag time , where it's an integ valu , the sampl valu , and we start with l equal <num> .
and then we sum over all , for a particular period of time , a fragment of a sound , multipli by the sound delai by that lag time .
of cours if we delai by <num> , is the same signal and if delai for differ lag is go to be , the multipl will be differ , so we will get a function of l , so therefor we will be measur how correl is a fragment of sound with the sampl delai by a certain a certain l .
okai .
so let's look at a particular exampl .
so thi is the obo sound again , and below is the auto correl function , in which we clearli see of cours , at <num> , lag <num> , is <num> , is complet correl .
and then as the lag increas , and here we have express the lag time in second instead of sampl , to make it easier to correspond to the top signal .
and clearli we see that a lag correspond to on period , which is thi . <num> , there is a local maximum .
and clearli is the biggest local maxima , so that would be a good indic that thi the period , or that the invers of that would be the fundament frequenc .
and then the lag of two period is also a local maxima , smaller , and there is a taper , also thi keep decai with the lag time .
but let's let's sai that the autocorrel function for such a clear period sound is quit a good measur of the period , or therefor , of the fundament frequenc .
for the case of the piano sound the time domain waveform is not so well behav .
so for thi fragment of a piano sound , where we hear in fact the pitch quit clearli , if we plot the auto correl function for these differ lag time , well is not that clear , there ar sever peak .
well the highest peak is in fact the fundament frequenc , but , veri difficult to have a threshold that would make it a clear decis on which is the best peak to identifi the fundament frequenc .
a method similar to the auto correl is the on propos by cheveign and kawahara , name yin .
and it's base on the differ equat .
so , it is equat similar to auto correl .
we just take the differ between sampl with a given lag , and then take the squar and then sum .
and thi function is <num> when the lag is equal to the cycl length .
so we have to find the minima of the function .
and the yin algorithm doe some extra process here to get a good measur of of thi period .
and it doe a pretti good job , for monophon signal .
so in fact it ha becom a veri common algorithm for speech or for measur the fundament frequenc on monophon music instrument .
let's look at how it doe for a particular sound .
so in thi , thi is the spectrogram of thi vignesh sound that we have heard .
and here we have plot the function , the black line is the fundament frequenc that the yin algorithm ha detect , of cours it ha detect it on the time domain , not on thi spectrogram .
so let's listen to the fundament frequenc .
so thi is pretti good .
is basic , it track the fundament frequenc veri well .
but , thi type of method doe not work for mani sound .
especi it doe not work for polyphon signal .
so we have to go to the frequenc domain .
so what is the fundament frequenc in a spectrum ?
we have seen how to identifi the sinusoid and the partial of a sound .
for exampl on the obo sound these cross ar the peak and mani of them correspond to partial or harmon of thi sound .
but which of these peak , or mayb some other part of thi spectrum , which is the fundament frequenc ?
how can we identifi the partial that ar harmon .
and then mayb from thi inform we can identifi which of them or which other frequenc is the fundament frequenc of these partial .
so the f0 , the fundament frequenc , in the spectrum of a sound , can be defin as the common divisor of the harmon seri that best explain the spectral peak .
then thi is a veri nice and compact definit that in fact we can develop algorithm for develop it .
so , here we see a plot of that obo sound .
and the peak and the vertic green line correspond to on harmon seri .
in fact thei correspond to the harmon seri , that best explain these spectral peak .
so if we would just by visual inspect , we see clearli that the green line , which ar all multipl of the first green line .
ar realli the closest possibl to the harmon seri .
even though some of them thei ar definit not right on top .
and there ar some peak that ar not taken into account .
the f0 detect problem in the frequenc domain , can be formul as a pattern match problem .
in which we have to find the pattern of the harmon seri that best fit the spectrum .
and the two wai mismatch algorithm propos by maher and beauchamp doe exactli that .
the concept of thi algorithm is that it find the differ between the measur peak and the ideal harmon seri .
the predict peak .
and vice versa .
so if we start look at the plot , we see the measur peak on the veri far right .
these ar the peak that we have obtain , the frequenc of the peak .
and then we want to check a given predict , a given harmon seri , a given f0 and it multipl .
how close is to thi measur peak , or how well it explain those measur peak .
so , what we ar go to do is measur the distanc between these pair of valu , okai .
so , we will be measur the distanc between the predict to the measur , and also from the measur to predict , that's why the term two wai mismatch .
becaus in fact , thi distanc will not be the same .
so thi first equat is the predict to measur .
so we take everi predict peak , or everi predict valu , and we look at the closest measur peak , and find the frequenc distanc .
and then we scale it accord to the amplitud .
we also have a valu that sort of promot the lowest frequenc compar with the higher frequenc .
so we have some weight coeffici here that allow us to tune thi equat to the kind of sound we want to work with .
we ar not go to go into detail but feel free to look at the articl or thi equat and understand it better .
and then we do the other wai around .
we measur the measur to predict error .
so , we start by look at all the measur peak and look at the closest ideal peak , or the ideal harmon , and again we look at the distanc , and we appli some weight factor .
and then we have a total error which is the sum of these two error , and again we have some weight coeffici so that we can set it to work for our particular situat .
maher and beauchamp propos some valu for these coeffici and variabl , and these ar the on that we'll be us .
so let's put an exampl to explain thi algorithm a bit better .
so , for exampl , let's consid a seri of peak that we have measur .
in particular , let's consid that we have measur a peak at <num> hertz , <num> , <num> , and <num> , <num> , and <num> , and let's check for differ fundament frequenc .
let's check for a harmon seri on top of <num> .
anoth on top of <num> , anoth on top of <num> .
and so in these metric we see the differ error predict to measur , and measur to predict for these differ candid fundament frequenc .
and clearli the best result is for <num> hertz .
at <num> hertz is the harmon seri that best explain the peak there .
even though the frequenc <num> is in fact not there .
and that's a veri interest consequ of thi algorithm .
the fundament frequenc doesn't have to be a peak , a measur peak , for the algorithm to give a valu at that particular point .
and let's put an exampl of these error function for a particular sound .
on thi sound that we alreadi had been look at .
the obo sound .
so here we have , on the bottom , we have the three error function .
the blue is the predict measur , the green is the measur to predict , and the black is the total on for possibl fundament frequenc , rang from <num> to <num> hertz .
so basic we have swept all all thi frequenc rang .
and have tri the algorithm for all possibl frequenc at increment of on hertz .
and clearli we see that there is on point that there is a minimum .
there is a local minima , and of cours is at <num> hertz , which is the fundament frequenc of thi obo sound .
thi is an easi case , and so here we see that there is not much doubt for the algorithm that the fundament frequenc is <num> hertz .
but let's look at a sound that is more complic , the piano sound that we mention befor , and thi is the result of the best fundament frequenc identifi by the two wai mismatch of thi phrase .
so the black line is the minima of that error function , at the differ note , as thei vari in time .
and let's listen to first to the piano sound .
and then let's listen to thi fundament frequenc as a sinusoid .
there is some glitch , especi in some area where we see some gap , but it doe a pretti decent job in follow thi fundament frequenc .
in polyphon signal thi is not so easi .
it's much harder .
so polyphon signal can have mani sound sourc , both harmon and inharmon compon .
and the idea in f0 detect in polyphon signal is to identifi the fundament frequenc of all the harmon instrument that ar plai togeth .
thu to find all the harmon seri that ar present at everi frame .
so , for exampl , in thi plot we ar show the harmon compon that we heard , the signal that we talk about befor , that we can listen to .
and we ar plot accord to some algorithm .
possibl harmon seri present .
so there is a harmon summat formula that allow us to measur the strength of differ harmon seri , in a similar wai to the two wai mismatch .
and these ar the best , so the loudest harmon seri , let's sai .
or at least the candid harmon seri , so these ar possibl fundament frequenc of those harmon seri .
clearli i don't think thi is complet right , but , it's a first estim of that .
salamon and gomez thei present an algorithm .
that on thi type of harmon summat contour is abl to identifi which is the lead instrument , or the lead voic .
and therefor the promin harmon instrument , in thi case that is sing , the voic .
and it doe a pretti good job .
like in thi sound exampl let is , i will plai the promin pitch it ha found for thi sound .
so that's pretti good .
again , there might be some glitch , especi i see on glitch .
but , is abl to identifi the promin pitch over thi whole sound .
so the best refer for the algorithm that i mention in thi class ar the origin articl in which thei were propos .
so , i would encourag you to , for the yin algorithm look at the articl by cheveign and kawahara .
for the two wai mismatch read the articl by maher and beauchamp and for the melodia algorithm by salamon and gomez look at thi ieee transact articl which describ it quit in detail .
again you can find other inform's and there is a lot of algorithm that have been propos to do fundament frequenc and pitch detect .
so i encourag you to studi a littl more into these , and get a grasp of the techniqu that ar behind these idea .
and in thi lectur , so , we have present differ approach to the fundament frequenc detect , and thi is a research problem that ha not been complet solv yet , especi for complex signal .
in order to not make thing too complic , we will focu on monophon signal .
but , the concept that we'll explain from now on should also be applic to ani type of signal .
by combin the harmon model , that we present in the previou lectur , with the f0 detect that we just present , we can analyz and synthes harmon signal .
but thing ar not finish yet .
so , see you in the next lectur , where we will take thi even further and try to see what happen when we have , ofcous , sound that the harmon model doe not work so well .
so , see you in next lectur .
hello .
welcom back to the cours on audio signal process for music applic .
thi week we're talk about harmon sound .
sound that have a veri clear pitch , or what we also call a fundament frequenc .
and in thi demonstr class , i want to show some tool within sonic visual .
some plugin that allow us to analyz the pitch of sever sound .
so let's go to sonic visual and let's open the file of a sing femal from the sm tool directori from which we us most of sound .
and so here it is .
and we can listen to that .
so that's a quit clear voic sound , with a veri clear tone , the timbr quit homogen throughout .
so we can hear quit well the pitch of it .
in fact if we zoom in into the the sound , we will be abl to see the period quit easili .
so that mean that a time domain approach could be abl to identifi thi pitch .
so let's analyz the pitch of thi sound us a time domain approach .
but first let's open the pane with the spectrogram .
okai .
so thi is the spectrogram of thi sound and if we zoom in the lower part , we see thi horizont line which ar the harmon of the sound and the first on , thi more red on , is clearli the fundament , the first harmon .
if we make the window size a littl bit bigger like <num> , thi is even more clear .
okai , so let's zoom even more .
okai .
and now let's comput the pitch us a time domain approach , and let's open plugin , that is the aubio pitch detector , which wa develop by paul brossier , and the actual implement wa done by chri cannam .
and we will be us the yin algorithm .
thi plugin ha sever algorithm and we talk about the yin algorithm in the theori lectur .
that's a quit popular algorithm that's basic is similar to an auto correl function .
and see , let's see what it doe .
okai ?
so it ha some paramet to control like the rang that we will be accept .
the lowest fundament , the highest fundament , silenc threshold .
the frame size within which we're go to comput thi measur , and then the increment in time .
so let's just take the default paramet and let's comput them .
okai , so here we see thi purpl line on top of thi first harmon .
so it veri much track quit well the whole pitch contour .
of cours except in the attack , that we see , where there's some silenc .
and it found some pitch that mai not be in the right place .
okai so now we can zoom into thi .
and we will be abl to see the actual number that it comput .
okai .
so these number <num> , <num> , okai , ar space <num> sampl .
for everi <num> sampl we have on of these valu .
and thi tone if we recal it , start a littl bit high and then it goe down , up and then finish in the same rang .
so we will see these frequenc it start around <num> , <num> .
then it will go down to lower frequenc like <num> , and then it will go up again to <num> .
to end at the kind of the initi frequenc rang , which wa around <num> and and someth hertz .
okai .
so with that we can realli measur quit well these frequenc .
let's take anoth sound that is not as easi as thi on .
so for exampl , let's take a speech sound .
a speech male , which is a lower sound and mai have some more problem than thi on .
so let's listen to that .
do you here me ?
thei don't lie at all .
okai and let's , let's do the same process .
let's first zoom into it .
let's get the spectrogram of thi sound , let's make it a littl bigger and let's zoom into the lower part of it .
well we will need to take a bigger window in order to visual the horizont line better .
so let's take <num> .
okai , that's better .
but even in thi case we can even do more than that .
so okai , thi mai be better .
so here we see these harmon .
and clearli there ar sever utter so we see them with silenc in between and some conson in between too .
so now let's us the same algorithm , okai ?
the aubio pitch detector and let's us the same yin frequenc estim and let's just us the same paramet .
okai .
and well , the color is not so easi to visual , so let's chang the color , mayb let's , let's make it like black , okai ?
so now we see the pitch track that it found , and clearli , well , let's zoom in a littl bit more .
okai .
and now there is a , it's pretti good , but there is some point that ar , well , ar not correct .
but again thei ar not correct becaus thei're try to identifi the fundament frequenc of some silent .
so by control the silent threshold and some other paramet we might be abl to get a better pitch track .
mayb the on that is not so good is the thi fragment here .
in which there is clearli some pitch and it got a littl bit confus .
it wa jump , and it will look , it will zoom even more .
we'll see the actual valu .
so it wa quit not veri clear on the frequenc that the fundament frequenc wa .
okai ?
anywai , so that's a pretti good tool to analyz the pitch of monophon sound .
so now let's open a polyphon sound .
let's open that fragment of carnat music that we have been hear in some class .
okai , thi is it , let's listen to that .
okai .
so that's a quit more complex sound .
we also listen clearli the voic , but there is thi percuss instrument and a littl bit of the violin and the end and some drone .
but definit we need a frequenc domain approach .
so first again let's open the spectrogram .
okai ?
and let's make it bigger so we can see better .
and let's zoom in into the lower part .
okai , let's make the window bigger so that we can see some thing , mayb even bigger .
okai now we start see some horizont line that might be the voic and might be the drone that that is underneath and the violin here and the end , okai ?
but so now let's us a frequenc domain approach that will attempt to identifi the differ pitch contour , and identifi the promin peak .
and that is , i download on plugin that is melodia .
that wa develop by justin salomon at the mtg , the music technolog group and it ha two part .
on it ha all the intermedi step that ar us , and then it ha the final result , okai ?
so let's start with intermedi step .
and first , what it doe , it look at what is call a salienc function .
so the salienc function well , let's just us the default paramet .
and let's just show it .
okai , so thi is the salienc function .
thi is a comput that is done .
now the horizont scale is in cent , is not in hertz .
and basic it attempt to identifi possibl fundament frequenc , so possibl sinusoid line , so it doe sinusoid analysi .
it find all these sinusoid track , and it tri to identifi which of the sinusoid track might be fundament of harmon seri .
and thi is what it doe .
and then the next step is to find the contour , possibl contour , that ar the most promin on of these possibl fundament frequenc .
and these ar the pitch contour .
okai , now it's comput .
so these ar possibl contour that it found that might be candid to be the fundament frequenc of a given sound search .
and then it can refin it a littl bit more by identifi the on that ar realli melod contour .
okai .
and , okai , so these ar candid melod contour .
and then the actual algorithm return , let's now call the actual algorithm , the melodi extract .
again , it ha the paramet of the rang that it accept .
it ha the size of the frame , and the window increment here .
it's <num> , and there you find advanc .
and there is some other paramet that you might want to plai around with like the voic toler , in term of how the voic characterist , how strongli reli on the promin voic to be have a veri clear pitch , etcetera .
so let's comput that .
okai and let's chang the color again to black .
okai and thi is what it obtain .
what it believ to be the promin pitch .
we can zoom in into that and again we will see the valu and now thei're veri space , <num> sampl , so thei'll have to zoom in a lot to visual the individu valu .
altern let's zoom in mayb more vertic and mayb not so much horizont .
okai .
and now let's visual it again .
okai .
so here we see clearli there is some area that well , it did pretti good .
so in fact let's listen to thi while we ar watch the actual plot .
okai .
so it make some sens .
of cours a good wai to check if thi is a good candid for the fundament frequenc of the voic would be to synthes and listen the actual contour that we obtain .
but sonic visual cannot do that .
but anywai , we show that in in the theori lectur , and thi contour wa not that bad .
it wa pretti good .
okai , so that's all i want to sai .
so basic we have tri to do pitch analysi on sever sound , us sonic visual and sever vamp plugin , more specif we us two plugin , on that implement the yin algorithm .
aubio , and on of the algorithm is the yin .
and then melodia , which is a plugin develop at the mtg by justin solomon that you can find more document in thi directori , in thi websit .
so feel free to go there and get more inform or to download the plugin .
and of cours the sound that we us come from freesound .
so that's all .
so hopefulli thi gave you a practic view on the issu of pitch .
sometim easier and sometim of cours in complex sound thi issu can be quit complic .
and it's a necessari step to be abl to handl harmon sound , and to be abl to analyz and understand and synthes these sound .
so that's what we're go to be do in the next demonstr class .
we're go to be actual us the harmon model that we talk about in theori to analyz the sound us harmon .
so thank you veri much , and i'll see you next class .
hello , welcom to the cours on audio signal process for music applic .
in the previou demonstr class we analyz the pitch , the fundament frequenc of sever sound .
and that wa the first step toward analyz all the harmon of a sound .
and thi is what we go to do in thi lectur .
we're go to be us the sm tool interfac , the harmon model mainli , to analyz the harmon of sever sound .
so let's go to the interfac .
okai .
and , let's start with the dft .
the dft is a good place to start , becaus then we can analys on singl spectrum of a sound and decid about the appropri paramet for analyz a singl spectrum .
and we will start also with the sound that we know the fundament frequenc of , and that is veri stabl .
like the sawtooth waveform .
that we can analyz .
and let's first listen to that .
okai , that's an electron sound , veri stabl , and mani harmon .
so we have to decid the window type , the window size and fft size .
for the window type , in thi sound is not such a big deal .
so let start with , for exampl , the ham window .
that's a veri good start point .
it's a window that ha a decent main lobe with quit narrow , four bin .
and the side lobe ar quit low .
it's lower than <num> decibel .
so now we have to decid what is the window size that allow us to see the harmon of thi sound .
so for that , basic , we have to take four period of the sound .
so we have to know the length of on period in sampl , and for that we can just go to ipython and divid <num> , <num> by the frequenc , it <num> hertz , okai ?
and that's <num> sampl .
and we need four time that , so we need <num> time <num> , so <num> sampl would be a good choic and we want an odd size window , at least for the phase is a good practic to do that , so <num> sampl , and for the fft size , well , we will need quit a bit of zero pad , especi onc we detect the fundament and the harmon , so let just put <num> as the fft size .
and let's analyz kind of in the middl .
. <num> , okai .
so we can comput .
okai , so thi is the four period that we start with of the sawtooth waveform .
and the harmon look veri nice , we see these main lobe of the window , of the ham window , quit well separ , the phase also look quit appropri , look veri flat at everi main lobe , and of cours the synthes is distort by the analysi window that we us , which wa the ham window .
okai , so thi is a start point .
so let now go to the sinusoid model , to check how the sinusoid would look in thi sound , again let take the sawtooth , let choos the ham window , let choos thi <num> sampl , <num> , mayb let's even do more .
let's do <num> , so that we have even more zero pad and the interpol work better .
the magnitud threshold , the truth is that these sinusoid don't go veri much down .
so minu <num> is plenti .
and all these paramet look okai , we don't need that mani sinusoid .
let's put <num> , it's plenti of sinusoid .
and in term of the deviat from on frame to the next well , <num> hertz might be too littl becaus of the measur possibl error , so let's mayb , let's put around <num> hertz at the veri begin and thi keep get larger as it goe up accord to thi slope .
okai , so let's comput that .
okai , and thi is what we get .
so , well we're see veri clearli the horizont line correspond to the harmon , but we also see some line here at the bottom .
which correspond , i guess , to some side lobe .
and we see some kind of oscil and some gap in some of the , of the sinusoid .
that mean that mayb we didn't have enough resolut to control thi allow deviat from on frame to the next .
so mayb let's increas the window size , so to have more sampl , let see , mayb <num> .
and let allow thi deviat to be even larger , okai , and now let see what happen .
okai , now we definit see the , some veri straight line , so veri nice , but we ar see some kind other line in between , out of the sinusoid track .
clearli thei come from the side lobe .
so , thi is on the reason why the harmon model will be in handi .
so , let's us the same kind of paramet but on the harmon model .
okai .
so let's open the sound .
the sawtooth .
okai .
and now let's us the same ham window , <num> sampl , <num> .
and the magnitud threshold , we don't need that much , minu <num> is plenti , and here we have some paramet that relat to , like the number of harmon , clearli with <num> that will not be more than <num> harmon , within the rang go from zero to half the sampl rate , and we have to allow the rang of fundament frequenc to be enough for the <num> to be detect .
so clearli we need to put let's sai <num> hertz as the maximum fundament frequenc .
and let's just leav the rest as thei ar .
thi is an error threshold for the detect algorithm that we ar us , which is the two wai missmatch , and some deviat of the harmon track that we allow .
anywai .
so let's just us these valu and see what happen .
okai , thi is better than the previou on , becaus we clearli onli accept the harmon of the fundament detect .
so , it identifi the fundament frequenc and then it just choos the peak that ar multipl of thi fundament frequenc .
the , the synthes sound .
let's listen to that .
well , and let's listen to the origin .
well , it ha some distort becaus basic we ar not abl to synthes all the harmon of the sawtooth .
in fact if we zoom in , we're go to see that it is not like a pure sawtooth becaus we have less number of all the harmon that ar possibl in a sawtooth .
which would be up to half of the sampl rate .
so thi is why we don't see as nice a the sawtooth that we start with that is basic perfect .
but anywai , that's pretti good for an analysi and a digit reconstruct of an electron sound .
now let's look .
let's close all these , and let's look the analysi of a real signal .
okai , so then we can see how to work with real sound so , we'll start again with the dft , and let start with the violin sound that we have around here , is a violin and is a note b3 .
okai , we can listen to that .
thi is a lower pitch .
so again we have to know the number of sampl of a period .
b3 , the number of hertz of thi frequenc is around <num> hertz .
so the number of sampl in a period would be again divid <num> , <num> divid by <num> hertz .
that would give us the number of sampl of on period .
and if we still us the ham window , we would need to multipli by four .
but mayb let's us anoth window .
let's us the blackman window , which will allow us to get rid of side lobe a lot better .
and we will need a bigger window , becaus we will need six period .
so the number of bin of the blackman window is six .
so we need to multipli by six .
so we need at least <num> sampl .
okai , so in here , we'll need <num> sampl .
that's good , that's an odd size .
and for the fft again , we , it's good to have a lot of zero pad .
so let's have <num> .
and well the middl of the sound , that would be okai , point five .
and okai , let's analyz thi 'kai , so thi is the violin sound .
well interest enough here that the period in the time event is not so easi to identifi , but in fact it's like two bump for oscil .
so there is some like the , the higher harmon ar veri loud , so the first period is not as clear .
but anywai , we see quit clearli the , in the frequenc domain , the harmon , even though some ar not so clear .
mayb even a bigger window would be better .
okai , so let's go to the harmon model and mayb choos even a bigger window .
let's open again the violin sound .
and instead of <num> , let me us mayb <num> so quit a bit more .
and again let's us the blackman window .
and for <num> is fine .
the magnitud threshold , minu <num> , that should be okai .
the , durat of , the minimum durat of the track's <num> .
the number of harmon , <num> , that should be fine .
we have to , again , have a rang that allow for the harmon , the fundament frequenc to be within that .
so , minu <num> to a <num> is fine .
and thi error , maximum error us in the two wai mismatch , let's try it , see what happen .
okai , so let's comput that .
and that's okai , that's pretti good .
thi is the origin sound .
the harmon ar quit well detect .
of cours , in the end and some of the higher , ar a littl bit irregular becaus , of cours , the harmon ar not so stabl .
and the synthes , let's listen the synthes of it sound pretti good .
and as an exercis to see how it realli track the harmon , let's chang the number of harmon .
for exampl let's just us five harmon .
so you'll onli analyz the first five harmon .
and let's see what it doe .
okai , so it onli found the first five harmon .
and we can listen to that .
yeah , okai , so it's much closer to a sinusoid , becaus there is much fewer sinusoid .
and of cours you can plai around with these paramet to get a differ control and to set differ compromis .
but that's about it what i want to sai , so let go back to the slide , and basic in thi lectur we went over the , the sm tool interfac to analyz an electron sound as sawtooth sound and violin sound .
so hopefulli that gave you an idea of thi harmon analysi and what you can do with that .
and , in the next class , we will work with more complex sound .
with a harmon sound that chang in time .
so we will be abl to go a littl bit more deepli into thi harmon model and the sm tool , to realli analyz a sound that vari in time and that mayb can take advantag of thi model even more .
so thank you veri much , and i hope to see you next class .
welcom back to the cours on audio signal process for music applic .
thi week we ar talk about the harmon model .
and in these demonstr class , we ar try to understand thi model by actual us it , by analyz some sound and synthes them .
in thi lectur i want to go a littl bit beyond what we did and analyz a fragment of a sound and see if we can take it to the limit and see what is it potenti and it limit .
so in particular , we will be analyz the littl few note of a cello that i plai .
the cello is of cours a great instrument , it's a veri tradit instrument that you can do a lot of thing with it .
so a good wai to get a grasp of the type of sound that the cello doe is to look in freesound , and just search for violoncello , okai , and that will give you a few sampl of differ type of cello sound , so in fact , for exampl the first on as a kind of an extend techniqu .
so let's listen to that .
okai that's what is call a seagul effect , and it is kind of an interest sound .
of cours you can also get some more tradit note plai what is call tenuto or also with the cello you can plai pizzicato note and thi is a pizzicato note .
but of cours you can find mani type of sound and littl fragment .
the sound i will be us is a small , short cello phrase from a veri tradit catalan song , the song of the bird .
and in fact it's the on that i us in the teaser of the cours .
in fact let's listen to that on .
okai so let's analyz thi sound .
and let's open the sm tool gui and we'll first start from the short time fourier transform .
thi is a time vari sound so we need the short time fourier transform to get a grasp of it .
let is open the sound , cello phrase right here .
okai and okai we have to choos the paramet .
instead of a ham window let's choos the blackman window , the blackman window the main lobe is wider than the the ham , but the side lobe ar lower .
and that mai be good for thi sound .
so let's choos a blackman window .
and then okai , window size , we don't have much to decid from .
but let's just , for exampl , let's us <num> sampl .
just leav that fft size at <num> .
and the fft size , the hop size ha to be at least on fourth of the window size .
so let's us <num> .
okai , and now we comput that .
thi is a longer fragment so it's go to take a littl bit longer .
and , we will be abl to , okai , visual the magnitud spectrum and the phase spectrum .
now what we ar interest is in decid what paramet ar need in order to be abl to distinguish the harmon of these phrase .
so in fact , an import thing is to identifi what is the lowest fundament that is be plai .
the lowest fundament will be the on that will determin the minimum distanc between two harmon .
so let's zoom into the veri bottom of thi spectrogram .
okai .
okai , so thi is the first and a littl bit of the second harmon , so it's a veri clear harmon sound .
and we can see that it start a littl bit low and it goe up and then it goe down .
so , clearli the lowest frequenc ar go to be the first and the last .
but here we see that the resolut is not so good , in fact we see these box , kind of thi quantiz , in the horizont axi .
in the vertic axi is pretti good , you have <num> sampl , so there is quit a lot of frame .
but there is not that mani in term of frequenc sampl in order to be abl to visual .
and then further on analyz the peak of thi harmon .
so let's increas , mayb the window size can not be increas , becaus then you would lose the time solut .
but let's increas the fft size so we get a smoother spectral more sampl .
for exampl let's sai <num> , so quit a bit more , of the fft size .
so thi will give us quit a bit of zero pad , and therefor will give us mani more sampl in the frequenc rang , even though the actual data point will be the same .
so well again thi take a littl bit to comput .
okai so thi is the spectrum .
clearli there is a more fine resolut than befor .
let let's do the same thing .
let's zoom into the veri bottom of the spectrum .
okai and yeah .
now we definit have mani more frequenc sampl .
and though of cours it look similar , but we now would be abl to see the center of the window much better .
so if we look , like in the last note but at the center of thi , look at the y axi , it's around <num> hertz , okai ?
so that would be the lowest note .
and the highest note is around <num> hertz , okai ?
so thi is good inform for decid now the window size that we should us .
so in fact okai , let's do the sinusoid model .
and let's look at thi inform .
so in order to decid what is the period length so we have to take <num> , <num> , and divid it by that frequenc which wa around <num> , let's sai and <num> hertz .
it's okai to make it a littl bit lower , so thi is <num> sampl and then if we us , for exampl , the blackman window well we would need six time that .
so if we take six time thi .
okai .
that would give us <num> sampl , okai , so let's put in the window size , <num> sampl .
that should be enough to discrimin the the harmon .
and the fft size , i think it wa good to have thi big fft size , so <num> , <num> wa a good choic .
and that gave us a good a resolut , that mean a visual .
and now of cours in the sinusoid model we can choos the thresold , the minimum durat of the sinusoid , and how mani sinusoid we want to track , the maximum frequenc deviat , here we should think have it a littl bit bigger becaus there is quit a bit of deviat .
okai .
and now , let's of cours , choos the cello sound , the cello phrase .
and we will comput it .
okai , so thi is the sinusoid analysi .
and yeah , we see the harmon follow kind of the melodi .
we also see short sinusoid , in fact if with zoom in into on region of that .
for exampl , let's show thi region here .
okai , we see , well definit the harmon , but also we some line in between them .
then we see some trajectori stop and continu , anywai , so thi is the sinusoid model , if we listen to the result well , it's pretti good .
mayb , we're lose a littl bit of of the attack of the note .
but it's pretti good so let's go directli now to the harmon model .
and let is , okai we us the same cello phrase and let's us the blackman window , let's us the same <num> we should have an odd size window so let's us <num> , in term of the fft size again , i think it wa a good choic <num> , a lot of zero pad .
the magnitud threshold minu <num> , that's okai .
the durat of the track , okai , so thi will will requir to be <num> second .
i think we can even make it bigger .
so let's sai <num> second .
and the number maximum of harmon there is clearli no need for <num> .
in fact a wai to check how mani harmon ar need , is if we divid <num> , <num> by the frequenc , the lowest frequenc , okai now we have to divid half of the sampl rate so <num> divid by the lowest frequenc , so <num> , that would be the maximum number of harmon that we would have if we realli would have all the harmon in the lowest note .
so no need for <num> , let's sai , let's put <num> would be plenti .
and here , now is where we have to choos a rang that includ all of thi melodi .
so we said that the lowest frequenc wa around <num> .
let's make it safer , so let's make <num> and the highest wa about <num> or someth , so let's make it quit a bit higher just in case , let's make it <num> , okai ?
and thi is a an error threshold that will be quit relev now , for identifi the fundament frequenc .
but let's just leav it as it is now .
and see if we'll have to chang it later .
okai so now we'll comput it .
oh , again thi will take a littl bit of time .
okai , so thi is the harmon that it ha obtain .
and that look pretti good .
it found quit a bit of harmon .
of cours , in the transit that where the problem , or at least the deviat , you know the deviat occur if we just zoom into just on transit .
let's sai , so thi is where the harmon of cours get lost .
and then thei ar pick up again .
if we listen , well let's plot that again .
that , to the origin , and if we listen to the synthes okai , that's pretti good , now in term of thi error threshold of the algorithm , if we make it more restrict , so that mean that unless it's below a certain error it will not be accept , we might see then that some of these area it doe not find a fundament .
so instead of seven , let's put for exampl , two , and let's see what it find .
okai , so now we see the result .
and we clearli see that in the transit there ar gap , and thi is becaus in the transit , the fundament is not veri clear , we ar in kind of an attack , a nois attack .
so it ha lost a littl bit of the transit , and if you listen to that , in fact , we're go to listen to these gap .
okai , so there ar gap in the transit , becaus that's where the area were we didn t find the the fundament and therefor it didn't find ani harmon , and that's basic all i want to sai .
so let's go back to the slide , and well we have us the sm tool gui in order to analyz thi cello fragment , then we have us the short time fourier transform , the sinusoid model , and then the harmon model , to see thi phrase and to analyz the harmon , and we can see that by tweak the paramet we can get quit a bit of differ in the wai that these harmon ar analyz .
so that's all , and thi is all for the demo class of thi harmon model week .
so hopefulli thi ha given you a view of how the harmon model can actual be us in practic .
and still it's not ideal and there is some part of the sound , especi like in thi sound that we just heard , in the attack , that we lose a littl bit of the sound that is present there .
so the next week we will extend the idea of thi sinusoid and harmon model , to includ that aspect , to includ what we will call the residu or the stochast compon .
hopefulli that will allow us to gener our model and to be abl to handl mani more type of sound .
so we'll see you in next class .
thank you veri much .
welcom to the cours on audio process for music applic .
thi week we ar talk about the harmon model , and in thi program lectur i want to talk about the implement of it .
in particular the first part of it , the part that requir detect fundament frequenc so that we can then identifi the harmon of a given sound .
so we will be talk about on particular algorithm , the two wai mismatch algorithm .
that's an algorithm that we present in the in the theori lectur .
and it's a frequenc domain algorithm that basic tri to identifi harmon seri , possibl harmon seri that match the peak of the spectrum .
so in thi plot we see the measur peak that we have identifi and then we keep try differ predict fundament frequenc and and the harmon of it .
and we measur the error , we measur the distanc between these two list of valu .
and we do that measur two error , the predict to measur , the differ between the distanc between the predict and the measur valu , and also we have anoth measur which is the measur to predict error .
but let go directli to the actual code .
okai ?
in the sm tool packag , in the util function file , there is the code for the two wai mismatch algorithm .
the core of it is a function call two wai mismatch .
in fact there is a c version and a python version .
now we will go through the python version .
when we run it we normal us the c version becaus it more effici .
so thi algorithm what it doe is it receiv the peak , the frequenc , and magnitud of the peak .
it receiv a list of candid of frequenc of candid of fundament frequenc .
and it basic identifi which is the candid that ha the smallest error .
so it doe that by measur the two error , the error predict to measur , which is thi part , and then the measur to predict which is thi part .
within it it keep identifi all the distanc between all the valu of the harmon seri and the peak , and it ha differ wai of compar those .
we're not go to go into detail of that but of cours feel free to go into it .
and then final it just creat an an error arrai , which is the list of error of all the candid , okai ?
so we have , in there we have all the error for everi singl on of the candid .
and then what we do is we choos the minimum of those error and the fundament frequenc is go to be that candid that ha the minimum error .
then thi function is wrap by anoth on that is the on respons for gener the candid and call the function .
so thi f0twm receiv again the pic of the spectrum , and then it receiv the control paramet .
so like the maximum error allow .
thi is the error that will be allow for the fundament frequenc to be accept as such .
and then the rang of the fundament frequenc from a minimum to maximum f0 .
and then there is on valu which is kind of a memori track valu .
that is basic the fundament frequenc of the previou frame .
and thi will allow us to refin the fundament frequenc by restrict that the fundament frequenc should be as smooth as possibl .
but the algorithm here is veri simpl , in fact it just take the list of peak that ar within the minimum and maximum valu of the frequenc .
and the rest it just make a few more comparison about that .
there is a lot of room for improv in thi algorithm , in the sens of gener more candid so that we could do a more exhaust trial of differ frequenc .
but for effici reason we made the simpl implement , so that allow us to comput thi quit effici .
okai .
so i wrote a littl script that basic doe an analysi of a singl spectrum and then it comput the error of all candid .
okai .
so in here i have thi littl script that from a sound a sawtooth sound it just comput on dft .
so here it comput on dft of that particular sound .
it find the peak , it find , it interpol the peak , and then it gener possibl candid of the fundament frequenc .
in a similar wai than what we just saw , but more simpli , in the sens that we ar take the candid as all the peak lie within the rang that that we specifi .
and then it call the two wai mismatch algorithm , but i modifi the function , so i have it here , in a wai that instead of return just on valu , the fundament frequenc that is the minimum error , it return all the error .
so it return an arrai of all the error for all the candid .
so that we can look at them and see how how thei behav .
okai , and then it print here , it just print the spectrum and the peak , so we can understand a littl bit what's go on .
okai , so let run thi .
so let run test .
okai , and thi is the spectrum , the magnitud spectrum .
and the peak that we found .
so let's mayb zoom in a littl bit , so that we can see a littl bit what is go on .
okai .
so these ar clearli the harmon of the sound .
it ha also found peak like befor the fundament frequenc and on after the fundament frequenc .
but that's well , basic in ha identifi the harmon .
so now let's plot , or let's print some of the intermedi valu of all these .
okai , so clearli the first thing is the candid .
so if we print the f0c , thi is the candid , and it's go to be the peak that lie within the frequenc rang that we specifi , which wa between <num> and <num> , <num> hertz .
so the candid ar the first five peak , and if we print their frequenc , so like ipfreq and f0 candid .
those ar the frequenc that lie within the frequenc rang , and that we're go to test in the algorithm .
so , we're go to test <num> hertz , <num> , <num> , etc . , etc .
so now let print the error that it return .
so , f0 error .
which is the output of thi algorithm will have the error for everi on of these valu .
so for <num> , we have an error <num> .
for <num> ha minu <num> . <num> .
so clearli thi is the smallest of all error and thi is inde the fundament frequenc , the candid that is the best on as a fundament frequenc .
so thi error valu ar realli mislead becaus thei ar not bound within a particular rang .
it can even be neg like in thi case .
and clearli the larger the error , the less chanc that it's go to be a fundament frequenc .
so we will be focus on the lowest error that we have .
okai , so thi work quit well .
now we can we can go into anoth file that basic doe thi for the whole sound .
so we will be iter for the whole sound .
we ar just do the exact same thing .
we ar take the sawtooth sound and we ar try a differ window , we'll keep do it to see if we can get a differ type of result .
and we take the fft , we defin the minimum and maximum , and we call a function f0detect .
which , in fact , is in the harmon model file .
in the harmon model file , there is thi function call f0detect , that doe all what we talk about .
basic , accept thing like the input sound , the sampl rate , window , fft size , and the valu given by the user .
it iter over the whole sound and it call the peak detect , peak interpol , the two wai mismatch algorithm , and then it decid which on would be the best fundament frequenc .
there is a few sort of constraint to make sure that the fundament is stabl in time , relat to thi track that we talk about .
so but basic it return just the fundament frequenc that it consid to be the best .
okai , so let now look at test1 and let run it .
so let run test1 .
okai , and now in fact we can just show the f0 .
okai , so thi is the valu that it ha return .
well the hop size that i specifi wa quit larg , <num> , <num> , so , it is not that mani sampl so it is easier to look at .
and , okai , clearli there is not a perfect fundament frequenc identifi .
it kind of vari , like it goe from <num> to <num> someth .
in fact if we plot thi arrai we will see the variat that we will have here .
okai , well let's get rid of thi and let's get rid of thi and now let's plot it again .
okai now we can zoom into the veri top .
okai .
so clearli it move around <num> and these variat ar caus by , clearli , by the error of the peak detect algorithm and the interpol .
so that we ar not realli exactli at <num> .
but of cours the error is veri small , it's less than <num> hertz error .
so thi is <num> , and <num> and a littl bit below .
so thi is clearli a quit small deviat from the nomin valu that is <num> .
if we chang these valu we might get better result .
for exampl , instead of have the window be <num> , <num> let let make it twice as much .
and the fft size let make it twice as much .
okai , and oh , no , time <num> .
okai , and now we will , so let see that befor we were <num> . <num> , <num> point someth .
let's see if that's ani differ .
ani differ by look now at these valu .
okai ?
so thi is what we got now .
and it's a littl bit better .
so we can see the differ between these two valu .
now the error is smaller than befor .
in fact if we plot now thi f0 well there is thi exponenti to the minu <num> to the , minu <num> .
so clearli thi is a veri small , it's a smaller error rang than what we had befor .
so the lowest , the lowest now is <num> , and the highest valu is <num> . <num> .
so that mean that as the window get larger and the fft get larger , the zero pad increas , we will have better valu .
okai , now let's look at a real sound and let's finish by run it on thi obo sound .
and basic i do basic the same thing .
so i can just run thi test2 .
okai , thi will comput the fundament frequenc of thi obo sound .
and now if i plot thi f0 , okai , and now we will have to zoom into the meaning rang .
okai , well that is definit also a variat .
but here that is both the variat that mai be caus by error and the variat that is clearli natur to the plai of the obo sound .
so for exampl thi sound is clearli higher than <num> .
so the obo sound wa plai a littl bit higher in frequenc than <num> .
so around <num> .
and there is kind of a period oscil that make sens to be present in the sound .
and , of cours , there might be some of these oscil that mai be caus by some error .
but thi is a veri interest wai to try to understand what is go on both in term of the algorithm and in term of the sound .
in term of thi obo sound and natur oscil that mai be caus by either the acoust or the perform that is plai thi note .
okai , and that's all i want to sai .
so basic , we have talk about an implement of the two wai mismatch algorithm .
and i think that ha given us a view on the issu of how to detect the fundament frequenc .
of cours we have us python and a number of of these packag , and the implement that , that we have in the sm tool packag .
so that's all .
so thi wa the first program in class and thi harmon model week .
and then on the next lectur we will then add the whole model and includ thi fundament frequenc into a harmon analysi .
and we'll be abl to do both the analysi and synthesi of sound .
so thank you veri much and i see you next lectur .
welcom back to the cours on audio signal proces for music applic .
in the previou program class we talk about the pitch detect , the fundament frequenc detect algorithm , and how to identifi the fundament frequenc of a harmon sound .
now we ar readi to put togeth the whole harmon model ; analysi and synthesi .
so thi is the block diagram of the system that we have and we're go to explain , in which we start from the standard block that we alreadi have seen in the sinusoid model .
so that take the input sound , it window , then it perform the dft and then it find the peak .
and these two block ar the on's that ar specif for the harmon model .
so the first on is the f0 detect .
so from the peak it identifi the best fundament frequenc .
and then it tri to find the harmon base on that fundament frequenc , and thi is what we will be talk about todai .
and then thi goe to the synthesi and the synthesi is exactli the same done in the sinusoid model .
so , we gener the sinusoid in the spectral domain .
we do the invers fft , and then we do the overlap add to reproduc the whole sound .
so , let's go to the file harmonicmodel . py , thi is the file that includ most of the function of the harmon model , the actual implement of the f0 detect is in the util function's file .
but here we have the wrapper to the fundament frequenc , f0 detect , that we alreadi mention in the last lectur .
then we have the harmon detect that we'll be talk about shortli .
and , then we have the complet harmon model .
harmon model that doe both analysi and synthesi , but thi is meant to be run in real time , so it doesn't allow for clean of the track .
so we will be talk about todai on the analysi and synthesi separ .
becaus thi allow us to do clean of track and so handl a littl bit of memori of past few frame .
and thi will result into better analysi and resynthesi .
so let's talk about thi function , harmonicmodelan so it input all the paramet of the analysi .
the input arrai of sampl , sampl rate , the window , the fft size , hop size , the threshold , t for the peak , the number of harmon that ar allow , so thi is the maximum number .
then the rang of frequenc for the fundament frequenc detect , so thi , minf0 and maxf0 .
then there is thi error threshold , that is also part of the f0 detect algorithm , so thi minimum error that we will be accept .
and then for the track continu , harmon continu , we have these two paramet .
on is the harmon deviat slope , thi is a sort of deviat slope from the previou seri of harmon and from the ideal harmon seri .
and thi is a wai to account for that higher harmon , should allow for bigger deviat than lower harmon .
and then final a paramet to control the length of harmon track , so that we don't accept shorter track than the on specifi with thi paramet .
and the actual code is again veri similar to the sinusoid model .
we have a main loop that iter over the whole sound .
and it keep analyz the spectrum , find the peak , interpol those peak , and then here is where the specif code of the harmon model start .
so we call the fundament frequenc algorithm .
okai ?
so thi is the on from the util function that we we talk about in the last lectur .
then we have these few line that make sure that thi new fundament frequenc is not that differ from the previou on , so that it maintain certain continu .
and then there is thi function call harmon detect .
thi is the on that identifi the harmon of fundament frequenc .
and it's abov thi code .
so let's go to here .
thi is the harmon detect function .
okai , so thi is the on that given the fundament frequenc f0 and the peak of the spectrum it identifi which of these peak ar close to multipl of thi fundament frequenc .
we also , as input , we accept some inform from the previou frame , so that we can identifi if there is some time continu .
and then thi deviat , that is the deviat we allow from perfect haromonicitii , and from perfect continu from the previou frame .
okai , so the code is not that complic , the core is basic these three line in which we defin the deviat from perfect harmon .
so we find the peak compar , or a particular peak compar , with a particular perfect harmon .
we also compar a peak with respect to the previou harmon come from the previou frame .
and then we defin a threshold base on thi harmon deviat slope .
that's the on that will be accept .
so if the current peak is within that threshold , therefor within the kind of vertic deviat and horizont deviat .
so it had thi frequenc and time evolut track .
so we accept that peak as a harmon and we keep ad to the harmon that that we creat .
and that's all .
that's basic what the harmon detect doe .
so we go back to the harmon model and now , after thi harmon detect , that's it , thi is a sort of some code to creat the arrai of valu that keep ad up to the whole matrix of the output .
and final , onc the whole process is done .
so , onc we have gone through the whole sound , we clean the track .
so we delet the track that ar smaller than a given durat .
and again , thi is the same that we did in the sinusodi analysi .
okai , so i wrote a script that basic analyz a sound with thi harmonicmodelan function .
so we took thi vignesh sound and specifi all the paramet so , the number of paramet ar start to get quit a few .
we have the window , we have the window size , the fft size , the threshold .
there's no need for thi comma here , so minu <num> as a threshold , the minimum durat in time .
the number of maximum number of harmon .
the minimum fundament frequenc and maximum fundament frequenc .
the error threshold that we accept .
and then thi deviat slope that we just talk about .
then there is these two paramet that ar normal fix becaus thei ar more relat to synthesi , which is the fft of the synthesi buffer .
and the hop size , which given that the fft buffer requir for the synthesi , it requir a hop size to be on fourth of that , so we normal put h as be <num> .
so we normal don't allow ani chang from that .
so from the graphic interfac there is no control over thi two paramet .
okai , and then we read the sound , we get the window and we call thi harmon model and here i just plot these the frequenc of these trajectori .
so let's run these .
so let's run , test3 .
now let's first save it .
okai , and now let's run it .
okai , and thi is the trajectori we obtain .
okai , thei're , okai , thei're pretti good .
if we zoom in , into a particular region , we might be abl to see a littl bit more .
okai .
okai , so of cours if we zoom in we're start to see the problem at the transit between note , and especi we see a problem as the harmon go higher and higher up .
and thi is becaus thi is , of cours , a linear scale and these deviat ar kind of logarithm .
so as the the frequenc goe up , in fact , the chang get much larger becaus thei ar logarithm chang .
so in fact thi is the reason why we need these deviat slope that we specifi here .
so for exampl , if we reduc thi deviat slope .
let's make instead of <num> . <num> , let's make <num> . <num> .
and let's run it again .
okai , we will see that now there ar much fewer track , especi in the higher frequenc .
it ha restrict the deviat allow in the higher frequenc .
so it ha , the increas of deviat is much smaller .
so it ha not allow these larger deviat .
so with that we have quit a bit of control of how thi track process is implement .
okai , so in the sm tool packag , there is thi harmon model function that perform both the analysi and synthesi , and is in fact the file that is call from the interfac .
so in thi file we have on main function .
and it ha all these paramet that we alreadi talk about .
but apart from the analysi that we alreadi perform , it doe the synthesi .
okai , and then it save the file into a synthesi file and it plot analysi and synthesi of thi .
so , let's run thi harmon model function , okai .
so thi will take a littl bit longer becaus it ha to do the analysi and then the synthesi , and then it just plot the first <num> , <num> hertz , i specifi to plot onli thi <num> hertz .
so here we see all these trajectori that evolv in time , and the synthesi .
at least the waveform look quit similar .
so let's listen to the output sound .
so now it creat a file call vignesh_harmonicmodel . wav .
so i can plai it .
so if i put the exclam mark plai , and just type vignesh .
okai ?
so thi is the synthes version of the origin file and it's quit good .
i mean , we will see start next week .
that , in fact there is some thing that ar left , that ar not includ in thi resynthesi .
and thi is basic the residu compon that we ar miss .
but anywai , that's all for the harmon model .
and we go back to the slide .
so we have basic seen the harmon model from an implement point of view , by look at the code .
and all thi code is in python , where in fact the fundament frequenc detect , the on that we ar us is a c version implement , but we also have the python version .
and all thi is includ in the sm tool packag , so i would definit encourag you to go through that and run it and abus it if you want .
so that wa all for these program class on the harmon model .
hopefulli thi ha given you a sort of a depth , indepth view of what it entail to implement thi type of of model .
and well we'll continu .
so next week thi will get a littl bit more complic becaus we will try to see what is miss out of thi model .
and we will try to model thi miss part , which is go to be the concept of the residu or the stocast compon .
so , i will see you next week .
bye , bye .
thank you .
welcom again to a lectur of the cours on audio signal process from music applic .
until now we have been analyz sound us sinusoid represent .
thei work , but there ar mani type of sound that ar best describ by what we call stochast model .
signal like the sound of the ocean , or the bow nois of a violin fit into thi categori of stochast signal .
we will talk about these todai .
we will first introduc the concept of stochast signal , then how to model them .
what is the model of a stochast signal .
and then more specif on how to deal with sound us thi model .
so how to approxim from a stochast perspect a particular sound .
and final , we will describ the concept of a system that can perform analysi and synthesi of sound us these model .
the stochast model is complementari to the model that we've cover until now .
in fact , in the follow lectur we will combin the stochast model with the sinusoid base model and we'll be abl to take advantag of the best of both type of model .
what is an stochast signal ?
well , an stochast signal can not be describ in a determinist wai , it can onli be describ probabilist , and the field of statist signal process deal with these type of signal and it's quit advanc topic .
here , we'll give a veri broad approach , which is suffici for our need .
so in statist signal process we talk about the law of probabl as a wai to describ these stochast signal , and we talk about the mean , the varianc and the probabl distribut of particular signal .
and there is some mathemat function that ar us to analyz these type of signal and captur some of it characterist .
for exampl on is the autocorrel function .
we have alreadi seen thi function befor , the autocorrel function allow us to measur the period of a signal or the degre of repeat pattern in a particular signal , we us it for detect the fundament frequenc .
so thi is a function that can be us to measur how stochast is a signal .
if there ar no repetit , that mean that it's go to be close to ani stochast signal , so the lower the autocorrel function valu is the closer is go to be thi signal to an stochast signal .
okai .
and anoth mathemat function that we can us is what is call the power spectral densiti .
and also we have seen a similar version of that , is basic the dft but with a major differ , is basic the dft to the limit .
we take the squar valu of the absolut valu of the dft .
and we take n , the size of the fft , to infin , and if it converg , if it converg to a function , that's our power spectral densiti , and that happen in quit a few signal .
and there ar mani model that have been propos to deal with thi type of stochast signal .
we'll us a veri gener model express by thi equat , which is in fact the convolut of two signal .
so we'll consid as an stochast model the idea that a signal can be express as the convolut of white nois with the filter approxim of our signal .
so by take thi convolut we ar assum that the signal that we ar deal with is is well express , or well repres , by it impuls respons .
if we look at the same equat from a spectral point of view we can understand a few more thing .
so , a convolut in the frequenc domain is the product of the two spectra .
so , the product of the white nois , the spectral of the white nois with the spectrum of the impuls respons of the filter .
and if we express it in polar coordin , then we can express it as the product of the two magnitud spectra and multipli by the exponenti e to the j and the sum of the two phase spectra .
okai .
so that's the product of these two spectra .
and if we consid that thi is a stochast signal we basicali can sai that the magnitud spectrum of white nois is a flat line , and we will see that a bit later , so it's a constant , so therefor we can take it out of the equat .
so we can reduc the concept of the impuls respons of the filter of the input signal by the magnitud spectrum of the input signal , an approxim version of that .
which could be the the frequenc respons of a filter or it could be some other type of function .
but a function that approxim the magnitud spectrum of the input signal and as the phase of the model , we us the phase of white nois .
becaus the phase of a stochast signal is not so relev .
therefor , we just can reduc the phase represent of our signal with random number , with random number of the white nois .
okai .
so thi is a good wai to express thi stochast model .
so , we take an approxim of the magnitud spectrum of our signal and we take random phase for the model the phase spectrum .
so thi is an exampl , so we start from a fragment of the sound , for exampl , of an ocean sound , and let's listen to that .
okai .
so we just take just on frame of that .
and then we comput the magnitud and phase spectrum of thi ocean sound .
so the red plot is the magnitud spectrum of our input signal .
and the phase the cyan function is the phase of the input signal .
and then the black line , the black line on top of of the magnitud spectrum , is the approxim of thi spectrum , and we'll talk about differ wai to approxim that .
so it's basic a smooth approxim to the magnitud spectrum .
and the black line in the phase spectrum ar basic random number .
okai ?
and we claim that these random number ar an approxim , or a model , of the random number that in fact ar in the ocean phase .
so , we ar basic sai that the phase spectrum of an ocean sound ar just random number and can be approxim with a random number sequenc .
okai .
and then if we take the invers fourier transform of these two black line , of the approxim of the magnitud and the random phase , we get thi output signal .
and we ar claim that perceptu thi signal is go to be similar to the first on .
of cours , by look at it that might not seem to be the case .
becaus it's clearli differ shape .
but given that we ar talk about stochast signal , the detail of the shape ar not relev .
what is import is the statist properti and so we will be abl to to try to prove if thi type of approxim work .
so the main analysi issu for thi stochast model is the approxim of the time vari magnitud spectrum of the input signal .
so we will have to comput thi approxim at everi frame .
a common approach for obtain a filter that approxim the spectral characterist of a sound is to us linear predict code .
with lpc , with linear predict code , we can obtain a set of filter coeffici , a sub k .
and the frequenc respons of the result filter approxim the spectrum of the input sound .
so here we see a signal , x , and the idea is that the approxim of thi signal is defin , accord to thi lpc model , as the linear combin of past sampl .
so it's defin as the sum from k equal on to capit k of a sub k multipli by x of n minu k , which ar the previou sampl .
thi is basic the express of an ir filter .
infinit impuls respons filter .
that is a linear combin of previou sampl .
and then the goal of lpc is to find these coeffici .
to find a sub k that best approxim x and gener a similar signal x hat .
so we defin an error function that is the sum of the squar root of thi , the origin signal , with thi approxim signal and with some origin from minu infin to infin , of cours we narrow it down to finit length signal .
but with thi error measur , basic we can try to identifi the a signal , the a coeffici , that minim thi error signal .
we will not talk about how to actual implement that but thi is a veri common approach for obtain these coeffici and therefor for do what we call the lpc approxim .
so if we start from a sound , for exampl , a voic sound like thi soprano sound that we can listen to .
in fact , thi is the type of sound that is commonli approxim with an lpc model .
and what it doe is obtain thi black line that we see in the bottom plot .
so in the bottom plot we see the magnitud spectrum of thi fragment of thi voic .
and the black line is the magnitud spectrum of the approxim of thi lpc filter , that approxim thi signal .
and as we can see it kind of approxim what is a veri common characterist of the voic which is these formant , so these ar reson .
so an ir filter is a wai to approxim the reson of a signal quit well and so the lpc work quit well for thi type of signal .
but the lpc doe not work so well for mani other type of signal .
in here we present a more simpl , a simpler approxim , that is just base on low pass filter .
and we show it by implement a low pass filter us the dft .
so we start from a signal , a of k , and then we take the dft of that and we low pass filter .
low pass filter mean , basic , we cut the spectrum and we onli accept the lower part of that spectrum .
and then we can take the invers dft of that and we get anoth signal which thi a tild is is an approxim , a smooth approxim , of the origin a sub k signal .
then we might need to extend the signal in order to gener the same number of sampl , at the same sampl rate that the signal that we start with .
so in order to do that we might have to take the dft of that , zeropad to extend it to a longer a fft size , and then take the invers dft of that .
so then b of k is of the same length than a of k , becaus the a tild is just an approxim , it ha less sampl , which is good becaus that mean that we have an approxim , with few number of sampl , these coeffici , basic , thi a tild , is just the coeffici of the approxim .
and thi is go to be the approach that we'll us in our implement .
so now let's talk about the synthes part of the stochast model .
if we approxim a sound us lpc or with ani other type of filter design approach , we can synthes a signal from the obtain filter coeffici by filter white nois .
thi equat that we have alreadi seen befor is the implement of an ir filter in which we ar filter white nois .
we ar filter the signal u with a seri of coefici , a sub k , that ar the coeffici of the filter .
and the implement of thi equat can be done in differ wai .
for exampl , these two block diagram ar two differ structur that ar us to implement these type of filter .
the on on the top is call direct form structur and the bottom on is the lattic structur .
but it we obtain an approxim us the low pass filter approach that we mention we can synthes the sound directli by comput the invers dft .
so in here we start from our approxim of the spectrum , of the spectrum of the origin signal , which is basic thi smooth version of the signal .
it's kind of like , what we said the low pass filter approxim of the signal .
and then we can just take a random phase , the phase of the white nois , and we take the invers dft and that's basic go to be a filter oper of white nois .
okai , so we start , we start from the smooth approxim of the signal , the random phase , and then we take the invers dft .
and thi will be the method that we'll us in our exampl .
so now let's put it out togeth into an analysi synthesi system us thi stochast model .
and , so here we see the block diagram that we will be implement , which we start from the signal , x of n , hopefulli an stochast signal .
we comput the fft .
we take the absolut valu and then we do thi stochast approxim which is , again , thi idea of low pass filter .
and so , approxim the magnitud spectrum with a smooth curv and then we can do the synthes .
the synthes will be done by do thi invers fft of thi stochast approxim that might have to be zero pad and so to interpol it to be a longer size spectrum .
and then we gener random number for the phase spectrum .
and we can take the invers fft of that , and that will return a fragment of a sound .
and then we can just do an overlap add , similar , in exactli the same wai we did for the sinusoid model .
here also we will have to take care about some smooth window , so that the overlap add work correctli .
but with thi we can reconstruct the origin signal .
so let's listen to some exampl .
okai ?
so thi is the ocean sound that we've plai befor .
and then the first is the magnitud spectrum .
the absolut valu of the spectrum , of the whole , so the spectrogram of thi whole sound , with a particular window and fft size and a hop size , and then the stochast approxim is basic a visual of these coeffici , that ar much fewer .
so in fact here we took a kind of a compress of . <num> so everi ten sampl of our magnitud spectrum we reduc it to on .
so that's the idea of the approxim and then we can synthes by combin thi magnitud spectrum with random number .
so , let's listen to the synthes result .
if you do an ab comparison with the origin ocean it sound differ , but it clearli sound like an ocean sound .
so for a stochast signal mayb it's not so relev to reproduc the exact characterist of the sound but basic , these kind of gener characterist of thi sound and thi is what thi approach doe .
so the field of statist signal process is quit an advanc topic , as i mention and most of the refer in fact ar quit complic , ar quit advanc .
if you start by look at these wikipedia page , you can get link and descript to all thi more complex view of stochast process and statist signal process , so feel free to go there and check all these topic .
and that's all .
so we talk in thi lectur about stochast model .
the goal wa to introduc a strategi with which to model some sound , or part of sound , that cannot be well repres with sinusoid .
in the next lectur we will see how we can combin thi stochast model with the other model we have been discuss , the sinusoid base model .
so , i see you in the next lectur .
bye bye .
welcom again to the cours on a audio signal process for music applic .
in the last lectur , we talk about stochast signal and how to model them .
with that we can now extend the sinusoid and harmon model that we talk about befor into the concept of sinusoid or harmon plu residu or stochast model .
we will decompos sound into these two part , the sinusoid or harmon on , and the residu or ideal a stochast on , if thi residu is the stochast signal .
so in thi lectur we will combin all the model we have been talk about until now .
we'll put togeth the sinusoid or harmon model with the idea of residu compon .
for that , we'll need to talk about the subtract of the the sinusoid or the harmon in order to obtain the residu .
and we will talk about a system that put these togeth into the harmon plu residu system .
then we will introduc the stochast model and we'll put togeth the sinusoid and , or harmon model , with the stochast on for the residu .
so in order to do that we will need to talk about how to model the residu as an stochast compon .
and final we will make an exampl of thi system that combin the harmon plu the stochast analysi into an analysi synthesi system .
the sinusoid plu residu model is an extens of the sinusoid model .
we assum that a sinusoid model is not abl to repres the whole sound .
and that there is a residu compon that is perceptu relev .
so it's a sound that need to be kept .
so in here we see in thi equat that y , the signal , is model with thi sum of sinusoid , time vari sinusoid with amplitud and frequenc .
and we have xr which is our residu .
so the whole sound is ys , our sinusoid compon , and xr our residu signal .
and xr , is simpli comput by subtract the sinusoid from the origin signal .
and thi is what we will be talk about in thi lectur .
okai but it's much better , at least from our point of view , to show thi model from the spectral point of view .
becaus that's where we're go to be develop all these model from .
okai ?
so here we see the sum of the sinusoid as the sum of the transform the window shift to a frequenc and scale to the amplitud of these sinusoid , plu the spectrum of thi residu compon .
and the spectrum of thi residu compon , now thi is how we go to do it , is obtain by subtract the spectrum of the sinusoid from the spectrum of the origin signal .
okai .
so , let's show an exampl exactli how thi will work .
thi is on frame of a sound and here we can show the differ step involv in thi harmon plu residu analysi .
on the left top we see our frame , window frame of a flute sound .
okai , so it's just a few period of a flute sound .
and then below that we see the harmon analysi that we do from the spectrum .
so we do the spectral analysi , the peak , and we select the peak with these blue cross that ar realli the harmon of that particular sound .
and below it we see the actual phase of the spectrum with the cross and the phase of these harmon .
okai .
then what we do is we have to synthes these harmon , and thi is what we see on the right side with the light red and light cyan color .
so , the light red is the synthes harmon of the sound , of that particular frame .
of cours thi is a differ fft size , the shape of these lobe is differ becaus the window is differ .
it's a black window us the synthesi .
so , thi is the synthes spectrum and then we have to subtract thi spectrum from the origin spectrum .
strictli speak , we don't subtract it from the spectrum on the left .
we subtract thi from anoth gener spectrum that ha the same paramet .
so that we can subtract the two of the same size and of the same window size .
and then it we subtract thi synthes sinusoid , or the harmon , from the origin on , we get thi dark red and dark cyan color .
okai , and thi is the residu spectrum , in magnitud and phase represent .
and if we take the invers of that we see the residu signal in the time domain and that's what we see on the top right plot .
in with we see the origin flute sound , of cours with the right window and the right size that we have in the synthesi .
and we see the residu signal , thi dark blue on .
and again , thi is not just an error signal .
thi is a , in fact , thi is a relev compon , is a relev part of the sound that we want to recov .
so the whole system , if we put togeth all these analys in a frame by frame type of thing and put it togeth into a whole analysi synthesi system , we get thi block diagram in which we start from the signal , x of n , then we window it , we comput the fft , obtain the magnitud and phase spectrum , we detect the peak .
out of those peak we find the fundament frequenc .
and onc we have thi fundament frequenc , we can identifi the harmon of that sound and we can synthes those harmon with the blackman harri window .
okai ?
so , we have anoth spectrum , yh .
that can be subtract from the origin signal , but in order to do that we need to recomput anoth spectrum of the origin signal with a window and a size that is compar with the size that we us in the synthesi .
so , we will choos a window size that normal will be <num> sampl .
we'll us a blackman harri window , so that the shape of thi x of k that we now comput can be easili subtract from yh , so it is just a complex subtract and we get x capit x of r which is our residu spectrum .
okai , and thi residu spectrum can be ad to the harmon spectrum .
then we can comput the invers fft and then do the overlap iter over the whole sound .
we can see here an exampl of the analysi of a particular sound us the harmon plu residu model .
so here , we took the flute sound that we heard befor .
and so on top we see the spectrogram of thi flute sound and superpos we see the harmon that have been obtain .
so let's listen to thi harmon synthesi .
okai , and these harmon ar subtract from thi background spectrogram , and we obtain these lower plotd , which ar the spectrogram of the residu compon .
so let's just now listen to thi residu that ha been obtain .
okai , it's soft .
that is clearli veri relev .
it's basic the breath nois of the instrument , which is an import part of the characterist of thi sound .
but thi residu compon is a complet sound .
therefor is difficult to process .
we need to model it , we need to be abl to approxim it with a particular model approach .
and , and of cours , we need to model it with the stochast model .
so let's introduc the stochast approxim of thi residu compon , and let is present thi idea of the sinusoid plu stochast model .
so veri similar to what we saw befor .
so we have the signal to be the sum of sinusoid plu the stochast signal .
now thi is stochast signal , or stochast compon .
it's not just the subtract of the sinusoid minu the origin signal .
but is actual the result of a model approach .
so , below here we see the equat of the model of these stochast compon .
the stochast compon is a result of filter white nois with the impuls respons of the approxim of thi residu signal .
so we have the impuls respons of everi frame of thi residu signal and we obtain thi impuls respons that approxim the spectral shape of that .
so in fact , is much better to visual thi model in the frequenc domain .
so here , we see on the top the equat of the sum of the sinusoid , the sum of of the analysi window , plu the spectrum of the stochast compon .
and now the stochast compon is thi idea of a filter white nois , but in the frequenc of the main is the product of the approxim of the absolut valu of the residu signal multipli by e to the j and the phase of the random the white nois , i said the random number .
okai so , the magnitud spectrum is the approxim of the residu and the phase spectrum is the white nois basic , the phase spectrum of the white nois .
thi is the concept of the stochast approxim that we saw in the previou lectur .
okai , so with thi we can actual see how in a singl spectrum , we actual perform thi stochast approxim of the residu .
so we start from on the top , with magnitud the spectrum of a signal , the harmon .
and then below , the light red , is the synthes spectrum , the myh .
and then thi is subtract from the origin spectrum .
again it's a spectrum that will have to be recomput .
and then we obtain the , the next curv , which is the mxr , which is the residu spectrum , okai ?
and thi residu spectrum can be approxim with a smooth , a smooth curv , which is thi myst , which is thi sort of a line approxim of thi residu .
and thi is go to be our stochast model .
so we can put it togeth into an analysi synthesi system and it veri similar to what we saw befor .
so we start from the signal , we comput fft we find the peak , we find harmon .
we synthes them in the frequenc domain and we subtract them from anoth spectrum of the origin signal , we comput it to be abl to subtract it , and then what is new in thi model is the stochast approxim of the residu .
so we take thi residu spectrum .
we run it through the stochast approxim modul .
and then we can synthes .
and we can synthes the stochast compon by basic , the idea is filter white nois , but , in the implement is basic take the phase of random number , and appli the stochast approxim magnitud spectrum .
and thi result into a spectrum that then can be sum to the spectrum of the harmon , and perform exactli the same thing that we have done befor .
so , perform fft and the overlap add .
so let's now see an exampl of a complet analysi synthesi of a particular sound .
so we ar take thi saxophon sound .
let's listen to that .
okai , and then , below it we have the two represent that we have obtain .
the harmon , and the stochast compon .
the spectrogram of the stochast compon .
let's listen to the harmon .
now we mai not appreci what it's miss , but when we listen to the stochast approxim we have to make it a littl bit louder in order to actual listen what is go on .
well with these two compon we basic have analyz and model the origin signal .
and we can put them togeth and gener the synthes sound .
that captur most of what is perceptu relev in thi sound .
so for these topic that i discuss in thi lectur there's not that mani refer , in term of tutori or sort of more introductori materi .
but there is quit a bit of articl that have been propos differ strategi to analyz sinusoid , obtain residu , approxim the residu et cetera .
so in thi link that i put here , on thi the websit of the mtg , i have kept some articl .
well , quit a bit of articl that have been publish relat to these issu so feel free to go there and you can , you can sort of find those articl , and that's all basic in thi lectur .
we have cover the most advanc model that we'll be present in thi cours .
we basic combin all the previou model develop a varieti of analys and synthesi techniqu that can be appli to mani sound , and for mani applic .
in the next lectur we will focu on how these model can be us to transform sound .
so i think , we're go to start have fun and do some interest new sound .
so i hope to see you then .
bye bye .
hello .
welcom to the cours on audio signal process for music applic .
thi week , we introduc the concept of stochast signal , and a wai to model thi type of signal us spectral approxim .
so in thi demonstr class i want to actual us an implement of thi model on the sm tool packag .
and see how it work .
so let's open the interfac of the sm tool .
and let's first us the short time fourier transform to try to understand the sound .
so , let's open a sound , a good sound for stochast analysi is the ocean sound .
it's veri noisi so that would be quit good for thi type of approxim .
in term of paramet the default ar okai .
i mean window , window size <num> , hop size <num> .
well let's first listen to the sound .
and now let's comput the stft .
okai , so here we see the spectrum of thi ocean sound and clearli is the kind of thing we expect .
in the sens the magnitud spectrum is veri granular and there is veri littl kind of repeat structur .
the onli kind of a structur we can see is thi overal shape , we see basic the amplitud , the swirl of the wave , be shown here as thi increas of thi red area .
and also we see that the higher frequenc ar softer than the lower frequenc .
so there is much more emphasi on the low frequenc .
and in the phase spectrum basic see random number , there is noth particular here that we can see in term of a given structur .
and if we zoom into the phase spectrum , definit you'll corrobor thi idea that these ar basic random number .
if we do it on the magnet spectrogram mayb on of the area that ar more sort of stabl , and yeah it's also veri noisi .
of cours in here there is some more overal trend that we can see .
but now , let's see what we can do with the sinusoid model that we have been been talk about and us .
so , let's take the sine model , and let's get the ocean sound .
okai , and in here we definit will need a lot of sinusoid .
in term of the window size i don't think it matter too much but mayb let's take a smaller window , sai <num> , <num> .
here sinc the phase do not matter , we can realli just sai <num> and fft <num> .
there is not need for do anyth differ from that .
the hop size will be on fourth of that , so that would be fine .
magnitud threshold , minu <num> .
well , the durat of the sinusoid's here , clearli , we need to account for tini sinusoid that will come in and out .
and in term of the number of sinusoid , well , we need a lot .
so let's put <num> .
and thi track , i don't think thi matter much becaus thei're go to be come in and out all the time .
so let's see what happen .
okai , so that's quit a lot of sine wave and quit longer sound .
so that mai take a littl bit longer .
okai , so thi is what we get .
again mayb what we were expect , the sine wave , these ar the frequenc .
thei ar all over .
we just see that thei ar scatter all over again in a veri kind of granular random wai .
let's listen to the sound that is synthes from the sinusoid model .
it doesn't sound too good .
it ha thi kind of tonal qualiti and we hear like pitch that where not realli in the origin sound .
thi is why the sinusoid model mai not be that appropri for thi type of sound .
we can push it more and make it sound closer to the ocean sound but clearli it's not an appropri model approach for thi sound .
so now let's go to the stochast model .
and let's open the ocean sound .
okai , and in here there is not that mani paramet to choos .
on is the hop size and the fft size will basic be twice as that .
so , there is no need to control that .
and then there is an import paramet , which is thi smooth approxim factor , which is basic how much smooth we're go to perform .
for exampl , we can start by <num> , that mean that we're go to reduc the size of the fft by <num> .
so , we're go to have the result is <num> of the overal .
so that mean that we're go to have onli on everi ten bin , or frequenc sampl , in the frequenc domain .
and of cours the phase spectrum will be a random number .
so let's listen , well let's comput that .
okai , that's quit fast .
and here of cours what we're see .
and mayb we can compar it with the origin stft .
we have , magnitud spectrum , which is much coars .
so there is much fewer horizont , line , becaus we have the fft size wa wa down sampl becaus basic wa the smooth out , okai ?
and but let's listen to the output sound .
well it doe not sound like the origin .
let's listen again to the origin .
but it definit sound like some water .
so the qualiti is veri much the same .
it sound with a kind of high pass , that kind of thing .
so let's try to get a littl better .
let's , have a hop size smaller than than thi on , mayb <num> , becaus these time chang ar import .
and mayb let's not reduc , thi that much , like <num> , and let's see what happen .
okai , now we have more inform .
we have a finer grain , both in the horizont and vertic axi .
so let hear what is the result .
yeah thi sound a littl bit better and we can plai around with these paramet to get differ type of approxim .
now to finish thi let try how thi approxim work with a sound that is not realli complet stochast .
so for exampl , let's open the speech sound .
let's open thi speech male sound .
okai ?
and let's not do so much , mayb let's do <num> .
and let's do mayb <num> as approxim .
let's first listen to the sound .
do you hear me ?
thei don't lie at all .
okai , so now we're go to , attempt to approxim thi .
we're go to get rid of the phase spectrum .
we're go to make it like random number and we're go to smooth out the magnitud spectrogram , so let's see how it sound .
okai ?
so thi is the approxim .
so thi wa origin sound .
thi is the stochast approxim .
we see a veri coars type of approxim to the magnetitud spectrum .
and thi is the resynthes sound .
let's listen to that .
do you hear me ?
thei don't lie at all .
okai .
that's veri interest .
in factit sound like a whisper type of sound .
we have lost all the speech inform becaus a lot of thi speech inform is in the phase spectrum and we have basic got rid of that .
and sinc the magnitud spectrum is quit smooth , also we've got rid of quit a bit of the possibl pitch inform that wa present in the magnitud spectrum .
okai , so that's all , that's what i want to show .
so we have look at on on implement of thi stochast approxim that we have talk about .
within the sm tool we have thi code that approxim a sound us thi model .
and well we have us some sound from freesound .
so hopefulli that ha given you a flavor of what doe it mean to approxim a sound with thi stochast model approach .
and of cours we're go to be us that for the residu of some signal .
and so , in the next demonstr class we want to put it togeth with the other model that we have been talk about .
so we will see you next class .
bye bye .
hello .
welcom to the cours on audio signal process for music applic .
thi week we're talk about quit a few spectral model approach .
we ar combin the sinusoid and harmon analysi that we talk in the last few week with the idea of residu and stochast approxim of thi residu .
so in thi demonstr class i want to talk about on particular model , the harmon plu residu model .
so the idea of analyz the harmon of a sound , subtract them from the origin signal and obtain the residu .
which then can be combin of cours with the harmon that we have identifi .
so let's us the sm tool that we have been talk about and develop in the cours .
so let's start with the dft and let's start with a sound , with thi organ sound that we have in the sm tool directori .
let's listen to that and we'll listen with headphon so that we can listen more carefulli .
okai , thi is a quit veri stabl tone and it's a veri tradit , a standard sound of an organ .
so in order to analyz we want to be abl to distinguish the harmon of thi sound .
so , thi is a c3 , which is around <num> hertz .
so in order to find what is a good window size .
well let's us the blackman window , thi is a veri stabl note so we can take advantag of a longer window and realli try to isol the harmon as much as possibl .
so that's six bin for the blackman window and then samplig rate <num> , <num> .
and then we divid by the frequenc of thi note , <num> .
so that give me <num> sampl that make sens to analys .
okai , so let's put <num> to make it an odd window .
and okai .
let's us <num> fft size .
so with quit a bit of zero pad , that's good .
and so let's comput it .
okai .
so thi is the sampl that we ar analyz .
we ar analyz six period of the sound .
it clearli look veri sinusoid and from the magnitud spectrum we see that there's not that mani clear harmon .
even thought there is quit a bit of energi in the high frequenc rang .
but it doesn't have all these clear sinusoid .
so thi is an indic that it's a sound that ha quit a bit of kind of nois like or a kind of a stochast compon into that .
well the phase look as expect and of cours the reconstruct is quit good .
okai , so thi look like a decent approach .
of cours we could mayb , given that it is stabl , we could take a bigger window size , so let's try that .
let's try like twice as much .
let's try <num> , <num> sampl and then let's even do a bigger fft , let's us it <num> .
okai , so we're do quit a bit of <num> pad .
and well here the time wa in <num> second ; so which is good the , the delai sound is quit long .
so we're kind of in the middl .
so let's do that .
okai , thi look like twice as mani sampl , like we ar analys like <num> period .
and ye now we ar see a littl bit more thing in the spectrum , if we compar the previou on to the current on , we ar see the harmon mayb more defin , and we're see quit a bit of background thing , so mayb now we have seen a littl bit higher harmon than we were see befor .
becaus with the higher window , we kind of reduc thi background , becaus it's not a veri coher type of signal .
so , it emphas the coher part , the harmon , and reduc thi kind of stochast compon .
okai .
so thi seem to be a good choic .
so let's go to the stft and appli the same paramet .
so let's appli the blackman , but let's first open the sound , the organ sound .
let's us thi <num> sampl .
that we took .
okai .
and let's us the <num> fft size .
here , now we have to choos a hop size .
well , here i don't think it matter that much .
but let's just us mayb <num> , so on fourth to be abl to overlap the window blackman .
in fact it should be even more , but for effici purpos let's just leav it like that .
okai , let's comput thi .
these will take a littl bit longer becaus it's a longer sound and it is quit big .
okai , so thi is what we're get .
of cours , the resynthes , we do not need to listen to it becaus it's go to be quit ident .
and now well we see the horizont line , mayb let's zoom into the lower area .
okai and so that we can see a littl bit better the harmon .
the harmon look clearli veri well defin .
but there is quit a few thing in between .
okai , that seem to be a good choic .
now let's do the harmon analysi .
again , us the same paramet .
so it will go to the organ , let's see , the blackman , let's us the <num> , and let's us <num> as the fft site .
and now we have to choos a paramet to identifi the peak and the harmon .
the magnitud threshold , okai minu <num> , that look like a reason on .
the durat of the harmon here , sinc we're in a long stabl note , we can even afford to put longer type of track , these let's sai that thei have to last for <num> second , so it could be even more , the number of harmon , the truth is not that mani , becaus thei kind of disappear .
so i would sai that with <num> or <num> harmon should be plenti .
and we know the fundament frequenc , <num> , the rang ha to be for that .
so , <num> and <num> , <num> is within that .
so , mayb we can even make thi higher so that it make sure that it fit correctli .
okai , that sound good .
and thi is the error for the frequenc detect .
it should be a veri clear fundament .
there should not be a problem with that .
and thi deviat .
thi is how we will allow the harmon to deviat from perfect harmon .
so , let's leav it like thi and see what happen .
okai .
let's comput it .
again thi will take a littl bit longer .
ok , so we found quit a few harmon .
and , of cours in the attack and decai is veri unstabl so mayb we should have reject those .
but what is interest is that some harmon ar quit stabl , but some ar veri unstabl .
let's listen to the re synthes sound .
okai .
it sound good .
let's compar with the origin .
well if you pai attent , clearli the origin ha thi more air in the background that is not in the synthes , becaus it's mainli the harmon .
but the truth is that , also some of these higher harmon ar veri unstabl .
so , mai it's not right to consid them as harmon becaus thei ar basic mayb track some nois part .
so on wai to get rid of that is to reduc thi deviat and restrict it even more .
for exampl , let's put <num> . <num> .
and then let's see what happen .
okai .
now , it got rid of some of these partial .
but mayb an even better wai to do that is to make sure that thei ar long enough .
so , instead of have <num> , let's make sure that , okai , that the harmon should be at least <num> second to be consid .
okai .
now we got rid of quit a lot of thi higher , unstabl either harmon or compon .
let's listen to thi synthes sound .
yeah , that sound quit clean and definit , of cours , not as rich as the origin sound .
okai , now we can go with these same paramet to the harmon plu residu so to subtract these harmon from the origin signal .
so let's us the same sound .
let's us the , <num> window size , <num> .
thi threshold wa minu <num> .
the minimum durat of track .
i think we put . <num> , we put , i know , we put <num> second .
so okai , so <num> second , number of harmon , now definit we can put less , we can even put just <num> .
and here we have to make sure it wa within that , so let's sai <num> to <num> , so that is within that for sure , we'll find it , no problem .
and the error , i don't think thi matter to much , but here we put <num> , i think that's two zero , okai .
we'll leav it like that .
okai , let's now comput thi .
okai , thi is what we got , and let's see .
so here we see the harmon it found , the black line , and the background spectrogram is the residu .
and we can listen to the differ compon .
so we can listen , well , just the sinsusoid , the harmon .
we alreadi heard that .
let's listen to the residu .
yeah , that's a veri clear and nice sound .
that is what wa miss from thi harmon sound .
so clearli if we put these two sound togeth thei will sound like the origin .
compar with the origin .
yeah that's an ident , basic .
so thi wa a good sound to explor the potenti of the harmon plu residu .
of cours if we take time vari sound that mai be a littl bit more tricki and we will have to tune the paramet a littl bit more , but with that , i think you get an idea of what the harmon plu residu model and the tool within the sm tool that implement thi model , what it can do .
so i encourag you to plai around , of cours , choos other sound mayb more complex , sound that chang in time .
so we have talk about the harmon plu residu model , and thi is on instanc of the model that we ar talk about thi week .
on the next demonstr lectur .
i want to talk about the harmon plu a stochast model so that we can model the residu that we just heard as an stochast signal and see what it can do .
so , i will see you next lectur .
thank you .
welcom back to the cours on audio signal process from music applic .
in the previou demonstr class we talk about the harmon plu residu model .
we actual analyz the sound with the model , with the sm tool , and we were abl to identifi the harmon , subtract them from the origin sound and obtain a residu , which then we combin with the harmon to obtain the origin signal .
in thi demonstr class we want to go a littl bit beyond that by approxim the residu with the stochast model .
and in the case that the residu is close to an stochast signal , then thi will be a good represent , the harmon plu the stochast compon , to repres a sound .
so , let's start and let's open the , the gui of sm tool .
and we will start with the sound of the flute sound .
okai , so let's listen to thi flute sound .
okai , so it's a veri stabl note , quit clearli defin , in fact is an a4 and it clearli ha some breath qualiti that will be relev for thi idea of the stochast compon .
in order to decid what window size , well again let's us the blackman window , sinc it's stabl sound blackman will be a good choic for be abl to get low the side lobe and get a good kind of signal to nois ratio in term of the window .
so in order to comput what is the best window size , so we'll have to just do <num> , which is the number of bin of the blackman window , time the sampl rate , <num> , <num> , divid by the fundament frequenc of thi sound , and thi is a4 , so thi is <num> hertz .
okai ?
so <num> would be a good window to us .
even that we realli want to get a good resolut of the harmon and try to minim the rest of the compon , and it's quit stabl , we can afford to take a longer window , mayb , so let's take <num> sampl .
the fft size , again , let's , we can take a bigger fft , so that we get a smoother spectrum .
so , <num> , <num> .
okai and well let analyz just in the middl of the sound .
thi is quit a long sound , so let is do it like that .
so , thi is the sampl of the input signal .
in the spectrum we see quit well the low frequenc harmon .
and similar to the organ that we analyz befor , at the high frequenc area , there is quit a bit of kind of unstabl or kind of veri stochast type of compon that ar not so clearli defin as partial .
so thei mai be there might be some harmon or partial , but thei're kind of a mask , and ar difficult to identifi here .
anywai , so okai , so now let's just go directli to the harmon model .
and let's appli the same paramet .
for exampl <num> .
<num> , <num> .
now we have to choos the paramet for the peak detect and harmon detect .
i don't think we need to go veri much down in the spectrum for the harmon , becaus , as we saw , there ar not that mani .
in term of the durat of the harmon , i think it's good to make sure that thei're long , it is a stabl note , so you might want to put like . <num> in term of the minimum durat , in term of number of harmon , there ar clearli not that mani so , i'm sure with forti should be plenti .
and , we have to set the minimum and maximum fundament , so that <num> fit here , so i'm sure if we put <num> and <num> should be plenti .
and the error for the peak detect , well let's take the default <num> .
and the deviat , let's start with thi valu , see what happen .
oh , and of cours we need to get flute sound .
okai , now we can comput it .
okai , so clearli we got quit a few harmon , and some here that appear and disappear .
of cours , we have to realiz that here we're just plot the first <num> , <num> hertz .
if you want to see more and what's go on in the higher frequenc we should displai it a littl bit differ .
okai so let's just listen to the result .
okai .
that's pretti good .
that's a quit accur rendit of that .
of cours it's differ from the origin sound .
in fact , if we hear back the origin , the origin ha more brighter type of of qualiti and thi is becaus it ha all these other compon .
of cours , we can plai around with these paramet , for exampl , to allow for more harmon to appear .
so , for exampl , if we allow let's sai , put . <num> here and we comput it again .
yeah , now , we ar allow these high harmon which ar veri unstabl to appear sort of more , but of cours all these jump ar not realli that good so that mean that these harmon ar not realli stabl so thei ar realli buri into the , kind of that nois or the the breath that we also hear .
okai .
now we can go ahead and us the harmon plu residu model , so that we can listen to the residu .
and let's again us the same paramet , the flute sound , let's put <num> .
let's put <num> , and so the threshold minu <num> .
the minimum durat , let's just put <num> .
number of harmon , yeah , we don't need that mani and well these will be okai at <num> and <num> , and thi i think <num> wa all right and yeah , let's make it not as open in term of the deviat as befor , let's just put mayb <num> . <num> , see what happen .
okai , so here we see the origin and the harmon and mayb we see a few more than befor .
and synthes .
so let's listen to the residu .
okai , that's a pretti nice residu , veri we hear the attack , and the attack , in fact , there is thi red in here , dure the attack iss clear louder thi breath and then it's just sort of get attenu and we hear a veri clear breath nois throughout .
okai .
so now so thi is veri much an stochast signal .
it's , it's veri noisi so that mean that we can appli the stochast analysi to that .
so , now let's us the harmon plu the stochast model and let's get the same type of paramet .
of cours , we can plai around these paramet to get better valu .
but the on we chose thei look okai so let's , then let's put <num> here , let's get the number of harmon .
yeah , i think <num> harmon and these wa all right , thi wa <num> and thi wa <num> . <num> .
okai , now we , the paramet that is specif of stochast analysi is the stochast approxim factor .
and here , by default is . <num> .
so it mean that it reduc the whole spectrum by <num> so it onli , it will quantit kind of the resolut .
to on tenth of what it origin wa .
so , let's just try thi .
okai .
so , clearli , now , we see , well , we see differ .
becaus , in thi on we ar show the rang from zero to <num> , <num> hertz .
so , in fact , we're see quit a bit more .
so we see more of the stochast compon .
but , as we see , the harmon ar veri much on the lower side .
abov <num> , <num> hertz there isn't that much .
there is some of thi .
but mayb .
these , even these line should not be consid harmon and mayb thei should be discard .
but let's listen to the , the stochast compon .
okai .
of cours we have lost like a littl bit of the detail that the residu had .
but it definit keep these breathi nois .
of cours , it's not that loud .
so when we put it togeth with the origin signal , with the harmon , okai , so it sound good .
but clearli the harmon ar take over and thei ar kind of mask quit a bit thi stochast point .
we have to listen to it quit carefulli if we want to be abl to distinguish the stochast compon of thi type of sound .
and that's basic all i want to sai .
let's , go back .
so we have talk about harmon plu stochast model .
and and we have us the sm tool , the interfac , that ha allow us to plai around with thi model .
and of cours , the sound , thi flute sound , is in freesound .
so hopefulli that ha given you a view of the potenti of the harmon plu stochast model .
it's a littl bit differ from the harmon plu residu , but the main differ is that now with the stochast , represent of the residu we will be abl to do quit a bit of thing .
next week in fact we're go to be do transform to these sound .
and , the stochast represent will allow us to do that , weather in the residu would not be abl to give us that flexibl .
so anywai , so that's all for thi demonstr class and i hope to see you next lectur .
thank you veri much .
hello , welcom to the cours on audio signal process from commun .
thi week , we ar present divers spectrum model strategi to model sound .
and on of the underli concept that we ar introduc is a idea that there ar mani sound that ar not quit well model with sinusoid or with a harmon analysi approach .
that , there ar signal that ar veri noisi .
that ar what we call stochast , that requir a differ , model approach .
thi thi model approach is base more on statist signal process on describ the sound from a probabilist point of view .
so , in thi program class , i want to go over that from a program perspect .
so , i present uh , the model that we have been implement in the sm tool and that implement thi idea of stochast model .
so , we'll basic , we talk about thi block diagram .
in which we start from a signal and then after window it and comput the fft , we just keep the magnitud spectrum stochast signal .
the phase spectrum is not relev and so the approxim is base on the magnitud spectrum that then is approxim with a smooth curv .
and thi smooth curv is what we call the stochast model .
and from that , we can reconstruct or we can regener a signal by sort of reconstruct the , a magnitud spectrum and then gener phase randomli .
so that , we can creat anoth complex spectrum that captur some of the essenc of the origin sound and then by over lap ad .
we can gener a signal that hopefulli , if the origin signal had these stochast properti will be quit similar to the origin sampl .
so let's go to text editor and here i wrote a veri short script that implement thi idea of , approxim a fragment of so , of a sound with thi stochast model .
okai , so we start by import few packag that we need and then the core of the code is basic read sound file .
thi is the ocean sound file that we alreadi have been us .
so , it's clearli an stochast type of signal .
and then , in order to analyz , the spectrum of it we have to defin the fft size and the window size in thi type of , sound .
and thi type of situat , there is no need to zero pad , there is no need to , have , a odd size window .
so we have m the window size and fft size , on the same size which is <num> .
then the kei paramet is thi what we call stochast factor ; which is basic the smooth factor of the down sampl factor .
so . <num> in thi case that we defin .
it mean , that we're basic reduc the inform by a factor . <num> .
and get onli kind of the surfac inform .
then we get the window , in case we get a hame window .
but it can be ani , ani type of window .
it doesn't have to be veri complex .
in fact , i would sai that mayb it's easier to just us the han becaus it's even simpler and it , it work .
okai ?
then we need to select the portion of the sound we're go to analyz .
and in thi case , well , we chose a section in , in the sampl of <num> , <num> and then plu the window size and we multipli by the window .
then , we comput the spectrum and then we convert it to dv .
and we do the approxim , the stochast approxim on the dv spectrum .
and we do it by us these pattern function call re sampl .
re sampl is a function that basic us a fft approach .
it us a spectral analysi approach to down sampl a signal or to re sampl a signal .
both with a down sampl or up sampl or signal .
so we give a function in thi case is nx .
and we just make sure there is noth below minu <num> decibel's .
it wouldn't make ani sens .
and we specifi the length the new length that we want to creat .
so the origin length wa of size n over two becaus we ar onli us half of the spectrum .
okai , so from n over two sampl , we ar go to gener n over two multipli by thi , stochast factor approxim .
so , basic if thi is <num> , we ar go to have on fifth of the sampl that we start with .
okai , let's run thi littl script so we will run the and we can plot the signal that we start with .
the window fragment that we start with .
so thi is the , the fragment of the ocean sound alreadi window by a han window .
'kai ?
and then we ar comput the spectrum of that .
so the spectrum is thi mxarrai .
okai ?
so , thi is the magnitud spectrum of that and now we can plot of that , the the smooth approxim or the , the down sampl approxim of that .
so which is mxm but in order to make sure that it , it's shown on top of thi arrai which is a , a longer size .
we have to , parti differ rule and we have to sai np rang of , nxn , well the size of that .
and then , if we divid by , stock factor .
thi should stretch the , these point to the size that we had of the mx .
okai , so ye .
so here we show in in green the approxim , thi approxim .
of cours , it ha less sampl , so mxm ha the size of it is <num> sampl .
so from the , the <num> sampl that thi the posit side of thi spectrum ha .
we have reduc it to <num> .
okai , of cours it would chang to stochast factor .
we will do we will have more or less sampl to be approxim but clearli thi , thi green line is an approxim to the blue line .
okai .
so , thi is what the , kind of a stochast approxim that we ar go to be us thu and now let's go to thi other script and what we will be do is to actual synthes a sound from thi .
so we have the , the same first part up until here .
okai .
so we gener the envelop and now what we're go to do is to re sampl again the , the approxim spectrum but .
to the size of n over <num> so that we get all the sampl of the complet fft .
then we will gener random number for the face .
and then to creat the whole complex spectrum , we will have to .
deal with the symmetri so that we will recreat the magnitud and face for the neg frequenc and of cours convert it to complex number .
so , the posit spectrum , the posit complex spectrum would be <num> to the power of the magnitud multipli by the exponenti of the face .
okai , well thi is of cours the convers from dv to linear scale and then for the neg part we do the same thing , but we revers the order and the face is at neg at that .
and then which is that , that invers fft of the complex spectrum .
so , let's run these .
thi is test1 .
okai .
and in here , we have the magnitud spectrum that we start .
the mx .
okai , so thi is the origin spectrum and now we can plot on top of that the approxim and the up sampl to have the same size .
in fact , ny ha the same size than thi , so now thi green line .
start from the sampl that we show befor .
so , it wa a more a jag line and had fewer point and now it ha convert into a small version that ha the same size than the region spectrum and of cours the , the face spectrum we would plot the py .
thi is the phase spectrum that we gener , which is just random number from <num> to pass , to , to pi  .
and by take the english at <num> , we can just obtain the output signal .
so thi is the synthes signal from that approxim approxim spectrum .
of cours thi is .
differ from the x w , the , we have start from .
so the now , the green is the origin signal we start from .
clearli veri differ , but that's not the point here .
becaus be the stochast signal .
the shape in the time domain is not that relev , what is import is thi gener distribut in the magnitud spectrum .
okai , so now let's look at how the actual analysi and synthesi work for longer sound .
so in here , we have the .
stochast model .
py , file in which we have differ function that implement the analysi .
of of complet stochast signal and the synthesi from the , analyz .
stochast represent and basic doe thei do what i have done for a singl frame .
in which stochast model and now , it start from the signal , the hop size , the size and thi stochast factor .
and it iter over the whole sound .
and it doe what is on the , it find the , the spectrum .
then it reduc the re sampl function to done , down sampl it to fewer sampl depend on stochast factor .
and it keep append these to a sequenc of envelop and becaus we're , go to have a time vari .
envelop for the stochast represent , and of cours the synthesi doe again what i , i show befor .
it ha to the manuspectrum to the complet size .
it ha to gener the random face and then it ha to convert to the complex spectrum and do the overlap add .
to recov the whole signal .
so , let's call thi for a particular sound so in here i wrote a littl script that take that ocean sound and it call the stochast model anal .
so it analyz the whole sound .
okai , and it is a up size of <num> .
the , the , the fft size it us to be twice as that .
so , instead of specifi an f50 size the default is normal to just take twice the hub size , and then there is the stochast factor which is point two .
so now if we run .
thi , test two , 'kai now we have creat stock , and that if we look at the shape of that , that's a matrix that ha <num> frame .
and each frame ha <num> point which ar the point of the approxim , and these we can we can look up individu frame , but basic what we normal do is we plot it with p color mesh .
okai .
the pcolormesh and we specifi a stocm will displai thi arrai like a , in a color , like a 3d type of plot .
of cours , thi is shown in the , the , kind of the wrong direct .
we ar accustom to see time in the horizont axi .
so , what we normal do is show it with np and transpos .
okai .
so , thi will revers the plot and it will show the x axi in the as , as time .
and vertic axi as frequenc .
okai , so thi is the , the , the plot of the , the spectral represent of these of these coeffici of the stochast represent .
okai , and let's now go to thi thi function that basic doe thi stochast analysi and synthesi for a complet sound and at the same time it plot it nice .
thi is the code that is us from the interfac and it plot a nice spectrogram of the , of the stochast represent .
so , in here we have thi main function .
that ha some paramet like default and it need a sound .
it perform the analysi that we just , did .
and then it doe the synthesi from the whole , analysi .
and then it output a sound file and then it plot the , the .
the differ compon the input sound , the stochast percentag , a , and the output sound .
so , let's run these run the stochast model function of py .
okai , and these plot input sound .
that stochast approxim and , the output sound and of cours , we plan now it ha save a file ; call ocean stochast model wav .
and i can just plai by type plai ocean , okai .
okai .
so , thi ha plai the , the complet sound and as we show befor , well , it's quit similar even though it's not .
ident .
it definit sound like an ocean sound .
and , even though , it's it doesn't , it ha lost some of the low frequenc , so we might have to chang a littl bit the stochast approxim in order to recov the complet sound a littl bit better .
but anywai , okai , so that's what's .
i want to present , so we talk about thi stochast model implement that we have in the sm tool packag .
and of cours we us quit a bit of the python ?
function , and also the plot of so we have seen how to implement .
the stochast model that we talk about in class , in the theori class , and thi will be on import compon to then now in the next class to incorpor it into the harmon or sinusoid plu a stochast represent , so therefor we will be us thi model .
to analyz the , the residu that we obtain by subtract the sinusoid , the harmon .
so i hope to see you next lectur .
bye bye .
welcom to the cours on audio signal process for music applic .
thi week , we're talk about how to model sound by combin the sinusoid or harmon approach , that we talk in the previou week .
with the idea of a residu or a stochast compon , and the core aspect of that is how to subtract .
the sinusoid of a sound from the actual sound .
and thi is what we're go to , we're go to be talk about in thi , program lectur from a program perspect .
so , we're go to be implement the subtract of sinusoid from a signal .
and we're go to do it through the hprmodel , implement of the model that we have within the sm tool packag .
basic , we're go to be talk about thi block , diagram .
in which , from the input sound , and all the , the analys that we have alreadi been talk about .
the comput of the spectrum detect of the peak in the case of harmon model , detect of , the fundament frequenc and identif of harmon .
then , we ar synthes these harmon in the spectral domain , so we're synthes the , the lobe of of the harmon .
and now , in thi , in thi , week .
what we ar focus on is on thi subtract .
so we ar focus on how these , sinusoid can be subtract from the origin signal .
and , what , what we do is we comput , again , the spectrum of the input signal with the same paramet .
so therefor , with the same window that is implicit or in fact it's quit explicit in the spectral domain of these sinusoid so that then we can subtract them .
and then thi residu spectrum can be some to the harmon spectrum and obtain the time domain synthes signal by combin the two .
so let's look at some code that thei wrote to show these in a concis wai .
so , i i wrote some code just .
and doe it for on signal frame .
so first , we pour all the packag that we need for thi analysi .
okai , we alreadi have seen all of these packag .
and then we read sound file .
we're go to start from the oval sound <num> .
and , we need to specifi some paramet .
in particular , we're go to be analyz onli on frame , so we choos , we choos the locat , the pointer where we're go to be read , the , the sound from .
so , the place for the thousand , a sampl .
okai .
and then well we need to window size m we take <num> sampl .
we need a f50 size bigger than that let's so we take <num> , <num> .
then , we need a threshold for identifi the peak .
sinc we go to be do a harmon analysi , we need a minimum and maximum frequenc to look for the , the fundament frequenc .
then , we need an error threshold to to have the lower bound for the algorithm that we ar us for f0 detect that mismatch error function .
then we will decid how mani harmon , the maximum number and , of harmon that we ar go to be identifi .
and thi is the , the deviat slope that we choos so that the higher harmon have a higher degre of deviat than the lower on .
okai , so these ar the paramet , and now we start by comput thing .
so first , we comput the analysi window and we take the window .
then sinc we're go to be do the subtract , the phase inform is fundament , we need to do zero phase window .
thi is where , it's fundament .
the idea of , center everyth around zero .
so that the , the time domain , basic wave form .
thei align perfectli .
so that , the face match .
and therefor , the subtract is possibl .
and here , the outsid window is again fundament .
so , that's why you need to comput the center of the window in thi wai .
okai , then we choos the fragment of the sound .
and here with the pointer .
so we , we choos the center of the window .
the pointer is the center of the window .
and we take half of the sampl from the left of thi pointer and half of the sampl on the right of thi pointer .
okai , so thi is go to be our sound that we analyz .
and then , we have seen all these befor .
we comput the dft of thi fragment of the sound .
we find the peak .
we interpol the peak with parabol interpol , here we convert the locat to hertz .
and now , we detect the fundament frequenc , okai ?
so we call the <num> wave mismatch algorithm and it return the best candid for fundament frequenc .
and we identifi all the harmon , by call the harmon .
detect function that look for the peak that ar closest to the multipl of differ amount of frequenc .
ok .
and now , we can synthes these harmon that we have identifi , and we synthes it with anoth <num> and window that we did the origin analysi .
so now , we take an f50 of <num> .
and , half of that is <num> .
and we're go to be synthes the spectral sine .
so , the main lobe of the blackman window .
okai .
and thi is the , yh is the complet spectrum of the , thi harmon compon .
and now the , thi is what we ar basic focus on thi week .
we have to subtract thi harmon from the origin signal .
but to do that , we need to recomput the spectrum on the origin signal .
so that we us the black man harri window that is in thi spectrum .
okai ?
so , we have to comput a window , a black window of the size of the same size that we now us for thi synthesi <num> .
and then , we go into choos again from the origin signal .
of the fragment of the sound but onli the 500th and , and two of sampl around the pointer .
so here , we we choos anoth origin signal with these these <num> sampl .
and multipli it by the blackmanharri window normal , so that then it becom easier to comput the , to do the subtract .
okai , and , so thi is our new input signal and then we have to zero zero phase window it .
so , we have to put it around zero and we'll do that .
by defin the fft offer we're go to us and center everyth around zero and then we can comput the spectrum of that .
and the , the subtract of the sinusoid them becom easi .
it's just a complex subtract .
we subtract the harmon .
harmon spectrum from thi new spectrum that we just comput .
so okai , so let run thi and let's step through the differ variabl that we have been gener .
so , thi is the file call test three .
okai .
so , thi ha comput it .
and now , let's keep look at the differ variabl .
so , for exampl , let's plot the x1 sound .
okai , thi is the fragment of the sound we ar analyz .
okai .
then , we can plot the result ex , spectrum that we comput from that .
so , we can plot mx .
okai .
so , thi is in db the magnitud spectrum of that .
then , it ha comput out of that a peak so we can even just print the , the , the locat of the peak .
so , tploc is the peak ar the peak that it ha found within the arrai of of the fft .
it's better the show it in hertz so we , we print ip frequenc .
is frequenc of the peak it ha found .
right ?
then thi ha gone to the the , at zero detect .
so , it ha identifi from the mendel frequenc .
and from the mendel frequenc , ha been chosen to be <num> hz which make sens here , we're analyz an obo sound .
a <num> and then out of these fundament frequenc , it ha chosen the , the peak that ar harmon of these .
so each frequenc is the set of harmon that it ha identifi , in thi particular locat .
so it ha identifi all these harmon , the other peak have not been consid harmon .
of cours , we have chosen a , a and a even set of paramet that ha limit the number of harmon to these <num> , <num> .
so it becom easier , so we just have to analyz up , into thi thi harmon .
okai .
then , we gener these harmon as a spectrum .
and , so it ha gener yh .
so if we plot , the absolut valu of yh , we're go to see the .
the , the magnitud of the complet spectrum , but let's plot it , just the , in the , in db .
so , we will just plot in <num> time log <num> of the absolut valu of yh , and let's just take onli , let's sai the first <num> sampl , so from the begin to the sampl <num> .
so , we focu on the first harmon which ar the on that basic we have gener .
okai .
so these ar the harmon that we basic , we have synthes thi , the synthes thi spectrum .
on top of that we can plug the , the signal that from the origin sound , that we have recomput .
so x <num> , the x <num> spectrum , .
and so you plot on top of that .
the absolut valu of x2 .
in here , we now see the green line .
which is basic the origin spectrum .
and as you can see , it's veri much similar .
which mean that we veri much have synthes the , the origin spectrum .
and then , we can plot the subtract spectrum .
so , the subtract is the xr spectrum and thi is thi red line .
okai ?
so , the red line is the subtract of the two .
and it it clearli show the residu that it ha .
ok , so , and thi work and basic we do that at everi frame .
and then , of cours we can do the invers to gener all these signal back .
now , let me show you the actual code that is in the sn tool packag that perform thi harmon plu residu model .
so , there is file call hprmodel . py within the model directli and in it there is the analysi and synthesi of hpr model .
there is on function that doe the analysi .
anoth on that perform the synthesi .
and then , there's anoth on , that doe both the analysi and synthesi at <num> frame at a time .
in fact we recommend veri much to do the analysi and synthesi separ .
so that we can take advantag of clean trajectori and have some memori in the track .
so that the the , the harmon ar , ar better and in the analysi part of the function , it basic call two function .
on , that we alreadi have seen , it doe the harmon analysi in the same wai that we saw it when we talk about the harmon model .
and then , the new thing that it doe is the subtract .
so there is thi function , sine subtract , that ha us input the harmon identifi by the harmon model , ha us input also the input sound again , and it subtract the harmon from thi input sound .
so thi function is in the util function directori .
in the file and in here , you will find the sign subtract function and it basic doe what i have explain just a while ago .
it goe through the sound and then at everi frame , it doe the subtract of the sinusoid .
so the sinusoid have alreadi been identifi so here it iter our all the analyz frame and then it read again fragment of the input sound which recomput the input sound with thi window , with the black window .
and then , it synthes the harmon with thi blackman main and then , it's abl to subtract the , the harmon from the input sound .
and that's all .
and then it synthes the , the residu signal and back .
and , and there's the window effect , so we can do the overlap at , correctli .
and that's , that's all .
that's , what , the sinusoid subtract doe and it return , of cours , the residu signal .
and the output of the analysi is the , the harmon frequenc , magnitud and phase and thi residu signal .
and then synthesi , it basic receiv back the harmon magnitud and phase that we analyz and the residu signal and simpli .
put it togeth , so it call the sinusoid model synthesi we alreadi have seen .
and it simpli add the , these sinusoid we've the residu .
and that's all .
then we have these other function , hpr model function .
py ; which is the , the file that put it all togeth and it's the in fact , the file that is call from the interfac there we have been us .
and it's simpli there is on function main and it doe the analysi and synthesi of a sound and it plot the intermedi valu .
so , it call the hpr model ok .
and then , while it comput the spectogram of the residu so that we can show it as a spectogram .
and then , it perform the synthesi and gener the overal output sound , the sound of the residu plu the harmon and just the harmon .
and it write the file into the same directori .
okai , so now we can execut thi file and run thi hpr model function file .
and , it will analyz a fragment of a saxophon sound , which is the default sound with the apr model .
so we will get , here we see the harmon of the sound and the background is the spectrum of the residu , so we have comput the spectrum of the residu .
and here ar the two togeth .
and , of cours , we can listen to them .
we can just in thi directori .
it ha save the residu sign and the sum of the two .
so , we can just plai the , the , for exampl .
first , the residu .
okai , and then we can plai for exampl , the sign , and we can plai the sum of the two okai , and that's , that's all basic we have gone through .
the , the harmon plu residu model and we have us quit a bit of code from the sm tool and from python to be abl to subtract the harmon from the residu and hopefulli that ha given you program prospect to thi idea of harmon .
plu versu well , subtract .
and it's not a veri sophist thing from a signal process point of view .
but from a program point of view is quit delic .
we have to be veri care in how to put the signal , and how to analyz them , in order that oh , thei align perfectli .
and in order that the complex subtract in the spectral domain .
is is done correctli and we obtain a real residu .
and that's all so , in next class we're go to take the next step ; which will be to from a program perspect look at the stochast compon .
so how we can then convert thi signal that we just comput into a compon then have the harmon plu the stochast model .
so see you next lectur .
bye bye .
hello , welcom back to the cours on process for music applic .
in the previou program lectur , we talk about the , the hpr model , the harmon plu residu model .
that wa the idea of model a sound with a harmon and a residu compon .
and we talk about the implement .
in the sm tool packag .
now we want to go a step further and talk about the hpsmodel , the harmon , plu stochast model .
so now we ar model the residu that we obtain with the stochast model approach .
so we obtain a harmon and an stochast represent .
of a particular sound .
so the diagram , the block diagram is veri similar .
the , the whole thing for the analysi is the same until , we obtain the residu spectrum of x .
no ?
x x r of k , and then instead of just go and sum it with the harmon compon .
what we're do is , .
approxim it with a stochast approxim .
so by smooth the magnitud spectrum and then the synthesi is done by gener random number for the phase and combin it with a sort of an interpol version of these approxim so that we gener a complet spectrum .
and thi stochast spectrum can then be ad back to the harmon compon .
the , the great advantag of thi stochast approxim is that now we ar more flexibl .
we can do mani more thing on thi represent , apart from be much more compact .
thi stochast approxim reduc the amount of inform that is requir to reconstruct the signal .
so , apart from be a compact or present is , more flexibl and we'll be abl to do quit a few thing with that .
so , let's start from the same code that we look at last in the last lectur .
which wa thi code in which well now i chang the , the sound now i us a fruit sound , but basic it perform .
the harmon analysi by take fft and the , the , the detect the f and0 , so it perform the harmon analysi step and then it synthes those harmon and it subtract them from the origin signal .
it recomput the , a spectrum of the origin signal with the same window size and the type than the on there is in the , in the , in thi gener spectrum .
so , we need to multipli it by a window .
and we need to choos the , the window size that wa the same , then wa us for the sinusoid synthesi .
and we can then subtract the harmon from the origin signal and obtain the residu signal .
and now in thi lectur , basic we focu on .
the stochast approxim of thi residu .
and these ar , these three line ar do that .
so the first is , we ar convert it to a db scale .
so we ar convert half of the magnitud spectrum to db scale and we obtain a new magnitud spectrum .
and then we call thi function call re sampl ; with thi magnitud spectrum and of cours with valu that abov a certain threshold .
and we're convert it to a shorter arrai , and the , the size of these new arrai is the s , the size that we start from , multipli by a stock f .
and stock f is our stochast factor approxim , basic , is our smooth approxim or , or down sampl factor .
so basic , it mean that the output arrai will be <num> of the origin spectrum .
and then , we ar up sampl again , to the size that we start with in order that then we can do the re synthesi .
so in fact re sampl can be us both for down sampl , and for up sampl .
and it us the dft approach .
so let's , let's talk a littl bit about that .
so , we can go to the document on the re sampl function within scipi .
okai ?
so thi is the , the document .
so , it take an arrai .
it take the size of the output arrai .
so either .
less or more .
so you can down sampl or up sampl .
and , well there is some option argument also that allow us to give a particular window or to give a more multidimension arrai , and , and , process onli part of that .
and sinc of cours is all open sourc we can also see the sourc code of these thi function , and as i said well an exampl is a us an free base approach to do down sampl and up sampl .
and what he doe it , it perform first the , the fft of the input signal .
then it will basic cut the spectrum or append sampl depend if it's up sampl or , or down sampl or up sampl .
and then onc we have recomput a , a , a longer or a shorter spectrum , by cut or append zero , we perform the invers at <num> .
that's a quit , straightforward , simpl wai of perform interpol or .
down sampl or up sampl .
'kai , so we go back here .
so , thi ri , return the , for the first re sampl we will return less sampl .
and then , afterward , we will convert it to thi up sampl version that will be a smooth version of .
the spectrum we start with .
let's , let's run thi , so we can see how that work .
so let's run test <num> .
okai ?
and now we can plot the origin spectrum .
so , mxr is alreadi the db , version of the spectrum and half of it .
okai , so thi is our residu spectrum .
and then if we plot on top of that the , the stock m .
that's of the same size , but , a smooth version becaus it's the result of have first down sampl and then .
up sampl with interpol .
okai so , as you see , it , we ar veri much in fact , if we zoom into ani of these region , we see that the , green line is the , the smooth version but is .
it of cours is , is , is smoother than the origin on , but it follow quit quit well the origin signal .
so let's chang the stochast factor of . <num> and let's put mayb .
point <num> .
okai , so then that will be a stronger , smooth factor .
and , we sai these and then we comput it .
okai , now we plot , again , the , the origin residu spectrum , and now let's plot the smooth envelop .
okai .
and thi clearli show , the smooth envelop on top of that and it's much smoother than , befor .
okai , so that's basic what the stochast approxim doe .
and if we now go into the hp model code .
of the , of the sm tool , but we'll see the analysi function , the synthesi function , and also on function that doe analysi and synthesi at the frame level .
and , the analysi , for exampl , is basic the same , then for the hprmodel .
we onli add on input paramet which is thi stock f , the factor , thi smooth factor .
and then in the analysi , we first perform the harmon analysi , then we subtract the from uh , the origin signal to obtain the residu , and then we run the stochast model anal ? , the on that we alreadi .
discuss when we talk about the stochast model .
so we just , the stochast model receiv the , signal , the residu signal .
and , it ha the hop size .
the same hop size that we ar us .
and now , the , the window size that we us for the stochast approxim .
is just twice the hop size , so in fact the , the stochast approxim doe not requir big window .
in fact it , it's all the other , the , the win , the other wai around .
the smaller the better , so we can captur time inform , the , the stochast compon , the residu compon .
the time inform .
the attack of the node , et cetera , ar , most critic .
so the smaller the window , the better .
so , in fact , if h , mani time is by default , like <num> sampl .
here , we ar us window of <num> sampl .
so , we'll be comput an fft of <num> <num> sampl and approxim that .
okai ?
and of cours , then we return the harmon , and instead of return the residu , we return these envelop , these sequenc of envelop that we ar comput .
and in the synthesi part , well , it's a in a , it's a similar situat ; we synthes the and then synthes the stochast compon .
us the stochast model synth that also we talk about .
so from these envelop .
we can synthes the stochast compon and the function that put it all togeth , there is thi hpf model function that includ analysi and synthesi us the harmon plu and stochast model , so .
it ha some paramet , default paramet .
and then it perform analysi and it perform a synthesi .
and in the , in the , in the process it plot certain intermedi valu .
okai so let's go to the termin and now instead of .
run the , the code .
or run the , the , the code by call the , the file .
we can also run the function directori .
and that allow us to be abl to chang the paramet .
so if we import thi function .
the hp , model .
function .
'kai , now we have import , we haven't execut it .
now , oh , well , we , better to just import it with a given name , for exampl , hp .
okai , and now , we can call hp and the function within hp .
so within thi file , there is thi function main .
so , we can just call main and here now we will be abl to chang the valu of thi paramet .
so , let's just get the valu by by default .
okai .
so , thi comput .
thi analysi and synthes of these sound of these sax phrase , with default paramet .
and now , if we can , we can plai around , of cours we could us the , the interfac that we have been show in the demo class , but here mayb sort of more more intuit in term of understand what is go on and be abl to go deep into the code to just replac paramet here .
so for exampl , now if i want to chang the threshold and make it a smaller a threshold .
instead of minu <num> let's put minu <num> .
then , we will , run the same code but , chang the threshold .
and of cours , chang the threshold ha meant that it found onli , few harmon .
in fact , it contribut everyth as stochast and in here , the , the stochast represent .
is the on that is more promin , okai ?
and you can chang ani paramet .
you can chang the , the sound , for exampl .
okai , let's we can , we can chang the , the sound file , or we can chang the , the minimum durat of the , of the harmon , etc . , etc .
so no need to to explain that ani more or basic we can just execut it in anywai we want .
okai , and that's all i want to sai .
so , thi is basic an extens of the harmon plu model .
and we have seen how it work .
so basic thi is the , the most complex model .
that we're go to see in thi cours .
and all the other can be understood as relat with with thi on .
so if you understand thi model .
i think it's a , it's a good wai to understand a lot of the thing we , we have been talk about .
so that's all for for todai .
so i hope to see you next lectur .
thank you .
welcom back to the cours on audio signal process for music applic .
until now we have been present differ techniqu for analyz and synthes sound .
it's time to put that in practic and to make us of it in actual music applic .
so thi week we'll be talk about sound transform , about how to transform the represent we have been talk about and then re synthes a sound that is a modifi version of the input sound .
we'll be talk in thi first theori lectur about the short time fourier transform and about two type of manipul , or transform , filter and morph , and also we'll be talk about the sinusoid model and how we can us it for frequenc scale and time scale a particular sound .
let's start with the short time fourier transform .
thi is the block diagram that we saw , in which the frame by frame we ar select a fragment of a sound window it , comput the spectrum , obtain a magnitud and phase .
and now what we ar introduc is a transform block after thi spectral analysi .
from thi transform we obtain a new magnitud and phase spectrum that can be invert and we can obtain a new sound that is a modifi version of the input sound .
let's first talk about filter .
we talk about filter in thi cours befor .
and the idea is that filter can be implement in the time domain us convolut or in the frequenc domain us multipl .
so thi is what we ar us here , the short time fourier transform for appli the filter in the spectrum , by multipli the magnitud and phase spectrum of the input sound with the magnitud and phase spectrum of the filter .
strictli speak what we're do is , if we have the magnitud and phase separ , we're go to be sum the phase spectrum and multipli the magnitud spectrum , okai ?
so , the filter is express by it frequenc respons that ha a magnitud and a phase , and the phase ar ad and the magnitud ar multipli , okai ?
and the equat below , show these idea .
so the complex spectrum of the output is equal to the product of the two magnitud spectrum , of the magnitud spectrum of the filter with on frame of the magnitud spectrum of the input sound .
and the phase ar sum , but again is the whole phase spectrum of the filter with on frame of the input sound and then we can perform the invers fft and obtain an output sound .
so , let's see that in practic .
so here we have on top left a fragment of an orchestr sound , a veri short fragment , of which we comput the magnitud and phase spectrum .
so below that we have the red line is the magnitud spectrum and below is the phase spectrum .
and then we have the magnitud spectrum of a filter , okai .
a filter can be zero phase , so it's normal the import aspect of the filter is the magnitud of it .
and in mani situat we basic can discard a phase becaus it ha no effect .
so in here what we're go to do is multipli the magnitud spectrum of the filter with the magnitud spectrum of the input sound .
howev , sinc we ar in a log scale in db we add the two togeth , so we'll be ad these two shape that we see here .
and the shape on the right is the ad result of these <num> shape .
so , it's a modifi version of the input spectrum , okai , and the phase basic ar untouch , and then we obtain the output sound y , by perform the invers fft of that .
let's actual see these for a complet sound , so on top we see the spectrogram of the complet orchestr sound we have heard befor , but let's listen to it again , , okai .
and now , in the middl , we have the shape of the filter that we ar appli , the magnitud of it , okai ?
and then what we ar do is multipli thi shape , but everi singl on of the frame of the input sound in the magnet spectrum , and we obtain , the spectrogram below .
so let's listen thi result sound .
clearli much softer becaus we have attenu most of the frequenc .
we have onli let pass , so thi is a band pass filter , the frequenc around a <num> , <num> and someth hertz , and the rest ar veri much attenu , okai ?
and these on we have even boost them a littl bit .
but of cours , energi wise we have reduc the energi quit a bit .
let's now us the short time fourier transform for anoth type of transform , what we call morph .
in morph , we start from a sound , x1 , in which what we're do is basic the short time fourier transform analysi re synthesi .
and at everi frame we ar multipli it magnitud spectrum by a magnitud spectrum of anoth sound that is also chang in time , okai ?
so what we're do is we're take anoth sound , x2 , we ar do a similar short time fourier transform process , and at everi frame , so basic it's a parallel process , we ar onli us it magnitud spectrum , and then what we're do is smooth it , becaus we ar the idea is that we ar appli the gener shape of x2 into x1 , okai ?
and if we see the equat below , basic what we're do is similar to the concept of filter .
but now the x2 is time vari , so it ha an l , it ha a frame , and we're multipli these two magnitud spectrum of x2 and x1 at frame l , and the phase spectrum is onli the on of x1 .
so let's see that in practic .
thi again is the same sound that we plai befor , the orchestr sound , and below it is again the magnitud and phase spectrum .
but now what we ar do is , thi black line is a smooth magnitud spectrum of anoth sound , but thi on will keep chang , the same wai that keep chang the orchestr sound .
and we'll be ad these two spectrum again , becaus it's in a logarithm scale .
and we will be creat a new set of spectra from which we do the invers fft .
let's do thi for the time vari sound .
so on top we have the orchestra .
we alreadi have heard about it and let's now listen to the other sound the x2 sound which is the speech male sound .
do you hear me , thei don't lie at all .
and the spectrogram we see in the middl is the smooth version of thi x2 sound .
so it doe not have the detail of x2 , it just ha the gener shape .
and these ar the two spectrogram that we ar sum , frame by frame , to obtain the lower spectrogram my , okai ?
in which we ar definit see that is not x , and it's not x2 .
it's a modifi version of the two , let's listen to thi modifi version can you hear me , thei don't lie at all .
okai so , it clearli ha aspect of the orchestra , and basic , we can understand the speech becaus the gener shape of the magnitud spectrogram is the on of the speech .
mayb on wai of understand thi sound is as if the orchestra wa plai through the vocal track of thi male and therefor reproduc the phonet kind of textur of the speech sound .
okai , now let's go to the sinusoid model that we alreadi have seen .
so we have again the analysi of the sinusoid model with the peak detect and sinusoid track .
and now what we go to be do is modifi the result sinusoid valu .
but there is a small chang here , we ar not go to take the phase valu .
the phase valu ar veri sensit and if we want to make ani transform , it's veri difficult to take care of them so what we ar do is regener the phase valu from the frequenc valu .
so we'll be modifi amplitud and frequenc and then we will be gener the phase valu after the transform and thi is the input for the synthesi and it's the same synthesi that we have been do until now .
these ar the particular oper we ar do on the output of the sinusoid analysi , so that new frequenc and new amplitud ar the result of appli some scale factor , sf , to the input frequenc and also the read of the input frequenc ar control by some scale time factor which allow us to move insid the kind of input arrai , input signal , so that we can slow down or speed up the read of the sound .
and we do that for both amplitud and frequenc , the amplitud , sinc is done in the db scale , we sum the scale amplitud factor with the amplitud of the input signal .
okai , and the phase ar regener , thei ar not from the origin sound .
and thei ar gener by start from the previou phase .
and therefor we need an initi phase at the begin , which can be zero or can be a random valu .
and then at everi frame we add the frequenc , the new frequenc that we ar gener , so that the phase automat unwrap and gener from the frequenc valu .
so these would be for exampl a scale envelop , so the scale factor , appli to a particular sound and therefor would be an envelop in which we'll read from the input time , so the horizont axi is the input time , and it will assign an output time to everi input time .
so , chang the read posit of the input time and modifi it length .
so let's see a particular exampl of thi time scale effect , in which we start from a mridangam sound , okai , and we ar analyz that with sinusoid model , so on the spectrogram on top what we ar see is the origin signal and the synthes on , the trajectori of the sinusoid .
and let's listen to thi sound first .
okai , and then below it is the transform spectrogram , both the transform sinusoid , so these ar the modifi sinusoid in which we have space them differ .
so , we have been read them at a differ speed .
and if you look at the horizont axi , the time axi is veri differ .
so the origin sound wa two second long and now thi output sound is basic three second long .
so it ha beeb stretch by a factor of <num> , okai ?
so what we ar see here is the output sound but of cours with a new time inform .
so in term of frame , there ar mani more frame becaus the length of the frame will remain the same .
so let's listen to the re synthes modifi sound .
okai , so we have chang the durat , not in a constant scale , in fact we basic made all the onset at the same sort of distanc .
okai so we basic warp the time inform in a wai to gener the time in a differ posit and make the sound a littl bit longer .
of cours the number of possibl here is enorm and we can just plai around with thi map in ani wai we want .
and in term of the other transform , the frequenc scale , appli to the sinusoid , well we also need a scale envelop , in which it is time vari , and so here we have on the horizont axi time , and the vertic axi is the scale factor , so that mean basic that at begin of time we ar multipli all the frequenc of the sinusoid by <num> , and by the end of the sound we're multipli all the frequenc by <num> .
so the frequenc will start lower and end up higher .
so let's see that in a particular sound .
so thi is the orchestr sound that we have alreadi heard .
and we see here the sinusoid analysi of it , in the spectrogram , where we see the origin spectrogram and the sinusoid track , and then below it is the transform sinusoid from that curv that we just show .
so here we see that at the veri begin the sinusoid ar more compact so thei ar lower frequenc .
and at the end thei ar higher becaus we have multipli them by <num> .
so let's listen to thi modifi orchestr sound .
okai , of cours it doesn't sound natur becaus thi is not someth that you normal would do , and there is some distort , but it can be refin and obtain some good result by appli thi type of techniqu .
there is not much inform about the detail of how to appli thi type of transform on sound .
but , if you look in wikipedia you can have some pointer and some initi refer for sound effect , equal , and how to appli time scale and pitch modif to sound .
that's all i want to sai in thi first theori lectur .
so we have gone over some particular transform us the short term fourier transform and the sinusoid model .
and then in the next theori lectur we will continu with the other model we have present and us them in some other type of transform .
so i hope to see you next lectur .
bye bye .
welcom back to the cours on audio signal process for music applic .
in the previou theori lectur we start talk about sound transform , in particular about how to us the short time fourier transform and the sinusoid model to manipul sound .
in thi second theori lectur i want to continu that and talk about the harmon plu residu model and how it can be us for transform the frequenc of the harmon , and then the harmon plu stochast model , and how it can be us for time stretch and morph oper .
thi morph , by the wai , is quit differ from the on that wa possibl with the short time fourier transform .
and of cours these ar just some exampl oper , exampl transform , but the number of possibl usag of these model is much larger .
let's start with the harmon plu residu model .
thi is the block diagram that we have seen befor , in which , from the input sound we analyz the spectrum , find the peak , and then find the fundament frequenc , find the harmon , and we subtract those harmon from the origin signal .
we need to comput the spectrum of the origin signal again in order to develop a spectrum from which we can subtract these harmon and subtract these harmon in a proper wai .
okai , and then where we do the transform is in the frequenc and amplitud of the harmon , we don't appli ani transform to the residu .
in order to appli transform to the residu it make sens to have a model for it .
and that's what we're go to be introduc in the next model ; the harmon plu stochast model .
and here the transform on the harmon , again like in the sinusoid model , it's appli onli on the frequenc and amplitud .
the phase ar forgotten , we don't us them , we will be resynthes them again after transform .
and the main issu of that is becaus the phase ar veri sensit to transform .
and it's veri difficult to handl them , so it's better to just regener them , after transform and it doesn't sound that bad .
anywai , so after the transform we can sum these new harmon to the residu signal .
and thi residu signal , sinc it doe not includ ani determinist , ani harmon inform , it will merg quit nice .
and then it will creat a sound that ha the same residu than the origin and the harmon will be modifi .
in term of type of transform that can be done to these harmon , the frequenc of these harmon , there ar mani .
and here i explain three common on .
the most tradit on is to just transpos all the frequenc by a given factor .
so , we multipli all the harmon by a scale frequenc factor , so that would correspond to a transposit , so if we've multipli by two it would correspond to convert the sound to an octav higher .
if we multipli by <num> , it would be an octav lower .
okai , then we can , instead of multipli , we can just shift all the frequenc .
for exampl , we can sum a factor to all the frequenc .
so , we'll be shift all the harmon by an addit compon .
and final , the last on i want to mention is what is call frequenc stretch .
in which we ar applai frequenc chang that is depend on the harmon .
so , here what we ar do is basic divid everi harmon by it's harmon number .
so we basic get a frequenc around the fundament , and then we multipl by the harmon number to the power of a scale factor .
therefor , the higher harmon will be modifi veri differ from the lower harmon .
it's veri much harmon depend and that can creat some nice effect that we will see .
so thi is a plot of these three transform that exemplifi these oper quit nice .
so on the top left we have the origin harmon , all locat at at the harmoni number locat , on , two , three , four , and five .
then if we transpos by two , on the right , it just simpli multipli everi on by two so harmon on will be in posit two , harmon two in posit four , etcetera .
we ar maintain a harmon spectrum .
we ar just transpos by a factor of two .
if we shift instead by an even valu , in thi case sinc we ar have the frequenc normal to integ valu , gere by <num> will be basic shift by half of the frequenc of the first fundament , of the first harmon .
and in here we see that we're shift everyth by a constant valu .
so , from now , after thi transform , we do not have ani more a harmon seri .
becaus the first harmon is not just the fundament frequenc anymor .
okai ?
so we have now a seri of valu that ar equal space but thei ar multipl of anoth frequenc , so the sound mai be quit a bit differ , and quit interest in some case .
and final , the frequenc stretch oper .
it's a quit differ oper .
now , it chang the distanc between the harmon and it's like an accordion .
you know ?
so , if it's here <num> it mean that well the first valu , the fundament , will not be touch .
the first on will be stretch by a factor of <num> and these ar go to be power of thi .
so as we go higher up , it's go to go sort , the distanc will increas kind of exponenti .
and thi creat again quit veri interest effect .
so let's listen to a sound in which we have appli some stretch and transpos kind of transform .
so let's listen .
it's a flute sound that we can listen to .
okai .
it's an a4 and below that we see the harmon that i have identifi on top of the residu spectrum of the origin signal .
and then what we ar do is leav the residu as it is , the background spectrogram is exactli the same than the top on .
and we're just modifi the harmon .
so , if you look here the harmon have been heavili modifi and if you see there have been a stretch and at the same time transpos a littl bit .
so let's listen to that modifi sound .
okai , of cours , quit differ .
and if you pai attent , the residu is there and sinc the residu is basic thi breath nois , it merg also quit well with these transpos harmon .
okai , let's go to the other model , the harmon plu stochast model .
it's veri similar to the previou on .
and now the transform is appli both in the model of the residu signal , and of cours in the harmon compon .
so we have an stochast approxim , and therefor we can transform that quit easili , becaus it's a model that ha simplifi the residu quit a bit and it's quit flexibl in term of manipul .
and then of cours after transform we obtain the stochast compon and we obtain the frequenc , amplitud , and phase of the harmon sinusoid and we can synthes the two , and sum togeth .
so in term of what is actual done is veri similar to what we present for the sinusoid model .
now what we're introduc is the transform on the stochast compon in a similar wai .
so the frequenc of the harmon can be scale by a factor .
and the time of the read of thi frequenc valu can also be chang in order to obtain thi time scale oper .
so we have thi scale function .
the amplitud is the same wai and the stochast compon is handl in the same wai .
okai , and of cours the phase ar gener .
and thei ar gener by start from an initi phase and then ad the frequenc of everi harmon that we want to gener to that phase , so we can gener instantan phase that wai .
okai , let's show an exampl of that .
thi is the sax phrase that we have heard befor , let's listen to that again .
okai , and then we have the analysi of it , where we have analyz the harmon and the stochast compon , and then we can chang that .
in thi particular case we have done time scale , so we have chang the time and now with the residu approxim with stochast it's veri easi to do time scale of the stochast and the harmon , and and that's it .
we have just focus on the time scale transform in thi particular exampl .
let's listen to that veri simpl time scale oper .
so basic the onli thing we have done is we have compress the first part of the signal by quit a bit .
and in fact it's like half of the durat , and the second half ha been extend by twice as much .
so in fact the overal durat of the sound remain the same .
of cours , as you can imagin , thi is veri flexibl and we can do a lot of kind of envelop that we can plai around with .
okai , now , let's talk about the morph us thi harmon plu stochast model .
okai here we have simplifi the block diagram .
we have two sound x1 and x2 .
now thei ar basic at the same level , and basic what we're go to do is interpol the two represent .
so from x1 we obtain the frequenc and amplitud of the harmon and the stochast approxim of the residu .
on of sound <num> we do the same thing .
and then what we're do is interpol these <num> set of function .
we're interpol the frequenc , the magnitud , of the harmon .
and we're interpol the stochast envelop of the residu .
and then of cours we can synthes back the output sound by gener the stochast compon and the sinusoid compon .
let's look at a particular frame of a sound in which we have appli like a <num> interpol .
so on top left is x1 , on particular frame , the harmon visual as the locat in the frequenc and height is the amplitud , okai ?
and then the blue on is sound <num> .
x2 the red on is a sound too .
okai and then we can interpol thi too , basic harmon by harmon we can interpol .
and as you see the x2 it's a differ frequenc , it's a sound that ha a higher pitch .
so the interpol result ha a pitch , which is in between the two and ha a shape , again , that is in between the two , okai ?
so , it's basic a <num> interpol between the two set of valu , and the stochast compon below is , that's the same idea , so , on x1 , thi shape is the approxim of the residu , is veri clear that the cross is actual where we have valu , as an envelop , and x2 is anoth envelop for x2 .
and the output is the interpol envelop .
so , it's a shape that's in between these two shape .
okai , let's us that in a particular exampl in which we start from a violin sound and we're go to interpol it progress toward a soprano sound .
so here we see , on the top , the violin sound and you can listen to .
okai , and it's analyz , so we see the harmon , well we see , i think here , is the first forti harmon , and then the stochast compon of that .
and then we see below the analysi of the soprano sound , listen to thi .
okai where we see again the harmon , it's a higher pitch .
and the stochast compon in the background .
and now we can choos the interpol valu to go from on set of valu to the other .
so it will progress go from on sound to the other .
let's listen to the result .
of cours , sinc on , the soprano sound , is higher than the violin , we hear thi glissandi .
but at the same time , we hear the evolut of the timbr .
and everi singl paramet is slowli chang from on to anoth .
again , the possibl type of function to control these interpol is enorm so we can plai around quit a bit with these idea .
and that's all , so again in wikipedia there is not much and there's not much that we can refer to in term of try to understand some of these transform aspect .
and in fact a lot of these thing is just by try .
so i would encourag you to try these thing and develop your own intuit of what it work and what it doesn't .
and that's all .
so thi ha been the second theori lectur on sound transform .
of cours in thi week , what is import is the program and the demonstr class even more than the theori lectur .
becaus after all it's a veri appli topic , and it ha to be grasp from a applic and from an an intuit and music prospect .
so thank you veri much for your attent .
i'll see you in the next lectur .
buh bye .
hello , welcom back to the cours , analyz or process for music applic .
thi week , we're talk about sound transform .
in the theori lectur , we went over some of the model that we have been talk about thi cours .
in the context of how thei can be us to manipul sound .
so now , in these , demonstr class , i want to us some tool .
mainli the sm tool .
to try to understand these transform from a practic point of view .
in thi class , i want to go over the , the idea of morph us the short time fourier transform .
so we'll be morph two sound .
we will be morph the sound of the ocean sound we've been listen quit a bit .
and the sound of male speech that we also have been listen to .
and us the stft to combin them in some wai .
okai , so let start first try to understand these sound .
we will us the sm tool's gui , the analysi model on .
and we will start with the short time fourier transform and we'll first analyz the ocean sound .
okai ?
thi is go to be the sound we're go to be take as x1 , as sort of the basic sound .
on top of which , we will be put kind of the speech sound .
so thi is the basic sound .
and it's a sound that mainli we us all the phase spectrum for .
and we will be combin the magnitud spectrum togeth with the speech .
so the detail is not so import .
here , we ar worri about the gener spectral characterist .
so the window doe not have to be that big .
so for exampl , <num> , it's okai .
there is no need to realli zero pad , and there is no need for zero face window , so odd size window is no problem .
on the ham window it's , it's good .
ham window will be abl to overlap nice to <num> or it's nice , it's a simpl window .
and the hop size , thi is import to be quit small hop size , so that we preserv the time inform of thi ocean sound .
so let's us mayb <num> , okai ?
so now we will comput .
well , we're not go to see much becaus basic we're just go to see the , the spectrum of thi veri noisi type of signal .
but clearli , we see thi wave type of shape .
and of cours , these random type phase and of cours , the record search will be the same .
anywai , so let's , well just start with thi type of paramet .
and now , we will also analyz thi speech sound .
so , we'll take the speech and male sound .
and we're go to we don't have to us the same paramet .
the hop size will be the same becaus we will have to be morph frame by frame .
the window size can be larger .
but again , sinc we're onli go to take the overal shape there's no need for frequenc resolut to defin the , the harmon of the sound or have the detail of frequenc resolut .
that we would need if we want to detect the harmon .
so mayb let's just us these .
okai , so clearli thi in the , the magnitud spectrogram , we see veri nice the time inform .
we see veri nice the shape of the spectrum , you know ?
so here basic is the , the foreman of the sound .
and differ vowel that , we , hear .
so thei're , we see thi kind of red shape .
and of cours , we don't see the individu harmon .
but it's , it's not a problem .
we don't want to detect them for thi particular type of transform .
okai .
okai , so let's start with these twp sound and these paramet .
and now , we will go to the the transform's interfac .
so we go to the sm tool softwar transform interfac directori .
and in here is where all the code for for the transform is and the , the control code .
and there is a main file that is an interfac which is call transform gui .
so we can execut that .
and that will open the interfac for the transform we have implement so far .
okai , so here we have these differ transform .
and we'll focu on thi stft morph .
and by default in fact we have the , the sound that we were talk about , okai , the ocean sound , and the speech male sound .
so let's set the paramet as we talk in the previou analysi .
so let's us the ham window , let's us <num> as the window size , let's us the same fft size .
and let's us the half size of <num> .
and now for the speech , again , let's us ham window .
and let's us the same paramet .
okai .
now , we'll have to choos the paramet for the actual morph .
and there is basic two paramet .
on is the smooth factor of the second sound .
okai ?
so we're go to be appli the speech sound on top of the ocean sound .
but befor appli it , we're go to smooth it , so that it just captur the gener characterist .
these valu go from zero to on , so where zero ha to be bigger than zero .
and on is alwai move , so that mean that we just captur the <num> sampl .
well , half of that becaus we're onli go to do , do the posit spectrum , so <num> .
but you can review that , so by default here it sai <num> .
so let leav it with <num> .
and then we have a balanc factor , which is a factor which will sai how much of each spectrum we're go to take .
if we take zero it mean it's go to be close to the ocean sound .
in fact , if we zero it , it's just the ocean sound .
and if it's on , it's go to be basic the full magnitud spectrum , the smooth magnitud spectrum of the speech .
so let's just take quit a bit of the speech .
let's put for exampl , <num> , let's appli it .
okai , so here is the result .
we see the input sound x , the ocean sound .
then the magnitud spectrum of the ocean sound .
and thi is the morph spectrum .
so thi is alreadi the , the combin of the magnitud spectrum of the ocean with the smooth spectrum of the speech .
clearli , we see quit a bit of the speech shape .
but we also see the granular of some of the ocean sound .
and , thi is the synthes .
let's hear the synthes sound .
do you hear me ?
thei don't lie at all .
so we definit understand and hear veri clearli the speech sound .
we will hear the pitch of it becaus the pitch we don't , we have not track it .
and the phase , in fact , where a lot of the pitch inform is in the phase spectrum is the on of the ocean sound .
so we hear like a whisper type of sound and a kind of a littl bit of the ocean .
in order to hear more of the ocean , we can just reduc the balanc .
so for exampl let put <num> .
these will take let sai <num> of the speech sound , and <num> of the ocean sound .
definit now from the spectrogram , we can see that it's much closer to the ocean sound .
in fact , it's veri close to the ocean sound .
but , if we listen to it .
interestingli enough , sinc we alreadi have heard the speech sound , hear these sound , we , we hear the , the and , and understand the speech sound .
even though we if i bet that if we would have heard these for the first time , we would not have understood the , thi speech utter at all .
anywai , so feel free to plai around with these thing and with the paramet .
and i think quit a lot of differ nuanc can be obtain .
of cours , we could extend these applic to have more sophist control of where thi kind of interpol or morph paramet .
but anywai , with thi i believ it's a good interfac to get an understand of the potenti of thi type of of tool and of techniqu .
okai , so that's all i want to sai .
so basic we have us the sm tool .
first , the analysi to understand the , the spectrum of these two signal that we want to morph .
and then we introduc the , the transform interfac that have we have in the sm tool .
and we have us the sm more stft morph interfac to morph thi two sound that i've for sound thi ocean sound and and the speech sound .
so that's all .
that wa the first demonstr class .
we have seen the , the potenti of the stft for morph .
now in the next class , we will go to the , the sinusoid model and to the harmon , non sinusoid , and stochast to experi with other type of transform .
so i hope to see you next class .
hello .
welcom back to the cours audac process for music applic .
thi week , we're talk about sound transform .
and for exampl , in the previou , demonstr class , we talk about morph .
and , in particular , about how to us the short transform to morph the qualiti of two differ sound .
now in thi second class i want to talk about time scale .
therefor about how to chang the durat of a sound and basic then modifi the , the length of the particular sound fragment .
so let's , start by , us , the possibl of audac , for thi type of transform .
let's start from , thi sound , thi is orchestr sound that we have in , sm tool , directori .
and now , in , in the effect , menu of audac .
there is , quit a few of transform possibl .
and , even , there is , the possibl for extend , these transform by extern plugin .
and , you can find mani , avail onlin .
but let's focu on veri few of these transform that relat with chang the durat of a , of a sound .
and the simplest on is for exampl thi on .
it sai , chang speed .
thi is a veri simpl algorithm that the onli thing it doe is chang , the reproduct speed , basic .
so it chang how the sampl ar read , and therefor reproduc .
and of cours the effect of these is that it modifi not just the time , but it modifi the frequenc of of the sound .
so let's listen to that same , orchestr , sound .
but chang by , for exampl well , if we put it at zero , it , there would not be ani chang .
and , for exampl , let's chang it by <num> .
so these will speed up the , the reproduct of the sound by <num> .
and clearli , we see that the sound is now shorter .
and now we can plai it .
okai , so thi is the standard effect of read in a d score i , i'm chang the speed of of reproduct of an analog d score of a , a tape .
and that can be done in in digit media .
but clearli thi is , is okai but it's not , that interest in the sens that we ar manipul not just the durat but whole qualiti of the sound .
so more interestingli when we talk about time and scale , what we normal ar refer is to be abl to chang the durat of the , of the sound without chang the qualiti of the sound .
without chang the frequenc that ar present in the sound .
and within , the audac there is a few , algorithm that do that .
the most , sophist on that i know of , is , thi on that sai a , slide time scale and peak shift .
okai , and thi algorithm perform both tempo chang or time chang and pitch chang and us a sinusoid model .
in fact it us sinusoid sort of model veri similar to the on we have been present in class .
and you can of cours look the code of thi algorithm , on the , on the audac websit .
you , you have access to the sourc code of that .
the , the major differ , which is an import on , is that thi sinusoid model is base on a subband type of process .
so it doe a sinusoid model by split the whole sound , in octav , and model everi octav , with a differ analysi synthesi approach .
so the qualiti is a littl bit better than what we can do in the algorithm that we have been develop in class .
so , let's listen to that .
and , it easili can be control in time .
so here , for exampl , the control of thi , algorithm can be done in a wai that we have an initi tempo chang as a percentag , and a final tempo chang .
so , for exampl , what we can do is start slower , so let's sai okai , let's start , let's , at let's sai , <num> , or <num> slower and let's finish by speed up .
so let's for exampl end up with <num> speed increas .
but rememb , these we're not chang read of the sampl , the time to make sampl .
thi is done us the sinosora model .
so therefor receiv the size the sinusoid but a differ speed while maintain the pitch of the sinusoid .
so let's analyz these .
thi quit fast , in fact is a veri effici algorithm implement in c .
so now we ar done and we have chang the , the durat .
well it's a time vari durat so let's listen to that .
okai , so we have a time durat and clearli the pitch , or the frequenc have not chang .
the sound ha chang in durat , ha sped up , the tempo ha increas , but not the frequenc , and that's a pretti good algorithm .
there's some more sophist on but thi is a pretti decent on that can perform good time scale algorithm .
so now let's go to the , our own implement .
so let's go to the gui of transform that we have and let's go to the sine model .
okai , and let's go to the , for exampl , a sound .
let's us the piano sound , okai .
of cours , now thi algorithm will have to decid the paramet .
so , in the audac implement everyth kind of it's a black box , so and it doe pretti good .
it choos the best paramet for thi type of transform .
here we have to choos the paramet .
so , we first have to choos the analysi paramet of the sinusoid model .
it's a piano sound , it's a , well , it's a harmon , sound , but thi , in the sinusoid model , thi is not an issu .
let's we have to make sure that we distinguish the , the , the peak of the spectrum enough so that we can build sinusoid out of that .
so let's start mayb with a ham window .
<num> , mayb , let's increas thi a littl bit , let's put <num> sampl of the window size .
the threshold minu <num> , mayb let's do even more , minu <num> .
the minimum sinusoid durat , well , let's leav it like that .
maximum number of sine , we can put as mani for exampl <num> so we , we realli do a lot of sinusoid .
and well , let's leav , mayb , thi a littl bit higher , the offset , so we allow frequenc to chang a littl more .
and let's first do the analysi of our synthesi , of the piano .
okai here is the , the analysi , the sinusoid analysi that it ha perform , and our synthesi .
let's listen to our synthesi .
well , let's first listen to the , the origin sound .
and then the resynthes on .
okai , it doe a pretti good job , so that's a good start point .
now we can appli the transform , and in thi interfac we can do scale and , of the frequenc and of the time .
so let's not do ani frequenc scale .
so if we're not do ani frequenc scale , let's sai that at time zero , we just put the valu of on , and at time on , we put the valu of on .
so there is no frequenc chang .
and in the time we have we can put the time scale oper .
so , for exampl , we can sai at time zero , just start at zero .
and , for exampl , at the end , we could just normal to , sai , on .
let's , slow down by a factor of two , for exampl .
so thi will slow down quit a bit more than we were do befor , so thi will stretch the sound to twice as long .
so let's see what it doe .
okai , so thi is the stretch sound .
so thi is , much longer .
the origin sound wa around four second .
now it's eight second .
and here we see the sinusoid that of cours sinc thei have been stretch we see a littl bit more of a mess here .
becaus we see twice as long and therefor more compact type of represent .
let's listen to thi stretch sound .
okai , that's pretti good .
and of cours , we can do , with thi interfac we can make chang that vari not just from begin to end .
but , for exampl , we can sai , okai at the begin , let's start at zero .
let's put that in the middl .
let's speed up , by , by <num> .
so it's go to be at , <num> . <num> .
and at the end , let's for exampl leav it well we can just leav it so that it's a littl bit longer , so it's <num> .
okai so now we can appli the transform .
okai so thi ha done a time vari time is stretch , and the begin ha sped up .
and the end ha slow down .
so let's listen to that .
okai so that's pretti good , and that's a quit interest transform and there is quit a lot of opportun to do interest thing here .
again thi is differ from the algorithm that audac includ , but the basic concept sinusoid model is the same .
the onli thing doe it a littl more complic , and of cours the implement is in c and is mayb more effici .
so that's all i want to sai , we have talk about time scale and us two algorithm .
both the audac and the on avail in the sm tool .
so hopefulli that ha given you a view of the potenti of the sinusoid model for time scale alter .
and that's a veri interest transform that is veri much us for mani type of applic .
so next class we're go to be talk about chang the pitch of the sound .
so that's a veri complimentari oper to chang the time .
so i hope to see you all next class , bye bye .
welcom again to the cours on audio signal process for music applic .
thi week we're talk about applic .
we're talk about how to us the model that we have been studi , throughout the cours , for the applic of sound transform .
so we aim at manipul , sound , on chang differ aspect of it .
in the first demonstr class , we exemplifi the idea of morphin us the short time for the transfer .
in the last class we talk about time scale .
how to chang the direct of the sound us the sonar model .
and in thi class i want to talk about pitch chang how to chang the frequenc of a sound and us the harmon plu the classic model so we're basic chang the pitch inform off harmon sound .
in order to us the harmon model , we need to , understand a littl bit , the sound .
so for exampl , if we start with thi saxophon sound .
let's listen to thi .
okai , in order to defin the , the , especi the window size .
we need to know the rang of fundament frequenc that ar present here .
so a good wai to do that is to , look at the spectrogram of , of the sound .
and basic zoom in to the first harmon so that we see , basic the fundament frequenc , which is the first , line of thi , harmon seri , and kind of see which is the lowest and highest volum , in here .
so , it's better to us a bigger window size so we see a more refin , line .
and with thi , okai , we have a pretti good , view of thi line , and clearli the lowest , sound would be thi note here or less , so that's around , let me see , let's sai around <num> hertz , and then the highest is thi , note here which is around <num> and someth hertz .
okai , so , thi is a good inform for now , defin the paramet of the harmon , harmon process fundament , s o let's go to the , the sm tool , model ui and let's directli to the harmon stochast model .
and we will open thi same file , which is thi sax phrase short version of it .
okai , now we have to choos the paramet .
so the window black monei is a good , choic becaus it ha a good low level side lobe .
and now in order to decid the window size , well it's good to go to basic go to , termin , and from we can just quickli do calcul , so for exampl we could just sai okai the black window ha six beat in the main loop .
you multipli by <num> , <num> , and we said that the lowest frequenc wa around <num> and someth hertz .
so let's you know , to be safe , let's sai okai , <num> hertz .
so <num> and thi is the window size that's appropri for a frequenc of <num> the lowest which is a meaning on the longest window that we'll need .
okai so we put as window size let's sai <num> and <num> an odd size .
at <num> size and let's make a big on so we have zero pad so that's <num> the threshold realli doesn't need to be that low , but but let's leav ti so we have a lot harmon there .
the durat of essenti track that's fine , maximum number of harmon .
the maximum number of harmon that there will be , will be <num> , <num> divid by <num> , okai ?
that would be , if it had all the harmon , is the <num> .
but of cours , thi is the lowest we can see , and thi is realli if we would have harmon all the wai through .
so , <num> would be fine .
then , we need to defin the rang of the fundament frequenc so , we can put the on we set , it wa around <num> , and the other wa around <num> and someth , so , to be safe let's sai , <num> , okai ?
thi is , nearest threshold to identifi the fundament frequenc .
mayb , let's , i'll be a bit more flexibl , let's put seven , and , thi deviat , it's fine like thi , and the stochast approxim for the residu .
we would need to be too , too wood , we don't need to to get a compress , so let's sai it would have point <num> or that should be okai .
okai , let's , comput it now .
okai , so thi is the result .
we have the origin signal , the analyz , the harmon plu the stochast and the synthes .
let's listen to the differ compon of it , the sinusoid compon .
it clearli captur most of the sound .
then let's listen to the stochast .
well , it's veri soft , but it's there , so , it's it's a relev compon and of cours , the sound of it too .
okai , so thi is a good start point , to now run the transform .
so let's go to let's quit thi , let's try to rememb these paramet , and now we will go to the other directori where we have the transform interfac and let's type hyphen and the transform gui .
okai , so thi is the gui for the transform , and let's go directli to the hp model with the transform , and well is alreadi by default the six phase here .
so , let's us the paramet we've us , if i rememb wa <num> , we did <num> of <num> .
the threshold wa minu <num> , satur wa that , the number of harmon <num> .
thi minimum wa frequenc wa at <num> and maximum wa , <num> .
at zero detect that zero error fiscal wa seven and the factor we put volum four .
okai .
now we can analyz .
and thi will definit do the same thing that we did befor , so we can check that the analysi correct .
it's exactli the same sound that we heard befor .
so now we can start plai around with the transform .
and we have a <num> possibl for chang the frequenc and <num> for chang the time so for the time we're not interest in chang the time so let's sai the time is <num> , <num> .
on mean that , it not chang anyth .
okai , now in frequenc scale , we have two frequenc transform .
given that we ar , in a harmon sound , we know what the harmon ar , and that's a great advantag compar with the sinusoid model .
in fact .
these type of chang could be done with the same sort of model , but , of cours , then , we ar restrict to some transform .
and , for exampl , the frequenc stretch is not possibl with the same sort of model becaus we don't know which correspond to which harmon .
okai , let's just first mayb , let's just us the scale first .
so , let's just have here , again .
without ani transform , so if we put zero , on , on , on , that mean that there is a frequenc stretch of on , which mean no stretch at , at the begin and at the end .
and then okai , in the frequenc scale , now let's start with by download or sort of decreas the pitch of thi sound .
for exampl point eight .
and time zero .
we will have point eight and a time on after we will also have point eight , okai ?
a veri , import , paramet is thi timbr preserv .
a timbr present , what it doe , it tri to preserv the shape of the spectrum of the harmon .
it a good on , it preserv the heart the harmon shape .
so , it should sound more natur than if we put zero , in with zero , we just transpos everyth , and so the magnitud will be affect .
so let's appli it like thi .
okai , so we have clearli transpos the harmon , down so now thei're closer togeth .
so let's listen to the result .
so it sound quit natur , even though we have transpos , mainli becaus of thi tamper preserv we have maintain quit a bit , that is , thi qualiti of the saxophon .
and then just to finish let's make some , frequenc stretch we can do stretch is , is a kind of to convert the sound into a new harmon type of spectrum in which we ar ad an exponenti factor to the harmon valu of it let's sai .
think we have zero time zero on , and sai let's start with on and then at the end let's stretch and also let's sai on point let's sai on okai so we will have a stretch factor at the end and not at the begin so progress the stretch will increas .
let's see what that doe .
okai , so we see clearli here that the fundament ha remain the same , and the harmon , while we still have maintain the , the scale factor , so we ar scale everyth down to point eight , but the harmon kept , keep , get apart from each other more and more .
as , the time goe on , clearli , the end , thei ar not equal space , so that's an inharmon spectrum , let's listen to that .
okai , so clearli the , the low frequenc is the same , but as , as time progress , the , the sound , sound more inharmon and is more metal becaus the .
the harmon have been stretch .
of cours we can do a lot of thing , so feel free to plai around with these paramet , and of cours with time scale .
time scale is also veri power , onc we have been abl to analyz the sound , with the harmon plu stochast model .
that's all i want to sai , so basic we have talk about the idea of chang the pitch or the frequenc of a sound .
at first we us sonic visual to to understand the sound and then we the sm tool ui with the harmon model to chang the pitch or the frequenc of a sound .
and we have been talk about pitch chang , of cours pitch chang can be done with the sinusoid model , can be done with the harmon plu stochast , or the sinusoid plu stochast or with quit a few of the model we have been talk about .
and in audac also there is some implement for that .
so anywai , we just present a littl bit of that , an exampl us the harmon and the potenti for these type of transform , so i hope you got an idea of that and , now we'll have still anoth demonstr and we'll be talk about the harmon model .
but , in anoth , type of transform sound which will be a morph of two sound , interpol a represent of two sound .
so , i hope to see you all next class .
bye bye .
welcom back to the cours on audio signal process for music applic .
thi is the transform week , the week that we talk about the potenti of the spectral model approach we have been discuss in the past few week for the applic of manipul sound of transform differ aspect of sound .
and in thi program lectur i want to go over some of the code of the sm tool , packag that implement thi inform .
so in thi lectur , i want to explain the stft transform , so the file that implement some veri , basic transform us the stft .
so we'll be , basic implement these , block diagram in which after the analysi of a sound in a particular frame where we have the magnet and the phase of , sound , we can appli some transform , to thi , spectral data befor we actual do the invers fourier transform and re synthes basic , a new sound .
so let's go to a script that i wrote that make a veri simpl oper on on singl dft of a sound on on frame , so we'll be do some filter to on particular frame .
okai , so we'll be us thi sound over sound and so after import all the model , and the packag that we need , we read , sound file , the oval sound file into the arrai x .
then we well , with the , the , we get window ham window with the given size , here we have the same size for the window and the on that we're us for the fftn .
okai and then we just take on fragment of of the oval sound , <num> sampl so the size that we want to find .
okai , and then we also defin a filter .
okai and the concept of defin a filter in the frequenc domain is basic ; defin a shape , in , in db scale becaus we're go to be appli in in the db scale , that will be ad to the spectrum of the origin signal .
so it ha to be a smooth shape .
we don't want to have veri jack our strongest continu that we creat distort so in fact what we ar defin here is a filter that is in fact the shape of a ham window .
so we're go to be design a ham window as filter in the frequenc respons .
and in order to appli it in dd we multipli it by minu <num> so that we have a shape .
in fact thi is an invert ham window .
so thi will be us , to do basic a ban stop filter .
so we're go to a attenu a certain frequenc us the shape .
we go to see that by plot these curv .
then we take the magnitud and phase spectrum of the signal that we chose and in order to appli the filter we basic decid where we're go to appli the filter .
the filter is a <num> sampl long .
so , we're go to affect <num> sampl of the spectrum and we decid that it's go to be , the center is go to be the sampl <num> .
and then now , we copi the input spectrum to thi my and we're go to manipul or we're go to chang , the <num> sampl around thi 40th sampl .
so the filter will be appli to the <num> sampl that ar around the , thi 40th posit and then we do the invers dft .
okai so let run thi code first .
we ar in these directori in the work space so we can just run test .
okai , so we have execut thi script , now we can keep plot the differ thing , so we can first plot the waveform that we ar go to be comput the dft off .
so thi is the window fragment , okai ?
we can plot the filter .
so if we plot the filter , okai ?
thi is the shape that we go to be appli , appli .
so in fact it alreadi attenu becaus it's a ham window so that it is a step here , if it doesn't start at zero .
and sinc we have subtract <num> it goe down to <num> and then goe up again .
okai , so thi is go to be the shape the <num> sampl that ar go to be appli into a magnitud spectrum .
then the magnitud spectrum that we're go to be us is these , okai , thi is the overal spectrum of well <num> sampl , the magnitud spectrum , the posit valu .
and now the multipli version , well let's mayb we can even plot here on top of thi the modifi on .
so we can plot that my spectrum here .
okai , so these green spectrum is a modifi version in which everyth is e , the same , except these middl part .
thi is the part where we appli the window and it clearli wa affect veri littl of the , of the boundari and veri much at the center .
so we appli a smooth shape , and therefor , we did a band stop filter .
we kind of reduc , attenu it , the frequenc that ar around thi area .
and of cours then , we obtain the output sound , which is the y signal .
okai , thi is the modifi input signal , so in fact if we plot on top of thi , the origin signal , okai , that green on is the origin signal , and of cours , the blue on ha been attenu , and is , the shape is quit differ becaus we have attenu certain frequenc much more than other .
okai , so thi is a filter oper that can be easili done .
and then , in the stft transform file that is within the transform directori , we can find thi code , the stft filter at it's implement to be appli for a whole sound .
in fact , thi is the same idea , thi is the definit of the function , in which the input is the input sound , sampl rate , a window of <num>'s and hop size and then we pass in thi filter which is an arrai that is go to be appli to the magnitud spectrum .
and then basic the core is thi y loop that doe exactli what we have been show for on particular frame perform the dft that appli the filter and then it appli the invers dft .
okai , now let's talk about anoth oper that i believ is a littl bit more interest , which is the morph that we talk about .
so in thi script , we're go to be morph two sound , the sound of a rain with a soprano sound , but again on frame .
okai , in order to do thi morph what we're go to do is appli the manual spectrum of on into the other , or basic interpol the two magnitud spectrum .
how do we do that ?
well we do exactli the same thing that we did for on singl sound .
we go to find the window , we chose thi two fragment .
the , thei have to be in thi case the same size becaus we're go to be appli the , the same oper on both sound .
we're go to be interpol the two magnitud spectrum , so these we have to start from the same window size for thi and then thei have to be of the same size .
then we take the two spectra , the , of the two sound of of sub sum on and sum two .
and the , the core part of the , of the morph is in thi next section .
so what we're go to do is have on smooth version of on sound so that we onli appli a , the gener shape of on sound into the other .
and so that's go to be the second sound is go to be the on to be smooth by on given factor , point two .
so we us the re sampl , kind of the down sampl aspect to obtain a smoother version of the x2 spectrum and then we up sampl it again with interpol to get the complet spectrum with a smoother represent .
of cours , we can just have no smooth by put a valu of on .
and then , we're go to basic combin the two , a linear combin of the two .
we , we ar in a db scale , so we can just add them , otherwis we would multipli them .
in which there is thi balanc factor that defin how much of each is in the mix , basic and thi <num> , it mean <num> is appli to the second sound , and the rest , <num> is appli to the first sound .
and then , of cours , we take the invers , dft , from the result magnitud spectrum with the phase of the first , signal , okai ?
so the phase will be on the first signal , and the magnitud spectrum is a combin of the two .
okai , let's run these again .
let's run thi on , okai , and now let's keep show the differ sort of variabl that we have .
let's start with the magnitud spectrum , so let's plot the magnitud spectrum of sound on and x1 .
okai , and well , we had it open so we have to close it here and let's open it again .
okai , so thi is the magnitud spectrum of the rain sound , so it's quit noisi it of cours it indic in the high frequenc so the low frequenc ar stronger , but it , the case as the frequenc go up .
and , the , we can plot , on top of that , the second spectrum which is thi , soprano voic , which is clearli differ the soprano voic , as , these , veri , clear shape , which relat to the foreman .
we ar not so interest in thi type of morph to get a good resolut on the harmon , we ar interest in the gener shape .
okai , and now we can plot on top of thi the smooth version of the second so we appli a smooth factor of <num> , so mx2smooth2 , is the interpol so version of that , so if you put mx2smooth2 that's go to be , the smooth version of these speech of these voic sound .
okai so now thi is the , the red line is the on that will be interpol with the blue line , okai ?
and now with the balanc <num> the result spectrum is my that also can be plot on top of these .
so my , okai , will be , now is thi blue line and it clearli an interpol between the two .
so sinc it's <num> is closer to the red line , to the , than to the blue line and we had instead of <num> , we had , let's sai , <num> or <num> , let's , and let's sai that , and let's , run the test on again .
and now , if we plot on the same , plot , the my , okai , now is thi purpl curv and it clearli is much closer to the rain sound , becaus we have specifi <num> .
okai , so hopefulli that give you an idea of thi idea of interpol between two magnitud spectrum , and of cours , then when we plot y , the output .
thi will be the result fragment of the sound that captur thi interpol of thi morph aspect .
and if we go to the stft transform and there is anoth function that perform that for a whole sound , the stft morph .
okai , so stft more receiv two sound x1 and x2 , and here we have the procedur of control window differ and then there is the smooth and the balanc and it doe exactli what i show in in the case of two individu frame .
okai , and now we can show the , the file that basic is the on that is call from the the interfac , the transform interfac .
it ha on function name , and that it it receiv the sound and plot the , the spectrum and it plot the result morph .
so , it , it ha some default paramet and it doe all the thing that we have been , do .
so basic , for the whole sound .
so it read the sound , it get the window , and then it perform , stft , analysi for the whole sound , and then it doe the morph between the two sound .
in thi case the stft is done so that you can visual the spectrum of the signal .
okai , and then we do the morph and we do again the analysi of the output sound , so we can visual the spectrum of the input and the output sound , in , in the plot and it write the result sound file .
okai , so we can import thi thi file .
so the stft morph function oh we can import it as a name , which for exampl , st , and now , we can , call thi main and of cours , we chang the paramet .
so , the default paramet where ocean sound with a speech male with thi particular window .
so for exampl let's chang the balanc .
now it wa <num> so it wa closer to the ocean , than to the speech male .
let's make it so that the balanc of f is veri much close to the speech , let's take it back .
balanc , oh come on , balanc , okai , f and let's put for exampl , <num> , okai , and let's run thi .
okai , so now we have the input sound .
the spectrogram of the input sound .
and thi is the spectrum of the output sound , okai ?
and then the actual output sound .
so realli here , the output sound ha captur quit a bit of the shape of the speech .
so , if we can plai it , it ha save file into the directori so we can just type plai and ocean stft more .
do you hear me ?
thei don't lie at all .
okai , so clearli ha taken the durat of the , of the ocean sound , becaus that's the , the basic sound from which we're take the analysi from .
and then the magnitud spectrum ha been modifi by these smooth spectra of thi speech male sound .
okai and that's all i want to sai , so we have seen how within the sm tool there is alwai code for be abl to do morph between two sound us the short time fourier transform and the code is quit simpl but is the mayb the simplest type of transform that we can do .
it is the total and it can be quit , us and interest for quit a few type of applic .
so that wa all .
thi first program lectur , so in the next on , we will talk about the sinusoid model to implement transform in the sinusoid model us thi same sm tool and particular code that implement them .
so i'll see you next class .
bye bye .
hello welcom back to the cours on signal process for music applic .
in these transform week , we ar talk about how the spectral model strategi that will be present throughout the cours can be us for transform sine .
and in these program lectur we're actual try to understand those transform from a program perspect .
we're actual look at the code of the sm tool , and try to understand and us these transform possibl .
so we actual go through thi block diagram .
thi is the block diagram of the analysi synthesi of the sinusoid model .
and what we ar do now is from the output of the sinusoid model , by just take the amplitud and frequenc of the sinusoid , we ar appli sine transform to them .
and then de synthes the sound .
and if you notic here the phase inform of the analysi is not be us , most of the transform requir to regener the phase becaus we we're chang time or we're chang the frequenc , and therefor it affect the phase .
so , the region phase ar not us anymor , and we're gener the phase .
and first i want to look at thi issu , and see how relev is , to not preserv the phase of the region .
so we wrote these littl script , in which i analyz the sound , a piano sound us the sinusoid model .
and i do analysi and synthesi .
okai , so first i have all the packag that we need to import it , then i have all these paramet for the analysi , that i need .
we go in window size , i select the size , et cetera , et cetera .
and then well , we wait the file , i get a window that i need , the window in thi case , and i call the analysi function of thi sinusoid model file .
okai .
and it return frequenc , magnitud and phase .
now i want to call the synthesi of that , in fact let's us everyth , so let's us the man , the frequenc , the magnitud , and the phase of the analysi , that gener the sound .
okai , so let's save thi and let's run thi file .
okai so , now it ha execut everyth , and let's plot first the input sound x .
and we can plot on top of it , the output sound y .
okai .
veri close , in fact , if you listen to them , also clearli thei should be quit close .
so if you just type , the input sound from that , let's move thi here .
from the piano , okai , and let's listen to that .
and now we can plai the resynthes sound so that test2 . wav that i creat .
okai , thei ar quit similar .
the attack ar a littl bit not ideal .
but now let's zoom into on fragment of these .
okai for exampl thi region here , let's take a tinier version of it , tini section .
so clearli thei're veri similar , thei're not ident , well the blue is the origin and the green is the synthes , the synthes ha lost some aspecta bit , but thei look veri close .
thei're littl bit differ in the high frequenc , in the , in the contours .
okai .
now let's do the synthesi , but instead of us the origin phase , let's pass an arrai , an empti arrai , and thi is the condit that then the synthesi will recreat these phase and we're go to see that next .
but let's first let's just run these , it's run error again .
okai let's find thi file .
and now we can do the same thing , we can just plot the input sound , then we can plot the output sound .
alreadi we can see thei ar differ and of cours we can plai , we can for exampl plai the , the sound that wa gener .
basic it look ident .
that it sound ident than the synthes sound with phase , but it will look at the phase .
if we look at the shape of the waveform which ar go to be the phase inform .
usual we do a tini portion of it , and we do more .
okai , clearli the shape of the waveform ar veri differ , input and output shape ar veri differ .
that mean that the phase is quit differ .
thei all preserv a phase continu but the phase is differ .
okai , so basic thei're synthes , now we have gener the phase .
let's go to the sign model file .
where the synthes perform .
so in the , in the sinusoid model synthesi here in thi function , that where it pass and it accept the , the frequenc phase and it call synthesi .
okai .
and then in the main loop , we can see that there is some line to take care of these phase issu .
basic if the input paramet if the three phase paramet exist , that mean that , there is an arrai deliv zero .
it will us as the synthesi phase these phase otherwis it gener a phase us these line .
what doe thi doe is start from an initi phase that is initi befor here , it's initi as random phase as the first time through .
and everytim after that with increment the previou phase by i think the frequenc , the new frequenc .
so and take the frequenc that ha to be synthes , i'm us the hop size .
it comput basic the phase that the new frame should have .
so , it doe phase continu , but without measur or us the analysi phase .
and thi is what result , into thi shape that we saw here .
okai , now out of these , the sinusoid transform , so thi is the file what implement the differ transform on the sinusoid represent , basic there ar two type , the time scale on and the frequenc scale on .
the time scale is veri simpl , it accept frequenc and magnitud , so again no phase is here .
and what it doe is basic it creat frame in between .
so the core part of these function which is these , it basic it keep creat a new matrix , a new arrai of frequenc and magnitud , and it add interpol frame in between .
it actual doe not interpol , it just simpli repeat or jump actual frame .
so , that's the wai that we can creat a much longer set of frame so the frame rate is exactli the same , and it keep ad or delet frame , in order to make it longer or shorter , the sound .
and for the frequenc scale , it's simpler , it basic just take the frequenc .
okai thei everi , at everi frame , and the frequenc scale can vari in time , the same thing that the time is given wa vari in time .
and now it will multipli everi singl frequenc valu of all the , the sinusoid of a particular frame by thi scale factor at that particular frame .
and that's basic all it doe .
then we have the sine transform function that actual call the analysi and transform and synthesi and displai the , the result and thi is the file that is us from the graphic interfac .
so here we have a function that perform the analysi and ha some default paramet .
and it doe just the standard analysi that we have seen but it plot intermedi data , and then there is thi file , transform and synthesi , that accept the analysi paramet that we have obtain without the phase , and then it perform these transform that we just mention , the frequenc scale .
from a given arrai of scale factor and then it ha the time scale that perform a time scale oper .
and then of cours it doe the , the synthesi and it write the file .
so let's call thi .
okai it plot two figur , plot the figur of the analysi , which we see the intermedi data , and the synthes , and it plot the modifi version where the sinusoid have been scale .
both in frequenc , so we see here some of the transform , and in time , in which the durat ha chang .
and that's , that's all , so basic , thi wa an explan of the code , of the tool that perform sinusoid transform .
thi sinusoid transform can be quit power becaus we have quit a bit of flexibl and we can do some interest time stretch and frequenc shift or transposit oper that sound veri nice .
so next lectur we will continu in present the possibl of anoth transform and anoth model .
and in thi case is go to be the plu model , and we're talk about the morph that we alreadi have seen in the demonstr like we actual go to try to understand the good of it .
hello , welcom to the cours of audio signal process for music applic .
thi week we ar focus on transform on describ on applic of the spectral model techniqu that we ar cover in thi cours .
and in thi program lectur , we ar actual try to understand the program aspect of it and the code that we have been put togeth on the sm tool packag .
so in thi lectur , i want to talk about the , the most sophist model that we have cover , which is the harmon plu stochast model , and the transform we can do with that .
so we have been describ thi type of block diagram , in which , after all of these analysi that we do of understand the harmon , extract the , the inform , and then subtract them from the origin signal and we obtain , thi is the stochast approxim .
and now , we're focus on these two red block .
in which we ar , can appli transform to both stochast represent and harmon represent .
and of cours , then we can synthes back .
on of these transform is littl bit special , which is the morph .
the morph requir two analysi of two sound , so we have a on sound that perform all thi analysi and anoth on that doe the same .
and we ar basic interpol these two set of function the arrai of frequenc amplitud and the envelop of the stochast approxim .
and then we do the synthesi in the , in thi same wai .
okai .
so let's go to first the code that perform these transform and the , the on for the harmon is harmon transform , so we have thi file call harmon transform in which we do the transform just on the harmon compon of of thi model .
and the on that we have implement transform that we have as tool , ar the idea of scale the harmon .
then stretch the harmon in a non harmon wai , and then the idea of preserv or not the spectral shape or the timbr of the sound .
okai .
so within thi function harmon frequenc scale , we can do all these at the same time .
if we pass these three control paramet .
we're not go to go into the detail of thi code , but basic , we can see there is , here at the end the three basic transform line , in which we have the frequenc .
that these ar the input frequenc of all the harmon of a particular frame and a , a particular kind of set of harmon , the on that exist .
and we appli a scale factor , a multipl scale factor so these would be the transposit , what we call transposit .
and then onc we can transpos we can also do the stretch , okai .
and thi stretch is a factor that depend on the harmon and thi variabl invalid is basic the harmon number if it exist .
so there's a , so we ar el , elev thi stretch factor to thi valu .
so it's a wai to chang the , the frequenc depend on the harmon , there's sever wai of implement thi idea of stretch .
we can do it , in fact , the other wai around by have the harmon number to the power of the stretch factor or these .
you can plai around with thi two implement .
and then there is the idea of timbr preserv .
so , in thi particular function we ar not manipul the magnitud .
but we're do is , if we ar preserv the timbr , then we ar chang the magnitud in a wai that we give to everi harmon the magnitud that is closer to the frequenc that it origin had .
so basic , we have a spectral envelop .
and then , we recomput the magnitud in a wai that , it preserv the , the shape that origin had .
then we have the transform that ar specif for the combin of the harmon and the sarcast compon .
which ar in thi hp transform file .
and there is basic , two function .
on that perform time scale , and the time scale is done on the three compon at the same time , the frequenc and amplitud of the harmon , and the stochast envelop .
so it's perform in thi core loop .
and basic it interpol , while in , in fact , it just add or delet frame depend on thi time scale paramet .
and then there is a more complex function , which is the morph .
that accept the arrai from the two sound .
so the analysi of the two sound .
and accord to these interpol function , it choos a part of each .
so the core function the core of the function is just thi loop , that basic iter over the whole the set of frame of the sound .
it find the harmon that ar present in both sound , becaus of cours , the interpol between two sound can onli happen if there is content in the , in the two .
on ha a zeroth harmon that becom a veri complex thing to handl .
so in thi code , it look for the intersect , so the harmon that ar present .
and then , it just perform the interpol of the frequenc , the magnitud and the stochast envelop .
when there is some inform exist in a , in a both sound of the frame of both sound .
so clearli , the number of frame ha to be the same and ideal , the number of harmon and the stochast envelop the number of element or break point in the , in the approxim function ha to be the same .
and that's that's what it doe .
and basic , then you have thi function call hp more function that wrap these function and allow us to do our analysi and synthesi , and is the , the on that is call from the interfac .
so , we have basic , two function .
on is analys that return the result of analysi .
and then , anoth is the transform and synthes that perform the transform and synthesi of the sound .
okai .
now if we run thi we can just execut that , we can just type run and hp more okai .
and thi will execut both function .
of cours , we can also execut on on on the other independ , by import the file and then just call the two by separ .
so thi is the result of the analysi function that perform the analysi of the two .
and thi is the result of the transform and the synthesi , that perform the synthes version of that .
sinc we alreadi have listen to these sound so there is no need to listen here now .
but pleas feel free to plai around with these function .
it's a quit interest on you can do and of cours , by program you can extend these quit a lot .
and that's , that's all .
basic , we have gone through the hp part of the transform .
so within sm tool there is a number of transform that ar specif for the harmon , plu a stochast model .
and be the most sophist on , it can perform some interest thing .
but , it's a littl difficult to to us it .
so you have to know to do proper analysi and to control these represent hat thei're a littl bit more sophist .
anywai , so hopefulli with these you got an idea of the harmon plu stochast model in term of each potenti for transform sound .
sound that of cours , have to be harmon and thei have to have a meaning stochast represent .
if those sound fulfil that model , then the number of thing we can do with it is realli great .
so thank you veri much for your attent and we'll see you next class .
bye bye .
